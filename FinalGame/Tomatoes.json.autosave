{"firstLayout":"","gdVersion":{"build":228,"major":5,"minor":5,"revision":0},"properties":{"adaptGameResolutionAtRuntime":true,"antialiasingMode":"MSAA","antialisingEnabledOnMobile":false,"folderProject":false,"orientation":"default","packageName":"com.example.gamename","pixelsRounding":false,"projectUuid":"5ed291ad-627e-41c9-b650-be6a316446a2","scaleMode":"linear","sizeOnStartupMode":"adaptWidth","templateSlug":"","version":"1.0.0","name":"Tomatoes","description":"","author":"","windowWidth":1920,"windowHeight":1080,"latestCompilationDirectory":"","maxFPS":60,"minFPS":20,"verticalSync":false,"platformSpecificAssets":{},"loadingScreen":{"backgroundColor":0,"backgroundFadeInDuration":0.2,"backgroundImageResourceName":"","gdevelopLogoStyle":"light","logoAndProgressFadeInDuration":0.2,"logoAndProgressLogoFadeInDelay":0.0,"minDuration":1.5,"progressBarColor":16777215,"progressBarHeight":20.0,"progressBarMaxWidth":200.0,"progressBarMinWidth":40.0,"progressBarWidthPercent":30.0,"showGDevelopSplash":true,"showProgressBar":true},"watermark":{"placement":"bottom-left","showWatermark":true},"authorIds":[],"authorUsernames":[],"categories":[],"playableDevices":[],"extensionProperties":[],"platforms":[{"name":"GDevelop JS platform"}],"currentPlatform":"GDevelop JS platform"},"resources":{"resources":[{"file":"New3DBox2_Front2.png","kind":"image","metadata":"","name":"New3DBox2_Front2.png","smoothed":true,"userAdded":false},{"file":"New3DBox2_Front.png","kind":"image","metadata":"","name":"New3DBox2_Front.png","smoothed":true,"userAdded":false},{"file":"assets/Knife_tex.png","kind":"image","metadata":"{\"extension\":\".png\",\"pskl\":{}}","name":"Knife_tex","smoothed":true,"userAdded":false},{"file":"knife.glb","kind":"model3D","metadata":"","name":"knife.glb","userAdded":false},{"file":"InvisibleWall_Front.png","kind":"image","metadata":"","name":"InvisibleWall_Front.png","smoothed":true,"userAdded":false},{"file":"assets/New3DBox_Front.png","kind":"image","metadata":"{\"extension\":\".png\",\"pskl\":{}}","name":"New3DBox_Front","smoothed":true,"userAdded":false},{"file":"assets/New3DBox_Front2.png","kind":"image","metadata":"{\"extension\":\".png\",\"pskl\":{}}","name":"New3DBox_Front2","smoothed":true,"userAdded":false},{"file":"kitchen3.glb","kind":"model3D","metadata":"","name":"kitchen3.glb","userAdded":false},{"file":"tomato6.glb","kind":"model3D","metadata":"","name":"tomato6.glb","userAdded":false},{"file":"tomato_bullet.glb","kind":"model3D","metadata":"","name":"tomato_bullet.glb","userAdded":false},{"file":"fake_tomato.glb","kind":"model3D","metadata":"","name":"fake_tomato.glb","userAdded":false},{"file":"potglb.glb","kind":"model3D","metadata":"","name":"potglb.glb","userAdded":false},{"file":"pot_led2.glb","kind":"model3D","metadata":"","name":"pot_led2.glb","userAdded":false}],"resourceFolders":[]},"objects":[],"objectsFolderStructure":{"folderName":"__ROOT"},"objectsGroups":[],"variables":[{"name":"CursorX_for_knife","type":"number","value":0.0},{"name":"TomatoKilled","type":"number","value":0.0},{"name":"SpawnedTomato","type":"number","value":0.0}],"layouts":[{"b":209,"disableInputWhenNotFocused":true,"mangledName":"MainScene","name":"MainScene","r":209,"standardSortMethod":true,"stopSoundsOnStartup":true,"title":"","v":209,"uiSettings":{"grid":false,"gridType":"rectangular","gridWidth":32.0,"gridHeight":32.0,"gridOffsetX":0.0,"gridOffsetY":0.0,"gridColor":10401023.0,"gridAlpha":0.8,"snap":false,"zoomFactor":0.44664559572385667,"windowMask":false},"objectsGroups":[],"variables":[],"instances":[{"angle":270.0,"customSize":false,"height":0.0,"keepRatio":true,"layer":"","name":"Camera","persistentUuid":"53fc97fb-a525-4c67-ba79-ea902e30cd00","rotationY":14.0,"width":0.0,"x":909.0,"y":1235.0,"z":370.0,"zOrder":2,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":false,"height":0.0,"keepRatio":true,"layer":"","name":"Knife","persistentUuid":"e6f31cfa-0790-4810-8013-ed643da8a769","width":0.0,"x":210.0,"y":563.0,"z":400.0,"zOrder":4,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":-90.0,"customSize":false,"height":0.0,"keepRatio":true,"layer":"","locked":true,"name":"Kitchen","persistentUuid":"9be8073f-cd5c-44c7-80b9-27ae8aedb6a0","rotationX":90.0,"rotationY":180.0,"sealed":true,"width":0.0,"x":1120.0,"y":-1078.0,"z":-1880.0,"zOrder":5,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":104.0,"customSize":false,"height":0.0,"keepRatio":true,"layer":"","name":"Tomato","persistentUuid":"ba83e849-d465-417b-96ed-169d10865ec3","width":0.0,"x":1373.0,"y":616.0,"z":249.0,"zOrder":6,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":true,"depth":5.0,"height":941.0,"layer":"","name":"Floor","persistentUuid":"f9660010-ee3f-48f5-931a-06e086f400ca","width":1452.0,"x":236.0,"y":-62.0,"z":188.0,"zOrder":7,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":true,"depth":329.0,"height":1129.0,"layer":"","name":"InvisibleWall","persistentUuid":"b91a761c-9f3d-403d-b368-a132b4414a38","width":104.0,"x":1694.0,"y":-152.0,"z":80.0,"zOrder":8,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":true,"depth":329.0,"height":1129.0,"layer":"","name":"InvisibleWall","persistentUuid":"57b76580-03f9-47d1-9d10-9010547f6df7","width":104.0,"x":121.0,"y":-151.0,"z":80.0,"zOrder":8,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":true,"depth":10.0,"height":835.0,"keepRatio":true,"layer":"","name":"GuideLine","persistentUuid":"22a9e4ea-af76-43f0-8b2a-63c185eb660a","width":10.0,"x":340.0,"y":-3.0,"z":148.0,"zOrder":9,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":-1.0,"customSize":true,"depth":96.0,"height":850.0,"layer":"","name":"BoxCollision","persistentUuid":"79eae472-c3ae-4ae4-9431-9828052e0c94","width":25.0,"x":196.0,"y":-21.0,"z":345.0,"zOrder":10,"numberProperties":[],"stringProperties":[],"initialVariables":[{"name":"Owner","type":"string","value":"Knife"}]},{"angle":90.0,"customSize":true,"depth":329.0,"height":1561.0,"layer":"","name":"InvisibleWall","persistentUuid":"f3298610-2858-4592-b453-2056d7b4ffac","width":104.0,"x":891.0,"y":166.0,"z":80.0,"zOrder":8,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":90.0,"customSize":true,"depth":329.0,"height":1561.0,"layer":"","name":"InvisibleWall","persistentUuid":"73ce2703-fa28-4d09-85b4-25befa8deb04","width":104.0,"x":897.0,"y":-898.0,"z":80.0,"zOrder":8,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":false,"height":0.0,"keepRatio":true,"layer":"","name":"Pot","persistentUuid":"a6bf3793-64be-4ca4-8304-adb712afdf92","width":0.0,"x":868.0,"y":-1165.0,"z":300.0,"zOrder":11,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":-3.0,"customSize":false,"height":0.0,"keepRatio":true,"layer":"","name":"PotLed","persistentUuid":"d5b0362e-6865-420d-86bc-3ea153054353","rotationX":-74.0,"rotationY":-14.0,"width":0.0,"x":943.0,"y":1200.0,"z":-150.0,"zOrder":12,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":true,"depth":600.0,"height":85.0,"layer":"","name":"BoxCollision","persistentUuid":"e3deeea1-245f-442e-8816-e729936e0187","width":551.0,"x":963.0,"y":1248.0,"z":341.0,"zOrder":13,"numberProperties":[],"stringProperties":[],"initialVariables":[{"name":"Owner","type":"string","value":"RightPanel"}]},{"angle":0.0,"customSize":true,"depth":600.0,"height":85.0,"layer":"","name":"BoxCollision","persistentUuid":"d7e4f09a-4bca-4393-91a4-65032e02b923","width":551.0,"x":409.0,"y":1248.0,"z":341.0,"zOrder":13,"numberProperties":[],"stringProperties":[],"initialVariables":[{"name":"Owner","type":"string","value":"LeftPanel"}]}],"objects":[{"assetStoreId":"","name":"Floor","type":"Scene3D::Cube3DObject","variables":[],"effects":[],"behaviors":[{"name":"Physics3D","type":"Physics3D::Physics3DBehavior","object3D":"Object3D","bodyType":"Static","bullet":false,"fixedRotation":false,"shape":"Box","shapeOrientation":"Z","shapeDimensionA":0.0,"shapeDimensionB":0.0,"shapeDimensionC":0.0,"density":1.0,"friction":0.3,"restitution":0.1,"linearDamping":0.1,"angularDamping":0.1,"gravityScale":1.0,"layers":17.0,"masks":17.0}],"content":{"width":100.0,"height":100.0,"depth":100.0,"enableTextureTransparency":false,"facesOrientation":"Y","frontFaceResourceName":"","backFaceResourceName":"","backFaceUpThroughWhichAxisRotation":"X","leftFaceResourceName":"","rightFaceResourceName":"","topFaceResourceName":"","bottomFaceResourceName":"","frontFaceVisible":true,"backFaceVisible":false,"leftFaceVisible":true,"rightFaceVisible":true,"topFaceVisible":true,"bottomFaceVisible":true,"frontFaceResourceRepeat":false,"backFaceResourceRepeat":false,"leftFaceResourceRepeat":false,"rightFaceResourceRepeat":false,"topFaceResourceRepeat":false,"bottomFaceResourceRepeat":false,"materialType":"Basic","tint":"255;255;255"}},{"assetStoreId":"","name":"Camera","type":"Scene3D::Cube3DObject","variables":[],"effects":[],"behaviors":[],"content":{"width":100.0,"height":100.0,"depth":100.0,"enableTextureTransparency":false,"facesOrientation":"Y","frontFaceResourceName":"New3DBox2_Front2.png","backFaceResourceName":"New3DBox2_Front.png","backFaceUpThroughWhichAxisRotation":"X","leftFaceResourceName":"New3DBox2_Front.png","rightFaceResourceName":"New3DBox2_Front2.png","topFaceResourceName":"New3DBox2_Front.png","bottomFaceResourceName":"New3DBox2_Front.png","frontFaceVisible":true,"backFaceVisible":false,"leftFaceVisible":true,"rightFaceVisible":true,"topFaceVisible":true,"bottomFaceVisible":true,"frontFaceResourceRepeat":false,"backFaceResourceRepeat":false,"leftFaceResourceRepeat":false,"rightFaceResourceRepeat":false,"topFaceResourceRepeat":false,"bottomFaceResourceRepeat":false,"materialType":"Basic","tint":"255;255;255"}},{"assetStoreId":"","name":"TestPrint","type":"BBText::BBText","variables":[{"name":"ID","type":"number","value":0.0}],"effects":[],"behaviors":[],"content":{"text":"Debug Print()","opacity":255.0,"fontSize":40.0,"visible":true,"color":"0;0;0","fontFamily":"Arial","align":"left","wordWrap":true}},{"assetStoreId":"","name":"Knife","type":"Scene3D::Model3DObject","variables":[{"name":"State","type":"number","value":0.0},{"name":"Y_Speed","type":"number","value":0.0},{"name":"MaxHeight","type":"number","value":600.0},{"name":"b_Collision","type":"boolean","value":false}],"effects":[],"behaviors":[],"content":{"centerLocation":"ObjectCenter","crossfadeDuration":0.10000000149011612,"depth":1000.0,"height":1000.0,"keepAspectRatio":true,"materialType":"StandardWithoutMetalness","modelResourceName":"knife.glb","originLocation":"ObjectCenter","rotationX":0.0,"rotationY":180.0,"rotationZ":0.0,"width":1000.0,"animations":[]}},{"assetStoreId":"","name":"Kitchen","type":"Scene3D::Model3DObject","variables":[],"effects":[],"behaviors":[],"content":{"centerLocation":"ModelOrigin","crossfadeDuration":0.10000000149011612,"depth":8498.63076210022,"height":4287.891261099147,"keepAspectRatio":true,"materialType":"StandardWithoutMetalness","modelResourceName":"kitchen3.glb","originLocation":"ObjectCenter","rotationX":0.0,"rotationY":0.0,"rotationZ":0.0,"width":6006.783843040466,"animations":[]}},{"assetStoreId":"","name":"Tomato","type":"Scene3D::Model3DObject","variables":[{"name":"Direction","type":"number","value":-1.0},{"name":"bAttacking","type":"boolean","value":false},{"name":"bDied","type":"boolean","value":false},{"name":"tAtkSwitchTimer","type":"number","value":0.0},{"name":"tDirSwitchTimer","type":"number","value":0.0},{"name":"sAtkPhase","type":"number","value":0.0},{"name":"HoldTime","type":"number","value":0.0}],"effects":[],"behaviors":[{"isFolded":true,"name":"Physics3D","type":"Physics3D::Physics3DBehavior","object3D":"Object3D","bodyType":"Dynamic","bullet":false,"fixedRotation":false,"shape":"Box","shapeOrientation":"Z","shapeDimensionA":0.0,"shapeDimensionB":0.0,"shapeDimensionC":0.0,"density":1.0,"friction":0.3,"restitution":0.1,"linearDamping":0.1,"angularDamping":0.1,"gravityScale":1.0,"layers":17.0,"masks":17.0},{"isFolded":true,"name":"PhysicsCharacter3D","type":"Physics3D::PhysicsCharacter3D","physics3D":"Physics3D","jumpHeight":200.0,"jumpSustainTime":0.2,"gravity":1000.0,"fallingSpeedMax":700.0,"forwardAcceleration":1200.0,"forwardDeceleration":1200.0,"forwardSpeedMax":600.0,"sidewaysAcceleration":800.0,"sidewaysDeceleration":800.0,"sidewaysSpeedMax":400.0,"slopeMaxAngle":50.0,"stairHeightMax":20.0,"shouldBindObjectAndForwardAngle":true,"canBePushed":true}],"content":{"centerLocation":"ObjectCenter","crossfadeDuration":0.2,"depth":100.0,"height":100.0,"keepAspectRatio":true,"materialType":"StandardWithoutMetalness","modelResourceName":"tomato6.glb","originLocation":"ObjectCenter","rotationX":90.0,"rotationY":0.0,"rotationZ":90.0,"width":100.0,"animations":[{"loop":true,"name":"Idle","source":"Tomato_Idle"},{"loop":true,"name":"Run","source":"Tomato_Run"},{"loop":false,"name":"Attack","source":"Tomato_Attack"}]}},{"assetStoreId":"","name":"InvisibleWall","type":"Scene3D::Cube3DObject","variables":[],"effects":[],"behaviors":[{"name":"Physics3D","type":"Physics3D::Physics3DBehavior","object3D":"Object3D","bodyType":"Static","bullet":false,"fixedRotation":false,"shape":"Box","shapeOrientation":"Z","shapeDimensionA":0.0,"shapeDimensionB":0.0,"shapeDimensionC":0.0,"density":1.0,"friction":0.3,"restitution":0.1,"linearDamping":0.1,"angularDamping":0.1,"gravityScale":1.0,"layers":17.0,"masks":17.0}],"content":{"width":100.0,"height":100.0,"depth":100.0,"enableTextureTransparency":false,"facesOrientation":"Y","frontFaceResourceName":"InvisibleWall_Front.png","backFaceResourceName":"InvisibleWall_Front.png","backFaceUpThroughWhichAxisRotation":"X","leftFaceResourceName":"InvisibleWall_Front.png","rightFaceResourceName":"InvisibleWall_Front.png","topFaceResourceName":"InvisibleWall_Front.png","bottomFaceResourceName":"InvisibleWall_Front.png","frontFaceVisible":true,"backFaceVisible":true,"leftFaceVisible":true,"rightFaceVisible":true,"topFaceVisible":true,"bottomFaceVisible":true,"frontFaceResourceRepeat":true,"backFaceResourceRepeat":true,"leftFaceResourceRepeat":true,"rightFaceResourceRepeat":true,"topFaceResourceRepeat":true,"bottomFaceResourceRepeat":true,"materialType":"Basic","tint":"255;255;255"}},{"assetStoreId":"","name":"GuideLine","type":"Scene3D::Cube3DObject","variables":[],"effects":[],"behaviors":[],"content":{"width":10.0,"height":500.0,"depth":10.0,"enableTextureTransparency":false,"facesOrientation":"Y","frontFaceResourceName":"New3DBox_Front","backFaceResourceName":"New3DBox_Front","backFaceUpThroughWhichAxisRotation":"X","leftFaceResourceName":"New3DBox_Front","rightFaceResourceName":"New3DBox_Front","topFaceResourceName":"New3DBox_Front","bottomFaceResourceName":"New3DBox_Front","frontFaceVisible":true,"backFaceVisible":false,"leftFaceVisible":true,"rightFaceVisible":true,"topFaceVisible":true,"bottomFaceVisible":true,"frontFaceResourceRepeat":false,"backFaceResourceRepeat":false,"leftFaceResourceRepeat":false,"rightFaceResourceRepeat":false,"topFaceResourceRepeat":false,"bottomFaceResourceRepeat":false,"materialType":"Basic","tint":"255;255;255"}},{"assetStoreId":"","name":"BoxCollision","type":"Scene3D::Cube3DObject","variables":[{"name":"Owner","type":"string","value":"Null"}],"effects":[],"behaviors":[],"content":{"width":100.0,"height":100.0,"depth":100.0,"enableTextureTransparency":true,"facesOrientation":"Y","frontFaceResourceName":"New3DBox_Front2","backFaceResourceName":"New3DBox_Front2","backFaceUpThroughWhichAxisRotation":"X","leftFaceResourceName":"New3DBox_Front2","rightFaceResourceName":"New3DBox_Front2","topFaceResourceName":"New3DBox_Front2","bottomFaceResourceName":"New3DBox_Front2","frontFaceVisible":true,"backFaceVisible":true,"leftFaceVisible":true,"rightFaceVisible":true,"topFaceVisible":true,"bottomFaceVisible":true,"frontFaceResourceRepeat":false,"backFaceResourceRepeat":false,"leftFaceResourceRepeat":false,"rightFaceResourceRepeat":false,"topFaceResourceRepeat":false,"bottomFaceResourceRepeat":false,"materialType":"Basic","tint":"255;255;255"}},{"assetStoreId":"","name":"TomatoBullet","type":"Scene3D::Model3DObject","variables":[],"effects":[],"behaviors":[{"name":"Physics3D","type":"Physics3D::Physics3DBehavior","object3D":"Object3D","bodyType":"Dynamic","bullet":false,"fixedRotation":false,"shape":"Sphere","shapeOrientation":"Z","shapeDimensionA":0.0,"shapeDimensionB":0.0,"shapeDimensionC":0.0,"density":1.0,"friction":0.3,"restitution":0.1,"linearDamping":0.1,"angularDamping":0.1,"gravityScale":1.0,"layers":17.0,"masks":2.0}],"content":{"centerLocation":"ObjectCenter","crossfadeDuration":0.10000000149011612,"depth":40.0,"height":40.0,"keepAspectRatio":true,"materialType":"StandardWithoutMetalness","modelResourceName":"tomato_bullet.glb","originLocation":"ObjectCenter","rotationX":0.0,"rotationY":0.0,"rotationZ":0.0,"width":40.0,"animations":[]}},{"assetStoreId":"","name":"FakeTomato","type":"Scene3D::Model3DObject","variables":[],"effects":[],"behaviors":[{"name":"Physics3D","type":"Physics3D::Physics3DBehavior","object3D":"Object3D","bodyType":"Dynamic","bullet":false,"fixedRotation":false,"shape":"Sphere","shapeOrientation":"Z","shapeDimensionA":0.0,"shapeDimensionB":0.0,"shapeDimensionC":0.0,"density":1.0,"friction":0.3,"restitution":0.1,"linearDamping":0.1,"angularDamping":0.1,"gravityScale":1.0,"layers":17.0,"masks":17.0}],"content":{"centerLocation":"ModelOrigin","crossfadeDuration":0.10000000149011612,"depth":100.0,"height":100.0,"keepAspectRatio":true,"materialType":"StandardWithoutMetalness","modelResourceName":"fake_tomato.glb","originLocation":"ModelOrigin","rotationX":0.0,"rotationY":0.0,"rotationZ":0.0,"width":100.0,"animations":[]}},{"assetStoreId":"","name":"Pot","type":"Scene3D::Model3DObject","variables":[],"effects":[],"behaviors":[],"content":{"centerLocation":"ObjectCenter","crossfadeDuration":0.10000000149011612,"depth":1000.0,"height":1000.0,"keepAspectRatio":true,"materialType":"StandardWithoutMetalness","modelResourceName":"potglb.glb","originLocation":"ObjectCenter","rotationX":90.0,"rotationY":0.0,"rotationZ":0.0,"width":1000.0,"animations":[]}},{"assetStoreId":"","name":"PotLed","type":"Scene3D::Model3DObject","variables":[],"effects":[],"behaviors":[],"content":{"centerLocation":"ObjectCenter","crossfadeDuration":0.10000000149011612,"depth":1000.0,"height":1000.0,"keepAspectRatio":true,"materialType":"StandardWithoutMetalness","modelResourceName":"pot_led2.glb","originLocation":"ModelOrigin","rotationX":90.0,"rotationY":0.0,"rotationZ":0.0,"width":1000.0,"animations":[]}}],"objectsFolderStructure":{"folderName":"__ROOT","children":[{"folderName":"Utility","children":[{"objectName":"Camera"},{"objectName":"BoxCollision"},{"objectName":"GuideLine"},{"objectName":"InvisibleWall"}]},{"folderName":"UI","children":[{"objectName":"TestPrint"}]},{"folderName":"3D Model","children":[{"objectName":"FakeTomato"},{"objectName":"Knife"},{"objectName":"Tomato"},{"objectName":"PotLed"},{"objectName":"Pot"},{"objectName":"TomatoBullet"}]},{"folderName":"Enviorment","children":[{"objectName":"Kitchen"},{"objectName":"Floor"}]}]},"events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"DepartScene"},"parameters":[""]}],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["SpawnedTomato","+","1"]},{"type":{"value":"ChangeTimeScale"},"parameters":["","1"]}],"events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"BuiltinExternalLayouts::CreateObjectsFromExternalLayout"},"parameters":["","\"UI\"","","",""]},{"type":{"value":"Cache"},"parameters":["Camera"]},{"type":{"value":"Cache"},"parameters":["InvisibleWall"]},{"type":{"value":"Cache"},"parameters":["Floor"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"MettreXY"},"parameters":["Camera","=","909","=","1235"]},{"type":{"value":"Scene3D::Base3DBehavior::SetZ"},"parameters":["Camera","Object3D","=","480"]},{"type":{"value":"Scene3D::SetCameraFov"},"parameters":["","=","69","",""]},{"type":{"value":"Scene3D::Base3DBehavior::SetRotationY"},"parameters":["Camera","Object3D","=","13"]},{"type":{"value":"ResetTimer"},"parameters":["","\"TomatoSpawnRate\""]}]}]},{"type":"BuiltinCommonInstructions::Link","include":{"includeConfig":0},"target":"KnifeControl"},{"type":"BuiltinCommonInstructions::Link","include":{"includeConfig":0},"target":"TomatoAI"},{"type":"BuiltinCommonInstructions::Link","include":{"includeConfig":0},"target":"TomatoBullet"},{"colorB":228,"colorG":176,"colorR":74,"creationTime":0,"name":"Debug","source":"","type":"BuiltinCommonInstructions::Group","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"SystemInfo::IsPreview"},"parameters":[""]}],"actions":[],"events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberObjectVariable"},"parameters":["TestPrint","ID","=","0"]}],"actions":[],"events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"BBText::SetBBText"},"parameters":["TestPrint","=","\"Tomato in stage: \"+ToString(SceneInstancesCount(Tomato))"]}]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberObjectVariable"},"parameters":["TestPrint","ID","=","1"]}],"actions":[],"events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"BBText::SetBBText"},"parameters":["TestPrint","=","\"Tomato Count: \"+SpawnedTomato"]}]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"CompareTimer"},"parameters":["","\"TomatoSpawnRate\"",">","1"]},{"type":{"value":"NumberVariable"},"parameters":["SpawnedTomato","<","10"]}],"actions":[{"type":{"value":"ResetTimer"},"parameters":["","\"TomatoSpawnRate\""]},{"type":{"value":"Create"},"parameters":["","Tomato","1190","347",""]},{"type":{"value":"Scene3D::Base3DBehavior::SetZ"},"parameters":["Tomato","Object3D","=","249"]},{"type":{"value":"SetNumberVariable"},"parameters":["SpawnedTomato","+","1"]},{"type":{"value":"SetNumberObjectVariable"},"parameters":["Tomato","tAtkSwitchTimer","=","RandomFloat(2)"]}]}]}],"parameters":[]},{"colorB":228,"colorG":176,"colorR":74,"creationTime":0,"disabled":true,"folded":true,"name":"Test Control","source":"","type":"BuiltinCommonInstructions::Group","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"KeyFromTextPressed"},"parameters":["","\"w\""]}],"actions":[{"type":{"value":"SetCenterY"},"parameters":["Camera","+","-5"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"KeyFromTextPressed"},"parameters":["","\"s\""]}],"actions":[{"type":{"value":"SetCenterY"},"parameters":["Camera","+","5"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"KeyFromTextPressed"},"parameters":["","\"a\""]}],"actions":[{"type":{"value":"Scene3D::Base3DBehavior::SetZ"},"parameters":["Camera","Object3D","+","5"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"KeyFromTextPressed"},"parameters":["","\"d\""]}],"actions":[{"type":{"value":"Scene3D::Base3DBehavior::SetZ"},"parameters":["Camera","Object3D","+","-5"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"KeyFromTextPressed"},"parameters":["","\"z\""]}],"actions":[{"type":{"value":"Scene3D::Base3DBehavior::SetRotationY"},"parameters":["Camera","Object3D","+","1"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"KeyFromTextPressed"},"parameters":["","\"x\""]}],"actions":[{"type":{"value":"Scene3D::Base3DBehavior::SetRotationY"},"parameters":["Camera","Object3D","+","-1"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"KeyFromTextPressed"},"parameters":["","\"c\""]}],"actions":[{"type":{"value":"Scene3D::SetCameraFov"},"parameters":["","+","1","",""]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"KeyFromTextPressed"},"parameters":["","\"v\""]}],"actions":[{"type":{"value":"Scene3D::SetCameraFov"},"parameters":["","+","-1","",""]}]}],"parameters":[]},{"colorB":228,"colorG":176,"colorR":74,"creationTime":0,"folded":true,"name":"Camera","source":"","type":"BuiltinCommonInstructions::Group","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"FirstPersonCamera::LookFrom3DObjectEyes"},"parameters":["","Camera","Object3D","",""]}]}],"parameters":[]}],"layers":[{"ambientLightColorB":200,"ambientLightColorG":200,"ambientLightColorR":200,"camera3DFarPlaneDistance":10000.0,"camera3DFieldOfView":45.0,"camera3DNearPlaneDistance":3.0,"cameraType":"","followBaseLayerCamera":false,"isLightingLayer":false,"isLocked":false,"name":"","renderingType":"","visibility":true,"cameras":[{"defaultSize":true,"defaultViewport":true,"height":0.0,"viewportBottom":1.0,"viewportLeft":0.0,"viewportRight":1.0,"viewportTop":0.0,"width":0.0}],"effects":[{"effectType":"Scene3D::HemisphereLight","name":"3D Light","doubleParameters":{"elevation":45.0,"intensity":1.0,"rotation":0.0},"stringParameters":{"groundColor":"64;64;64","skyColor":"255;255;255","top":"Y-"},"booleanParameters":{}}]},{"ambientLightColorB":200,"ambientLightColorG":200,"ambientLightColorR":200,"camera3DFarPlaneDistance":10000.0,"camera3DFieldOfView":45.0,"camera3DNearPlaneDistance":3.0,"cameraType":"","followBaseLayerCamera":false,"isLightingLayer":false,"isLocked":false,"name":"UI","renderingType":"","visibility":true,"cameras":[],"effects":[{"effectType":"Scene3D::HemisphereLight","name":"3D Light","doubleParameters":{"elevation":45.0,"intensity":1.0,"rotation":0.0},"stringParameters":{"groundColor":"64;64;64","skyColor":"255;255;255","top":"Y-"},"booleanParameters":{}}]}],"behaviorsSharedData":[{"name":"Animation","type":"AnimatableCapability::AnimatableBehavior"},{"name":"Effect","type":"EffectCapability::EffectBehavior"},{"name":"Flippable","type":"FlippableCapability::FlippableBehavior"},{"name":"Object3D","type":"Scene3D::Base3DBehavior"},{"name":"Opacity","type":"OpacityCapability::OpacityBehavior"},{"name":"Physics3D","type":"Physics3D::Physics3DBehavior","gravityX":0.0,"gravityY":0.0,"gravityZ":-9.8,"worldScale":100.0},{"name":"PhysicsCharacter3D","type":"Physics3D::PhysicsCharacter3D"},{"name":"Resizable","type":"ResizableCapability::ResizableBehavior"},{"name":"Scale","type":"ScalableCapability::ScalableBehavior"}]}],"externalEvents":[{"associatedLayout":"MainScene","name":"TomatoAI","events":[{"type":"BuiltinCommonInstructions::ForEach","object":"Tomato","conditions":[],"actions":[],"events":[{"colorB":228,"colorG":176,"colorR":74,"creationTime":0,"name":"Timers","source":"","type":"BuiltinCommonInstructions::Group","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetNumberObjectVariable"},"parameters":["Tomato","tAtkSwitchTimer","+","TimeDelta()"]},{"type":{"value":"SetNumberObjectVariable"},"parameters":["Tomato","tDirSwitchTimer","+","TimeDelta()"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberObjectVariable"},"parameters":["Tomato","tDirSwitchTimer",">","1"]}],"actions":[{"type":{"value":"SetNumberObjectVariable"},"parameters":["Tomato","Direction","=","Random(1) * 2 - 1"]},{"type":{"value":"SetNumberObjectVariable"},"parameters":["Tomato","tDirSwitchTimer","=","0"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberObjectVariable"},"parameters":["Tomato","tAtkSwitchTimer",">","3"]},{"type":{"value":"BooleanObjectVariable"},"parameters":["Tomato","bAttacking","=",""]}],"actions":[{"type":{"value":"SetNumberObjectVariable"},"parameters":["Tomato","tAtkSwitchTimer","=","0"]}],"events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"BuiltinCommonInstructions::CompareNumbers"},"parameters":["RandomFloat(100)","<","50 - SpawnedTomato + 1"]}],"actions":[{"type":{"value":"SetBooleanObjectVariable"},"parameters":["Tomato","bAttacking","True","Random(1) * 2 - 1"]}]}]}],"parameters":[]},{"colorB":228,"colorG":176,"colorR":74,"creationTime":0,"folded":true,"name":"Limit Movement","source":"","type":"BuiltinCommonInstructions::Group","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"PosX"},"parameters":["Tomato","<","400"]}],"actions":[{"type":{"value":"SetNumberObjectVariable"},"parameters":["Tomato","Direction","=","-1"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"PosY"},"parameters":["Tomato",">","800"]}],"actions":[{"type":{"value":"SetNumberObjectVariable"},"parameters":["Tomato","Direction","=","2"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"PosX"},"parameters":["Tomato",">","1600"]}],"actions":[{"type":{"value":"SetNumberObjectVariable"},"parameters":["Tomato","Direction","=","1"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"PosY"},"parameters":["Tomato","<","0"]}],"actions":[{"type":{"value":"SetNumberObjectVariable"},"parameters":["Tomato","Direction","=","3"]}]}],"parameters":[]},{"colorB":228,"colorG":176,"colorR":74,"creationTime":0,"name":"Move / Attack / Dodge","source":"","type":"BuiltinCommonInstructions::Group","events":[{"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Move"},{"folded":true,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"BooleanObjectVariable"},"parameters":["Tomato","bAttacking","=",""]},{"type":{"value":"NumberObjectVariable"},"parameters":["Tomato","sAtkPhase","=","0"]}],"actions":[{"type":{"value":"AnimatableCapability::AnimatableBehavior::SetSpeedScale"},"parameters":["Tomato","Animation","=","1.5"]},{"type":{"value":"AnimatableCapability::AnimatableBehavior::SetName"},"parameters":["Tomato","Animation","=","\"Run\""]},{"type":{"value":"Physics3D::PhysicsCharacter3D::SimulateForwardKey"},"parameters":["Tomato","PhysicsCharacter3D"]}],"events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberObjectVariable"},"parameters":["Tomato","Direction","=","-1"]}],"actions":[{"type":{"value":"RotateTowardAngle"},"parameters":["Tomato","0","700",""]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberObjectVariable"},"parameters":["Tomato","Direction","=","1"]}],"actions":[{"type":{"value":"RotateTowardAngle"},"parameters":["Tomato","180","700",""]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberObjectVariable"},"parameters":["Tomato","Direction","=","2"]}],"actions":[{"type":{"value":"RotateTowardAngle"},"parameters":["Tomato","-90","700",""]},{"type":{"value":"Wait"},"parameters":["0.5"]},{"type":{"value":"SetNumberObjectVariable"},"parameters":["Tomato","Direction","=","Random(1) * 2 - 1"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberObjectVariable"},"parameters":["Tomato","Direction","=","3"]}],"actions":[{"type":{"value":"RotateTowardAngle"},"parameters":["Tomato","90","700",""]},{"type":{"value":"Wait"},"parameters":["0.5"]},{"type":{"value":"SetNumberObjectVariable"},"parameters":["Tomato","Direction","=","Random(1) * 2 - 1"]}]}]},{"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Attack"},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"BooleanObjectVariable"},"parameters":["Tomato","bAttacking","True",""]}],"actions":[{"type":{"value":"SetBooleanObjectVariable"},"parameters":["Tomato","bAttacking","False","Random(1) * 2 - 1"]},{"type":{"value":"SetNumberObjectVariable"},"parameters":["Tomato","sAtkPhase","=","1"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberObjectVariable"},"parameters":["Tomato","sAtkPhase","=","1"]}],"actions":[{"type":{"value":"RotateTowardPosition"},"parameters":["Tomato","Camera.CenterX()","Camera.CenterY()","700",""]},{"type":{"value":"AnimatableCapability::AnimatableBehavior::SetName"},"parameters":["Tomato","Animation","=","\"Attack\""]},{"type":{"value":"SetNumberObjectVariable"},"parameters":["Tomato","HoldTime","+","TimeDelta()"]}],"events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberObjectVariable"},"parameters":["Tomato","HoldTime",">","0.3"]}],"actions":[{"type":{"value":"Create"},"parameters":["TomatoBullet","TomatoBullet","Tomato.CenterX()-50","Tomato.CenterY()",""]},{"type":{"value":"Scene3D::Base3DBehavior::SetZ"},"parameters":["TomatoBullet","Object3D","=","Tomato.Object3D::Z()+50"]},{"type":{"value":"Physics3D::Physics3DBehavior::ApplyTorque"},"parameters":["TomatoBullet","Physics3D","Random(5)","Random(5)","Random(5)"]},{"type":{"value":"Physics3D::Physics3DBehavior::ApplyForceAtCenter"},"parameters":["TomatoBullet","Physics3D","(Camera.CenterX()+50 - Tomato.CenterX())/50","(Camera.CenterY() - Tomato.CenterY())/50","9.5"]},{"type":{"value":"SetNumberObjectVariable"},"parameters":["Tomato","sAtkPhase","=","2"]},{"type":{"value":"SetNumberObjectVariable"},"parameters":["Tomato","HoldTime","=","0"]}]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberObjectVariable"},"parameters":["Tomato","sAtkPhase","=","2"]}],"actions":[{"type":{"value":"Wait"},"parameters":["Tomato.Animation::Duration() - 0.3"]},{"type":{"value":"SetNumberObjectVariable"},"parameters":["Tomato","sAtkPhase","=","0"]}]},{"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Dodge"},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"BuiltinCommonInstructions::CompareNumbers"},"parameters":["abs(Tomato.X() - Knife.X())","<","30"]},{"type":{"value":"BuiltinCommonInstructions::CompareNumbers"},"parameters":["Random(100)","<","15"]},{"type":{"value":"NumberObjectVariable"},"parameters":["Knife","State","=","1"]}],"actions":[{"type":{"value":"Physics3D::PhysicsCharacter3D::SetForwardSpeedMax"},"parameters":["Tomato","PhysicsCharacter3D","=","600*3"]},{"type":{"value":"Wait"},"parameters":["0.2"]},{"type":{"value":"Physics3D::PhysicsCharacter3D::SetForwardSpeedMax"},"parameters":["Tomato","PhysicsCharacter3D","=","600"]}]}],"parameters":[]},{"colorB":228,"colorG":176,"colorR":74,"creationTime":0,"folded":true,"name":"Death","source":"","type":"BuiltinCommonInstructions::Group","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Collision3D::AreInCollision"},"parameters":["","Tomato","Object3D","BoxCollision","Object3D","",""]},{"type":{"value":"StringObjectVariable"},"parameters":["BoxCollision","Owner","=","\"Knife\""]},{"type":{"value":"BooleanObjectVariable"},"parameters":["Knife","b_Collision","True",""]},{"type":{"value":"BuiltinCommonInstructions::Once"},"parameters":[]}],"actions":[{"type":{"value":"SetBooleanObjectVariable"},"parameters":["Tomato","bDied","True",""]},{"type":{"value":"SetNumberVariable"},"parameters":["SpawnedTomato","-","1"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"BooleanObjectVariable"},"parameters":["Tomato","bDied","True",""]},{"type":{"value":"BuiltinCommonInstructions::Once"},"parameters":[]}],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["TomatoKilled","+","1"]},{"type":{"value":"Delete"},"parameters":["Tomato",""]}]}],"parameters":[]}]}]},{"associatedLayout":"MainScene","name":"KnifeControl","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"DepartScene"},"parameters":[""]}],"actions":[{"type":{"value":"Cache"},"parameters":["BoxCollision"]}]},{"disabled":true,"folded":true,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":true,"value":"SystemInfo::IsMobile"},"parameters":[]}],"actions":[{"type":{"value":"MettreX"},"parameters":["Knife","=","CursorX_for_knife + sin(TimeFromStart()*2)*10"]}],"events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"MouseButtonFromTextReleased"},"parameters":["","\"Left\""]},{"type":{"inverted":true,"value":"MousePointerLock::isPointerLocked"},"parameters":["",""]}],"actions":[{"type":{"value":"MousePointerLock::RequestPointerLock"},"parameters":["",""]}]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["CursorX_for_knife","=","clamp((CursorX(\"UI\",0)/SceneWindowWidth())*1920, 0, 1920) - Knife.Width()/2"]}],"events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"StringObjectVariable"},"parameters":["BoxCollision","Owner","=","\"Knife\""]}],"actions":[{"type":{"value":"MettreX"},"parameters":["BoxCollision","=","Knife.X()-BoxCollision.Width()/2"]},{"type":{"value":"Scene3D::Base3DBehavior::SetZ"},"parameters":["BoxCollision","Object3D","=","Knife.Object3D::CenterZ() - BoxCollision.Object3D::Depth()/2 - 10"]}]}]},{"folded":true,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"MouseButtonFromTextPressed"},"parameters":["","\"Left\""]}],"actions":[],"events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberObjectVariable"},"parameters":["Knife","State","=","0"]}],"actions":[{"type":{"value":"SetNumberObjectVariable"},"parameters":["Knife","State","=","1"]},{"type":{"value":"Scene3D::Base3DBehavior::SetZ"},"parameters":["Knife","Object3D","=","Knife.MaxHeight"]}]}]},{"folded":true,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberObjectVariable"},"parameters":["Knife","State","=","0"]}],"actions":[{"type":{"value":"MettreX"},"parameters":["Knife","=","Knife.X() + (CursorX_for_knife - Knife.X()) * 0.25 + sin(TimeFromStart()*2)*2"]},{"type":{"value":"Scene3D::Base3DBehavior::SetZ"},"parameters":["Knife","Object3D","=","Knife.MaxHeight + sin(TimeFromStart()*3) * 10"]},{"type":{"value":"MettreX"},"parameters":["GuideLine","=","Knife.X()-GuideLine.Width()/2"]}],"events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"PosX"},"parameters":["Knife","<=","0"]}],"actions":[{"type":{"value":"MettreX"},"parameters":["Knife","=","0"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"PosX"},"parameters":["Knife",">=","1920"]}],"actions":[{"type":{"value":"MettreX"},"parameters":["Knife","=","1920"]}]}]},{"folded":true,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberObjectVariable"},"parameters":["Knife","State","=","1"]}],"actions":[{"type":{"value":"SetNumberObjectVariable"},"parameters":["Knife","Y_Speed","+","-8000*TimeDelta()"]},{"type":{"value":"Scene3D::Base3DBehavior::SetZ"},"parameters":["Knife","Object3D","+","Knife.Y_Speed*TimeDelta()"]}],"events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Scene3D::Base3DBehavior::Z"},"parameters":["Knife","Object3D","<=","Floor.Object3D::CenterZ()+20"]}],"actions":[{"type":{"value":"SetNumberObjectVariable"},"parameters":["Knife","State","=","2"]},{"type":{"value":"SetNumberObjectVariable"},"parameters":["Knife","Y_Speed","=","0"]}]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberObjectVariable"},"parameters":["Knife","State","=","2"]}],"actions":[{"type":{"value":"CameraShake3D::ShakeCamera"},"parameters":["","0.15","0","0.15",""]},{"type":{"value":"SetBooleanObjectVariable"},"parameters":["Knife","b_Collision","True","3"]},{"type":{"value":"Wait"},"parameters":["0.1"]},{"type":{"value":"SetBooleanObjectVariable"},"parameters":["Knife","b_Collision","False","3"]},{"type":{"value":"Wait"},"parameters":["0.1"]},{"type":{"value":"SetNumberObjectVariable"},"parameters":["Knife","State","=","3"]}]},{"folded":true,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberObjectVariable"},"parameters":["Knife","State","=","3"]}],"actions":[{"type":{"value":"SetNumberObjectVariable"},"parameters":["Knife","Y_Speed","+","750*TimeDelta()"]},{"type":{"value":"Scene3D::Base3DBehavior::SetZ"},"parameters":["Knife","Object3D","+","Knife.Y_Speed*TimeDelta()"]}],"events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Scene3D::Base3DBehavior::Z"},"parameters":["Knife","Object3D",">=","Knife.MaxHeight"]}],"actions":[{"type":{"value":"Scene3D::Base3DBehavior::SetZ"},"parameters":["Knife","Object3D","=","Knife.MaxHeight"]},{"type":{"value":"SetNumberObjectVariable"},"parameters":["Knife","Y_Speed","=","0"]},{"type":{"value":"SetNumberObjectVariable"},"parameters":["Knife","State","=","0"]}]}]}]},{"associatedLayout":"MainScene","name":"TomatoBullet","events":[{"type":"BuiltinCommonInstructions::ForEach","object":"TomatoBullet","conditions":[],"actions":[],"events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"BuiltinCommonInstructions::Or"},"parameters":[],"subInstructions":[{"type":{"value":"Scene3D::Base3DBehavior::Z"},"parameters":["TomatoBullet","Object3D","<","0"]},{"type":{"value":"PosY"},"parameters":["TomatoBullet",">","1400"]}]}],"actions":[{"type":{"value":"Delete"},"parameters":["TomatoBullet",""]}]},{"type":"BuiltinCommonInstructions::ForEach","object":"TomatoBullet","conditions":[{"type":{"value":"Collision3D::AreInCollision"},"parameters":["","TomatoBullet","Object3D","BoxCollision","Object3D","",""]}],"actions":[],"events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"StringObjectVariable"},"parameters":["BoxCollision","Owner","=","\"LeftPanel\""]}],"actions":[{"type":{"value":"Delete"},"parameters":["TomatoBullet",""]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"StringObjectVariable"},"parameters":["BoxCollision","Owner","=","\"RightPanel\""]}],"actions":[{"type":{"value":"Delete"},"parameters":["TomatoBullet",""]}]}]}]}]}],"eventsFunctionsExtensions":[{"author":"","category":"General","extensionNamespace":"","fullName":"3D raycast","gdevelopVersion":">=5.5.222","helpPath":"","iconUrl":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0ibWRpLXJheS1zdGFydC1hcnJvdyIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIGQ9Ik0yMywxMkwxOSwxNlYxM0g2LjgzQzYuNDIsMTQuMTcgNS4zMSwxNSA0LDE1QTMsMyAwIDAsMSAxLDEyQTMsMyAwIDAsMSA0LDlDNS4zMSw5IDYuNDIsOS44MyA2LjgzLDExSDE5VjhMMjMsMTJaIiAvPjwvc3ZnPg==","name":"Raycaster3D","previewIconUrl":"https://asset-resources.gdevelop.io/public-resources/Icons/8419f46b76bce482c14b4c03b4141a64d457e4cdc92686f3470381f5d2694abd_ray-start-arrow.svg","shortDescription":"Find 3D objects that cross a line.","version":"0.1.5","description":["It can be useful to:","- Find 3D objects under the pointer","- Target objects from a 1st person view","- Make AI that detect objects in their field of view"],"origin":{"identifier":"Raycaster3D","name":"gdevelop-extension-store"},"tags":["3d","recast","collision"],"authorIds":["IWykYNRvhCZBN3vEgKEbBPOR3Oc2"],"dependencies":[],"globalVariables":[],"sceneVariables":[],"eventsFunctions":[{"fullName":"","functionType":"Action","name":"onFirstSceneLoaded","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"Raycaster3D::DefineHelperClasses"},"parameters":["",""]}]}],"parameters":[],"objectGroups":[]},{"description":"Define helper classes JavaScript code.","fullName":"Define helper classes","functionType":"Action","name":"DefineHelperClasses","private":true,"sentence":"Define helper classes JavaScript code","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"GlobalVariableAsBoolean"},"parameters":["_Raycaster3DExtension_ClassesDefined",""]}],"actions":[{"type":{"value":"SetGlobalVariableAsBoolean"},"parameters":["_Raycaster3DExtension_ClassesDefined","True"]}],"events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["gdjs.__raycaster3DExtension = gdjs.__raycaster3DExtension || {};","","class Raycaster {","    raycaster = new THREE.Raycaster();","    pointer = new THREE.Vector2();","    raycastResults = [];","    lastDistance = 0;","    lastPositionX = 0;","    lastPositionY = 0;","    lastPositionZ = 0;","    lastNormalX = 0;","    lastNormalY = 0;","    lastNormalZ = 0;","","    /**","     * @param objectsLists {Hashtable<gdjs.RuntimeObject[]>}","     * @param objects {gdjs.RuntimeObject[]}","     * @param pointerX {number}","     * @param pointerY {number}","     * @param distanceMax {number}","     */","    recastFromCamera(objectsLists, objects, pointerX, pointerY, distanceMax) {","        if (objects.length === 0) {","            return false;","        }","        const object = objects[0];","        const layer = object.getInstanceContainer().getLayer(object.getLayer());","        const camera = layer.getRenderer().getThreeCamera();","","        const raycaster = this.raycaster;","        const pointer = this.pointer;","        pointer.x = -1 + 2 * pointerX;","        pointer.y = 1 - 2 * pointerY;","        raycaster.setFromCamera(pointer, camera);","        raycaster.far = distanceMax;","","        return this._doRecast(objectsLists, objects);","    }","","    /**","     * @param objectsLists {Hashtable<gdjs.RuntimeObject[]>}","     * @param objects {gdjs.RuntimeObject[]}","     * @param originX {number}","     * @param originY {number}","     * @param originZ {number}","     * @param rotationAngle {number}","     * @param elevationAngle {number}","     * @param distanceMax {number}","     */","    recastWithAngle(","        objectsLists,","        objects,","        originX,","        originY,","        originZ,","        rotationAngle,","        elevationAngle,","        distanceMax","    ) {","        if (objects.length === 0) {","            return false;","        }","        const raycaster = this.raycaster;","        raycaster.ray.origin.set(","            originX,","            -originY,","            originZ,","        );","        const rotation = rotationAngle * Math.PI / 180;","        const elevation = elevationAngle * Math.PI / 180;","        const cosElevation = Math.cos(elevation);","        raycaster.ray.direction.set(","            Math.cos(rotation) * cosElevation,","            -Math.sin(rotation) * cosElevation,","            Math.sin(elevation),","        );","        raycaster.far = distanceMax;","","        return this._doRecast(objectsLists, objects);","    }","","    /**","     * @param objectsLists {Hashtable<gdjs.RuntimeObject[]>}","     * @param objects {gdjs.RuntimeObject[]}","     * @param originX {number}","     * @param originY {number}","     * @param originZ {number}","     * @param targetX {number}","     * @param targetY {number}","     * @param targetZ {number}","     * @param distanceMax {number}","     */","    recastBetweenPosition(","        objectsLists,","        objects,","        originX,","        originY,","        originZ,","        targetX,","        targetY,","        targetZ","    ) {","        if (objects.length === 0) {","            return false;","        }","        const raycaster = this.raycaster;","        raycaster.ray.origin.set(","            originX,","            -originY,","            originZ,","        );","        const deltaX = targetX - originX;","        const deltaY = targetY - originY;","        const deltaZ = targetZ - originZ;","        const deltaLength = Math.hypot(deltaX, deltaY, deltaZ);","        raycaster.ray.direction.set(","            deltaX / deltaLength,","            -deltaY / deltaLength,","            deltaZ / deltaLength,","        );","        raycaster.far = deltaLength;","","        return this._doRecast(objectsLists, objects);","    }","","    /**","     * @param objectsLists {Hashtable<gdjs.RuntimeObject[]>}","     * @param objects {gdjs.RuntimeObject[]}","     */","    _doRecast(objectsLists, objects) {","        const raycastResults = this.raycastResults;","        let distanceMin = Number.MAX_VALUE;","        let nearestObject = null;","        for (const object of objects) {","            raycastResults.length = 0;","            const threeObject = object.get3DRendererObject();","            if (!threeObject) {","                continue;","            }","            this.raycaster.intersectObject(threeObject, true, raycastResults);","            if (raycastResults.length > 0 && raycastResults[0].distance < distanceMin) {","                const raycastResult = raycastResults[0];","                distanceMin = raycastResult.distance;","                nearestObject = object;","                this.lastDistance = raycastResult.distance;","                this.lastPositionX = raycastResult.point.x;","                this.lastPositionY = -raycastResult.point.y;","                this.lastPositionZ = raycastResult.point.z;","                this.lastNormalX = raycastResult.normal.x;","                this.lastNormalY = raycastResult.normal.y;","                this.lastNormalZ = raycastResult.normal.z;","            }","        }","        if (!nearestObject) {","            return false;","        }","        raycastResults.length = 0;","        gdjs.evtTools.object.pickOnly(","            objectsLists,","            nearestObject","        );","        return true;","    }","}","","gdjs.__raycaster3DExtension.Raycaster = Raycaster;","gdjs.__raycaster3DExtension.raycaster = new Raycaster();",""],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}]}],"parameters":[],"objectGroups":[]},{"description":"Sends a ray from the given source position and angle, intersecting the closest object. The intersected object will become the only one taken into account.","fullName":"Raycast","functionType":"Condition","group":"Collision","name":"RaycastWithAngle","sentence":"Cast a ray from _PARAM2_; _PARAM3_; _PARAM4_ toward a rotation of _PARAM5_, an elevation of _PARAM6_ and max distance of _PARAM7_ against _PARAM1_","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["eventsFunctionContext.returnValue =","    gdjs.__raycaster3DExtension.raycaster.recastWithAngle(","        eventsFunctionContext.getObjectsLists(\"Object\"),","        objects,","        eventsFunctionContext.getArgument(\"OriginX\"),","        eventsFunctionContext.getArgument(\"OriginY\"),","        eventsFunctionContext.getArgument(\"OriginZ\"),","        eventsFunctionContext.getArgument(\"RotationAngle\"),","        eventsFunctionContext.getArgument(\"ElevationAngle\"),","        eventsFunctionContext.getArgument(\"DistanceMax\")","    );",""],"parameterObjects":"Object","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"description":"Objects to test against the ray","name":"Object","type":"objectList"},{"description":"Ray source X position","name":"OriginX","type":"expression"},{"description":"Ray source Y position","name":"OriginY","type":"expression"},{"description":"Ray source Z position","name":"OriginZ","type":"expression"},{"description":"Rotation angle (in degrees)","name":"RotationAngle","type":"expression"},{"description":"Elevation angle (in degrees)","name":"ElevationAngle","type":"expression"},{"description":"Ray maximum distance (in pixels)","name":"DistanceMax","type":"expression"}],"objectGroups":[]},{"description":"Sends a ray from the given source position to the final point, intersecting the closest object. The intersected object will become the only one taken into account.","fullName":"Raycast to a position","functionType":"Condition","group":"Collision","name":"RaycastBetweenPosition","sentence":"Cast a ray from _PARAM2_; _PARAM3_; _PARAM4_ to _PARAM5_; _PARAM6_; _PARAM7_ against _PARAM1_","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["eventsFunctionContext.returnValue =","    gdjs.__raycaster3DExtension.raycaster.recastBetweenPosition(","        eventsFunctionContext.getObjectsLists(\"Object\"),","        objects,","        eventsFunctionContext.getArgument(\"OriginX\"),","        eventsFunctionContext.getArgument(\"OriginY\"),","        eventsFunctionContext.getArgument(\"OriginZ\"),","        eventsFunctionContext.getArgument(\"TargetX\"),","        eventsFunctionContext.getArgument(\"TargetY\"),","        eventsFunctionContext.getArgument(\"TargetZ\")","    );",""],"parameterObjects":"Object","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"description":"Objects to test against the ray","name":"Object","type":"objectList"},{"description":"Ray source X position","name":"OriginX","type":"expression"},{"description":"Ray source Y position","name":"OriginY","type":"expression"},{"description":"Ray source Z position","name":"OriginZ","type":"expression"},{"description":"Ray target X position","name":"TargetX","type":"expression"},{"description":"Ray target Y position","name":"TargetY","type":"expression"},{"description":"Ray target Z position","name":"TargetZ","type":"expression"}],"objectGroups":[]},{"description":"Sends a ray from the center of the camera, intersecting the closest object. The intersected object will become the only one taken into account.","fullName":"Raycast from camera center","functionType":"Condition","group":"Collision","name":"RaycastFromCameraCenter","sentence":"Cast a ray from the camera center to a maximum distance of _PARAM2_ against _PARAM1_","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["eventsFunctionContext.returnValue =","    gdjs.__raycaster3DExtension.raycaster.recastFromCamera(","        eventsFunctionContext.getObjectsLists(\"Object\"),","        objects,","        0.5,","        0.5,","        eventsFunctionContext.getArgument(\"DistanceMax\")","    );",""],"parameterObjects":"Object","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"description":"Objects to test against the ray","name":"Object","type":"objectList"},{"description":"Ray maximum distance (in pixels)","name":"DistanceMax","type":"expression"}],"objectGroups":[]},{"description":"Sends a ray from the given source point on the camera screen, intersecting the closest object. The intersected object will become the only one taken into account.","fullName":"Raycast from a camera point","functionType":"Condition","group":"Collision","name":"RaycastFromCameraPoint","sentence":"Cast a ray from the camera point _PARAM2_; _PARAM3_ to a maximum distance of _PARAM4_ against _PARAM1_","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["eventsFunctionContext.returnValue =","    gdjs.__raycaster3DExtension.raycaster.recastFromCamera(","        eventsFunctionContext.getObjectsLists(\"Object\"),","        objects,","        eventsFunctionContext.getArgument(\"PointerX\"),","        eventsFunctionContext.getArgument(\"PointerY\"),","        eventsFunctionContext.getArgument(\"DistanceMax\")","    );",""],"parameterObjects":"Object","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"description":"Objects to test against the ray","name":"Object","type":"objectList"},{"description":"X position on the screen (from 0 to 1)","name":"PointerX","type":"expression"},{"description":"Y position on the screen (from 0 to 1)","name":"PointerY","type":"expression"},{"description":"Ray maximum distance (in pixels)","name":"DistanceMax","type":"expression"}],"objectGroups":[]},{"description":"Sends a ray from the cursor on the camera screen, intersecting the closest object. The intersected object will become the only one taken into account.","fullName":"Raycast from cursor","functionType":"Condition","group":"Collision","name":"RaycastFromCameraCursor","sentence":"Cast a ray from the cursor on 2D layer: _PARAM2_ to a maximum distance of _PARAM3_ against _PARAM1_","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const { camera, input } = gdjs.evtTools;","","const layer2D = eventsFunctionContext.getArgument(\"Layer2D\");","","const cameraMinX = camera.getCameraBorderLeft(runtimeScene, layer2D, 0);","const cameraMaxX = camera.getCameraBorderRight(runtimeScene, layer2D, 0);","const cameraMinY = camera.getCameraBorderTop(runtimeScene, layer2D, 0);","const cameraMaxY = camera.getCameraBorderBottom(runtimeScene, layer2D, 0);","","const cursorX = input.getCursorX(runtimeScene, layer2D, 0);","const cursorY = input.getCursorY(runtimeScene, layer2D, 0);","","eventsFunctionContext.returnValue =","    gdjs.__raycaster3DExtension.raycaster.recastFromCamera(","        eventsFunctionContext.getObjectsLists(\"Object\"),","        objects,","        (cursorX - cameraMinX) / (cameraMaxX - cameraMinX),","        (cursorY - cameraMinY) / (cameraMaxY - cameraMinY),","        eventsFunctionContext.getArgument(\"DistanceMax\")","    );",""],"parameterObjects":"Object","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"description":"Objects to test against the ray","name":"Object","type":"objectList"},{"description":"2D layer","name":"Layer2D","type":"layer"},{"description":"Ray maximum distance (in pixels)","name":"DistanceMax","type":"expression"}],"objectGroups":[]},{"description":"the last recast intersection distance.","fullName":"Last recast distance","functionType":"ExpressionAndCondition","name":"Distance","sentence":"the last recast intersection distance","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":"eventsFunctionContext.returnValue = gdjs.__raycaster3DExtension.raycaster.lastDistance;","parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[],"objectGroups":[]},{"description":"Return the last recast intersection position on X axis.","fullName":"Last recast X intersection","functionType":"Expression","name":"IntersectionX","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":"eventsFunctionContext.returnValue = gdjs.__raycaster3DExtension.raycaster.lastPositionX;","parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[],"objectGroups":[]},{"description":"Return the last recast intersection position on Y axis.","fullName":"Last recast Y intersection","functionType":"Expression","name":"IntersectionY","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":"eventsFunctionContext.returnValue = gdjs.__raycaster3DExtension.raycaster.lastPositionY;","parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[],"objectGroups":[]},{"description":"Return the last recast intersection position on Z axis.","fullName":"Last recast Z intersection","functionType":"Expression","name":"IntersectionZ","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":"eventsFunctionContext.returnValue = gdjs.__raycaster3DExtension.raycaster.lastPositionZ;","parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[],"objectGroups":[]},{"description":"Return the last recast intersection normal on X axis.","fullName":"Last recast X normal","functionType":"Expression","name":"NormalX","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":"eventsFunctionContext.returnValue = gdjs.__raycaster3DExtension.raycaster.lastNormalX;","parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[],"objectGroups":[]},{"description":"Return the last recast intersection normal on X axis.","fullName":"Last recast X normal","functionType":"Expression","name":"NormalY","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":"eventsFunctionContext.returnValue = gdjs.__raycaster3DExtension.raycaster.lastNormalY;","parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[],"objectGroups":[]},{"description":"Return the last recast intersection normal on Z axis.","fullName":"Last recast Z normal","functionType":"Expression","name":"NormalZ","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":"eventsFunctionContext.returnValue = gdjs.__raycaster3DExtension.raycaster.lastNormalZ;","parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[],"objectGroups":[]}],"eventsBasedBehaviors":[],"eventsBasedObjects":[]},{"author":"","category":"General","extensionNamespace":"","fullName":"3D collision","gdevelopVersion":">=5.5.222","helpPath":"","iconUrl":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0ibWRpLXZlY3Rvci1pbnRlcnNlY3Rpb24iIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMy4xNCwxQTIuMTQsMi4xNCAwIDAsMCAxLDMuMTRWNUgzVjNINVYxSDMuMTRNNywxVjNIMTBWMUg3TTEyLDFWM0gxNFY1SDE2VjMuMTRDMTYsMS45NiAxNS4wNCwxIDEzLjg2LDFIMTJNMSw3VjEwSDNWN0gxTTksN0M3Ljg5LDcgNyw3Ljg5IDcsOUM3LDExLjMzIDcsMTYgNywxNkM3LDE2IDExLjU3LDE2IDEzLjg2LDE2QTIuMTQsMi4xNCAwIDAsMCAxNiwxMy44NkMxNiwxMS41NyAxNiw3IDE2LDdDMTYsNyAxMS4zMyw3IDksN00xOCw3VjlIMjBWMTFIMjJWOUMyMiw3Ljg5IDIxLjExLDcgMjAsN0gxOE05LDlIMTRWMTRIOVY5TTEsMTJWMTMuODZDMSwxNS4wNCAxLjk2LDE2IDMuMTQsMTZINVYxNEgzVjEySDFNMjAsMTNWMTZIMjJWMTNIMjBNNywxOFYyMEM3LDIxLjExIDcuODksMjIgOSwyMkgxMVYyMEg5VjE4SDdNMjAsMThWMjBIMThWMjJIMjBDMjEuMTEsMjIgMjIsMjEuMTEgMjIsMjBWMThIMjBNMTMsMjBWMjJIMTZWMjBIMTNaIiAvPjwvc3ZnPg==","name":"Collision3D","previewIconUrl":"https://asset-resources.gdevelop.io/public-resources/Icons/7a5696a515bf40813692e118147568392a854f65f5b50750c9b9aaa967aba7df_vector-intersection.svg","shortDescription":"Check collision and distance between 3D objects.","version":"0.2.0","description":"Check collision and distance between 3D objects and separate them from each other.","origin":{"identifier":"Collision3D","name":"gdevelop-extension-store"},"tags":["3d","collision"],"authorIds":["IWykYNRvhCZBN3vEgKEbBPOR3Oc2","PEzPAaWHgYgk5UwIPppsL6f2ugp2"],"dependencies":[],"globalVariables":[],"sceneVariables":[],"eventsFunctions":[{"description":"Define helper classes JavaScript code.","fullName":"Define helper classes","functionType":"Action","name":"DefineHelperClasses","private":true,"sentence":"Define helper classes JavaScript code","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["if (gdjs._collision3DExtension) {","    return;","}","","/**"," * @param {gdjs.RuntimeObject} object"," * @param {boolean} shouldUseCustomCenter"," * @return {number}"," */","const getCenterX = (object, shouldUseCustomCenter) =>","    shouldUseCustomCenter ?","        object.getCenterXInScene() :","        object.getDrawableX() + object.getWidth() / 2","","/**"," * @param {gdjs.RuntimeObject} object"," * @param {boolean} shouldUseCustomCenter"," * @return {number}"," */","const getCenterY = (object, shouldUseCustomCenter) =>","    shouldUseCustomCenter ?","        object.getCenterYInScene() :","        object.getDrawableY() + object.getHeight() / 2","","/**"," * @param {gdjs.RuntimeObject3D} object"," * @param {boolean} shouldUseCustomCenter"," * @return {number}"," */","const getCenterZ = (object, shouldUseCustomCenter) =>","    !object.getCenterZInScene ? 0 :","    shouldUseCustomCenter ?","        object.getCenterZInScene() :","        object.getDrawableZ() + object.getDepth() / 2","","/**"," * @param {gdjs.RuntimeObject} object"," * @param {float} x"," * @param {float} y"," * @param {float} z"," * @param {boolean} shouldUseCustomCenter"," * @return {number}"," */","const getSqDistanceToPosition = (object, x, y, z, shouldUseCustomCenter = true) => {","    const deltaX = getCenterX(object, shouldUseCustomCenter) - x;","    const deltaY = getCenterY(object, shouldUseCustomCenter) - y;","    const deltaZ = getCenterZ(object, shouldUseCustomCenter) - z;","    return deltaX * deltaX + deltaY * deltaY + deltaZ * deltaZ;","};","","/**"," * @param {gdjs.RuntimeObject} object"," * @param {float} x"," * @param {float} y"," * @param {float} z"," * @return {number}"," */","const getDistanceToPosition = (object, x, y, z) => Math.sqrt(getSqDistanceToPosition(object, x, y, z));","","/**"," * @param {gdjs.RuntimeObject} object"," * @param {gdjs.RuntimeObject} otherObject"," * @param {boolean} shouldUseCustomCenter"," * @return {number}"," */","const getSqDistanceToObject = (object, otherObject, shouldUseCustomCenter = true) => {","    return getSqDistanceToPosition(","        object,","        getCenterX(otherObject, shouldUseCustomCenter),","        getCenterY(otherObject, shouldUseCustomCenter),","        getCenterZ(otherObject, shouldUseCustomCenter)","    );","};","","/**"," * @param {gdjs.RuntimeObject} object"," * @param {gdjs.RuntimeObject} otherObject"," * @return {number}"," */","const getDistanceToObject = (object, otherObject) => Math.sqrt(getSqDistanceToObject(object, otherObject));","","/**"," * @param {gdjs.RuntimeObject} object"," * @param {gdjs.RuntimeObject} otherObject"," * @param {{distanceSq: number, shouldUseCustomCenter: boolean}} distanceSettings"," * @return {boolean}"," */","const areObjectsWithinDistance = (object, otherObject, distanceSettings) => {","    return getSqDistanceToObject(","        object, otherObject, distanceSettings.shouldUseCustomCenter) <= distanceSettings.distanceSq;","};","","const distanceSettings = {distanceSq: 0, shouldUseCustomCenter: true};","","/**"," * @param {Hashtable<gdjs.RuntimeObject[]>} objectsLists1"," * @param {Hashtable<gdjs.RuntimeObject[]>} objectsLists2"," * @param {number} distance"," * @param {boolean} shouldUseCustomCenter"," * @param {boolean} inverted"," * @return {boolean}"," */","const pickObjectsWithinDistance = (objectsLists1, objectsLists2, distance, shouldUseCustomCenter, inverted) => {","    distanceSettings.distanceSq = distance * distance;","    distanceSettings.shouldUseCustomCenter = shouldUseCustomCenter;","    return gdjs.evtTools.object.twoListsTest(","        areObjectsWithinDistance,","        objectsLists1,","        objectsLists2,","        inverted,","        distanceSettings","    );","}","","/**"," * @param {Hashtable<gdjs.RuntimeObject[]>} objectsLists"," * @param {number} x"," * @param {number} y"," * @param {number} z"," * @param {boolean} inverted"," * @return {boolean}"," */","const pickNearestObject = function (objectsLists, x, y, z, inverted) {","    let bestObject = null;","    let best = 0;","    let first = true;","    const lists = gdjs.staticArray(gdjs._collision3DExtension.pickNearestObject);","    objectsLists.values(lists);","    for (let i = 0, len = lists.length; i < len; ++i) {","        const list = lists[i];","        for (let j = 0; j < list.length; ++j) {","            const object = list[j];","            const distance = getSqDistanceToPosition(object, x, y, z);","            // @ts-ignore","            if (first || (distance < best) ^ inverted) {","                best = distance;","                bestObject = object;","            }","            first = false;","        }","    }","    if (bestObject) {","        gdjs.evtTools.object.pickOnly(objectsLists, bestObject);","    }","    return !!bestObject;","}","","/**"," * @param {gdjs.RuntimeObject} object"," * @return {float}"," */","const getObjectMinZ = (object) =>","    object.getDrawableZ ? object.getDrawableZ() : 0","","/**"," * @param {gdjs.RuntimeObject} object"," * @return {float}"," */","const getObjectMaxZ = (object) =>","    object.getDrawableZ ? object.getDrawableZ() + object.getDepth() : 0;","","/**"," * @param {gdjs.RuntimeObject} object1"," * @param {gdjs.RuntimeObject} object2"," * @param {boolean} ignoreTouchingEdges If true, then edges that are touching each other, without the hitbox polygons actually overlapping, won't be considered in collision."," * @return {boolean}"," */","const areObjectsInCollision = (","    object1,","    object2,","    ignoreTouchingEdges,",") => {","    const object1MinZ = getObjectMinZ(object1);","    const object1MaxZ = getObjectMaxZ(object1);","    const object2MinZ = getObjectMinZ(object2);","    const object2MaxZ = getObjectMaxZ(object2);","","    const canObjectsOverlapOnZ = ignoreTouchingEdges ?","        (object1MinZ < object2MaxZ && object1MaxZ > object2MinZ) :","        (object1MinZ <= object2MaxZ && object1MaxZ >= object2MinZ);","","    return canObjectsOverlapOnZ &&","        gdjs.RuntimeObject.collisionTest(","            object1,","            object2,","            ignoreTouchingEdges","        );","}","","/**"," * @param {Hashtable<gdjs.RuntimeObject[]>} objectsLists1"," * @param {Hashtable<gdjs.RuntimeObject[]>} objectsLists2"," * @param {boolean} inverted"," * @return {boolean}"," */","const pickObjectsInCollision = (","    objectsLists1,","    objectsLists2,","    inverted,",") => {","    return gdjs.evtTools.object.twoListsTest(","        areObjectsInCollision,","        objectsLists1,","        objectsLists2,","        inverted,","        false","    );","}","","/**"," * @param {gdjs.RuntimeObject} movingObject"," * @param {gdjs.RuntimeObject} object"," * @return {float}"," */","const getSeparationDeltaZ = (","    movingObject,","    object,",") => {","    const movingObjectMinZ = getObjectMinZ(movingObject);","    const movingObjectMaxZ = getObjectMaxZ(movingObject);","    const objectMinZ = getObjectMinZ(object);","    const objectMaxZ = getObjectMaxZ(object);","","    const downwardDeltaZ = Math.min(0, objectMinZ - movingObjectMaxZ);","    const upwardDeltaZ = Math.max(0, objectMaxZ - movingObjectMinZ);","","    return -downwardDeltaZ < upwardDeltaZ ? downwardDeltaZ : upwardDeltaZ","}","","// This function is an exact copy from GDJS/Runtime/runtimeobject.ts","/**"," * Move the object using the results from collisionTest call."," * This moves the object according to the direction of the longest vector,"," * and projects the others on the orthogonal vector."," *"," * See {@link RuntimeObject.separateFromObjects}"," *"," * @param {gdjs.RuntimeObject} object The object to move."," * @param {float[]} moveXArray The X coordinates of the vectors to move the object."," * @param {float[]} moveYArray The Y coordinates of the vectors to move the object."," * @return {boolean} true if the object was moved."," */","const moveFollowingSeparatingVectors = (","    object,","    moveXArray,","    moveYArray",") => {","    if (moveXArray.length === 0) {","        moveXArray.length = 0;","        moveYArray.length = 0;","        return false;","    }","    if (moveXArray.length === 1) {","        // Move according to the results returned by the collision algorithm.","        object.setPosition(","            object.getX() + moveXArray[0],","            object.getY() + moveYArray[0]","        );","        moveXArray.length = 0;","        moveYArray.length = 0;","        return true;","    }","","    // Find the longest vector","    let squaredDistanceMax = 0;","    let distanceMaxIndex = 0;","    for (let index = 0; index < moveXArray.length; index++) {","        const moveX = moveXArray[index];","        const moveY = moveYArray[index];","","        const squaredDistance = moveX * moveX + moveY * moveY;","        if (squaredDistance > squaredDistanceMax) {","            squaredDistanceMax = squaredDistance;","            distanceMaxIndex = index;","        }","    }","","    const distanceMax = Math.sqrt(squaredDistanceMax);","    // unit vector of the longest vector","    const uX = moveXArray[distanceMaxIndex] / distanceMax;","    const uY = moveYArray[distanceMaxIndex] / distanceMax;","","    // normal vector of the longest vector","    const vX = -uY;","    const vY = uX;","","    // Project other vectors on the normal","    let scalarProductMin = 0;","    let scalarProductMax = 0;","    for (let index = 0; index < moveXArray.length; index++) {","        const moveX = moveXArray[index];","        const moveY = moveYArray[index];","","        const scalarProduct = moveX * vX + moveY * vY;","        scalarProductMin = Math.min(scalarProductMin, scalarProduct);","        scalarProductMax = Math.max(scalarProductMax, scalarProduct);","    }","","    // Apply the longest vector","    let deltaX = moveXArray[distanceMaxIndex];","    let deltaY = moveYArray[distanceMaxIndex];","","    // Apply the longest projected vector if they all are in the same direction","    // Some projections could have rounding errors,","    // they are considered negligible under a 1 for 1,000,000 ratio.","    const scalarProductMinIsNegligible =","        -scalarProductMin < scalarProductMax / 1048576;","    const scalarProductMaxIsNegligible =","        scalarProductMax < -scalarProductMin / 1048576;","    if (scalarProductMinIsNegligible !== scalarProductMaxIsNegligible) {","        if (scalarProductMaxIsNegligible) {","            deltaX += scalarProductMin * vX;","            deltaY += scalarProductMin * vY;","        } else {","            deltaX += scalarProductMax * vX;","            deltaY += scalarProductMax * vY;","        }","    }","    object.setPosition(object.getX() + deltaX, object.getY() + deltaY);","    moveXArray.length = 0;","    moveYArray.length = 0;","    return true;","};","","/**"," * Arrays and data structure that are (re)used by"," * {@link separateFromObjects} to avoid any allocation."," * @type {{moveXArray: float[], moveYArray: float[], moveZArray: float[]}}"," */","const separateFromObjectsStatics = {","    moveXArray: [],","    moveYArray: [],","    moveZArray: [],","};","","/**"," * Separate the object from others objects, using their hitboxes."," * @param {gdjs.RuntimeObject} object The object that moves."," * @param {gdjs.RuntimeObject[]} objects The objects that stay still."," * @return {boolean} true if the object was moved"," */","const separateFromObjects = (","    object,","    objects",") => {","    const moveXArray = separateFromObjectsStatics.moveXArray;","    const moveYArray = separateFromObjectsStatics.moveYArray;","    moveXArray.length = 0;","    moveYArray.length = 0;","    let moveZMax = 0;","","    // We can assume that the moving object is not grid based,","    // so there is no need for optimization:","    // getHitBoxes can be called directly.","    const hitBoxes = object.getHitBoxes();","    /** @type {gdjs.AABB | null} */","    let aabb = null;","","    // Check if there is a collision with each object","    for (const otherObject of objects) {","        if (otherObject.id === object.id) {","            continue;","        }","        const moveZ = getSeparationDeltaZ(object, otherObject);","        if (moveZ === 0) {","            continue;","        }","        const moveZSq = moveZ * moveZ;","","        let otherHitBoxesArray = otherObject.getHitBoxes();","        /** @type {Iterable<gdjs.Polygon>} */","        let otherHitBoxes = otherHitBoxesArray;","        if (otherHitBoxesArray.length > 4) {","            // The other object has a lot of hit boxes.","            // Try to reduce the amount of hitboxes to check.","            if (!aabb) {","                aabb = object.getAABB();","            }","            otherHitBoxes = otherObject.getHitBoxesAround(","                aabb.min[0],","                aabb.min[1],","                aabb.max[0],","                aabb.max[1]","            );","        }","        for (const hitBox of hitBoxes) {","            for (const otherHitBox of otherHitBoxes) {","                const result = gdjs.Polygon.collisionTest(","                    hitBox,","                    otherHitBox,","                    true","                );","                if (result.collision) {","                    const moveX = result.move_axis[0];","                    const moveY = result.move_axis[1];","                    if (moveZSq < moveX * moveX + moveY * moveY) {","                        if (Math.abs(moveZ) > Math.abs(moveZMax)) {","                            moveZMax = moveZ;","                        }","                    }","                    else {","                        moveXArray.push(moveX);","                        moveYArray.push(moveY);","                    }","                }","            }","        }","    }","    const hasObjectMovedOnZ = moveZMax !== 0;","    if (hasObjectMovedOnZ) {","        object.setZ(object.getZ() + moveZMax);","    }","    const hasObjectMovedOnXY = moveFollowingSeparatingVectors(object, moveXArray, moveYArray);","    return hasObjectMovedOnXY || hasObjectMovedOnZ;","}","","gdjs._collision3DExtension = {","    getSqDistanceToPosition,","    getDistanceToPosition,","    getSqDistanceToObject,","    getDistanceToObject,","    pickObjectsWithinDistance,","    pickNearestObject,","    pickObjectsInCollision,","    separateFromObjects","}"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"parameters":[],"objectGroups":[]},{"fullName":"","functionType":"Action","name":"onFirstSceneLoaded","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"Collision3D::DefineHelperClasses"},"parameters":["",""]}]}],"parameters":[],"objectGroups":[]},{"description":"Compare the distance between two objects in 3D.","fullName":"Distance between two objects in 3D","functionType":"Condition","group":"Position","name":"AreWithinDistance","sentence":"_PARAM1_ distance to _PARAM2_ is below _PARAM3_ pixels","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["// TODO If condition is inverted, only objects that have a distance greater than specified to any other object will be picked.\r","const inverted = false;\r","\r","eventsFunctionContext.returnValue = gdjs._collision3DExtension.pickObjectsWithinDistance(\r","    eventsFunctionContext.getObjectsLists(\"Object\"),\r","    eventsFunctionContext.getObjectsLists(\"OtherObject\"),\r","    eventsFunctionContext.getArgument(\"Distance\"),\r","    eventsFunctionContext.getArgument(\"ShouldUseCustomCenter\"),\r","    inverted\r",");\r",""],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"description":"Object","name":"Object","type":"objectList"},{"description":"Other object","name":"OtherObject","type":"objectList"},{"description":"Distance","name":"Distance","type":"expression"},{"defaultValue":"yes","description":"Use custom center","name":"ShouldUseCustomCenter","optional":true,"type":"yesorno"}],"objectGroups":[]},{"description":"Distance between two objects in 3D.","fullName":"Distance between two objects in 3D","functionType":"Expression","group":"Position","name":"Distance","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["\r","const otherObjects = eventsFunctionContext.getObjectsLists(\"OtherObject\");\r","\r","if (objects.length > 0 && otherObjects.length > 0) {\r","    eventsFunctionContext.returnValue = gdjs._collision3DExtension.getDistanceToObject(\r","        objects[0],\r","        otherObjects[0]\r","    );\r","}\r",""],"parameterObjects":"Object","useStrict":true,"eventsSheetExpanded":true}],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"objectList"},{"description":"Other object","name":"OtherObject","type":"objectList"}],"objectGroups":[]},{"description":"Square distance between two objects in 3D.","fullName":"Square distance between two objects","functionType":"Expression","group":"Position","name":"SqDistance","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["\r","const otherObjects = eventsFunctionContext.getObjectsLists(\"OtherObject\");\r","\r","if (objects.length > 0 && otherObjects.length > 0) {\r","    eventsFunctionContext.returnValue = gdjs._collision3DExtension.getSqDistanceToObject(\r","        objects[0],\r","        otherObjects[0]\r","    );\r","}\r",""],"parameterObjects":"Object","useStrict":true,"eventsSheetExpanded":true}],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"objectList"},{"description":"Other object","name":"OtherObject","type":"objectList"}],"objectGroups":[]},{"description":"Distance between an object and a position in 3D.","fullName":"Distance between an object and a position","functionType":"Expression","group":"Position","name":"DistanceToPosition","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["\r","if (objects.length > 0) {\r","    eventsFunctionContext.returnValue = gdjs._collision3DExtension.getDistanceToPosition(\r","        objects[0],\r","        eventsFunctionContext.getArgument(\"PositionX\"),\r","        eventsFunctionContext.getArgument(\"PositionY\"),\r","        eventsFunctionContext.getArgument(\"PositionZ\"),\r","    );\r","}\r",""],"parameterObjects":"Object","useStrict":true,"eventsSheetExpanded":true}],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"objectList"},{"description":"X position","name":"PositionX","type":"expression"},{"description":"Y position","name":"PositionY","type":"expression"},{"description":"Z position","name":"PositionZ","type":"expression"}],"objectGroups":[]},{"description":"Square distance between an object and a position in 3D.","fullName":"Square distance between an object and a position","functionType":"Expression","group":"Position","name":"SqDistanceToPosition","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["\r","if (objects.length > 0) {\r","    eventsFunctionContext.returnValue = gdjs._collision3DExtension.getSqDistanceToPosition(\r","        objects[0],\r","        eventsFunctionContext.getArgument(\"PositionX\"),\r","        eventsFunctionContext.getArgument(\"PositionY\"),\r","        eventsFunctionContext.getArgument(\"PositionZ\"),\r","    );\r","}\r",""],"parameterObjects":"Object","useStrict":true,"eventsSheetExpanded":true}],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"objectList"},{"description":"X position","name":"PositionX","type":"expression"},{"description":"Y position","name":"PositionY","type":"expression"},{"description":"Z position","name":"PositionZ","type":"expression"}],"objectGroups":[]},{"description":"Pick the object of this type that is nearest to the specified position in 3D.","fullName":"Pick nearest object in 3D","functionType":"Condition","group":"Objects","name":"PickNearest","sentence":"Pick the _PARAM1_ that is nearest to _PARAM2_ ; _PARAM3_ ; _PARAM4_","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["// TODO If the condition is inverted, the object farthest from the specified position is picked instead.\r","const inverted = false;\r","\r","eventsFunctionContext.returnValue = gdjs._collision3DExtension.pickNearestObject(\r","    eventsFunctionContext.getObjectsLists(\"Object\"),\r","    eventsFunctionContext.getArgument(\"PositionX\"),\r","    eventsFunctionContext.getArgument(\"PositionY\"),\r","    eventsFunctionContext.getArgument(\"PositionZ\"),\r","    inverted\r",");"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"description":"Object","name":"Object","type":"objectList"},{"description":"X position","name":"PositionX","type":"expression"},{"description":"Y position","name":"PositionY","type":"expression"},{"description":"Z position","name":"PositionZ","type":"expression"}],"objectGroups":[]},{"description":"Check the collision between two objects using their collision masks. Object rotation around X and Y axes are ignored.","fullName":"Collision in 3D","functionType":"Condition","group":"Collision","name":"AreInCollision","sentence":"_PARAM1_ is in collision with _PARAM3_","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["// TODO If the condition is inverted, the object farthest from the specified position is picked instead.\r","const inverted = false;\r","\r","eventsFunctionContext.returnValue = gdjs._collision3DExtension.pickObjectsInCollision(\r","    eventsFunctionContext.getObjectsLists(\"Object\"),\r","    eventsFunctionContext.getObjectsLists(\"OtherObject\"),\r","    eventsFunctionContext.getArgument(\"IgnoreEdges\"),\r","    inverted\r",");"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"description":"Object","name":"Object","type":"objectList"},{"description":"3D capability","name":"Object3D","supplementaryInformation":"Scene3D::Base3DBehavior","type":"behavior"},{"description":"Other object","name":"OtherObject","type":"objectList"},{"description":"3D capability","name":"OtherObjectCapability","supplementaryInformation":"Scene3D::Base3DBehavior","type":"behavior"},{"description":"Ignore objects that are touching each other on their edges, but are not overlapping (default: no)","name":"IgnoreEdges","type":"yesorno"}],"objectGroups":[]},{"description":"Move an object away from another using their collision masks. Object rotation around X and Y axes are ignored.\nBe sure to call this action on a reasonable number of objects to avoid slowing down the game.","fullName":"Separate objects in 3D","functionType":"Action","group":"Position","name":"SeparateFromObjects","sentence":"Move _PARAM1_ away from _PARAM3_ (only _PARAM1_ will move)","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["\r","const otherObjects = eventsFunctionContext.getObjects(\"OtherObject\");\r","\r","for (const object of objects) {\r","    gdjs._collision3DExtension.separateFromObjects(\r","        object,\r","        otherObjects,\r","    );\r","}"],"parameterObjects":"Object","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"description":"Object","name":"Object","type":"objectList"},{"description":"3D capability","name":"Object3D","supplementaryInformation":"Scene3D::Base3DBehavior","type":"behavior"},{"description":"Objects (won't move)","name":"OtherObject","type":"objectList"},{"description":"3D capability","name":"OtherObject3D","supplementaryInformation":"Scene3D::Base3DBehavior","type":"behavior"}],"objectGroups":[]}],"eventsBasedBehaviors":[],"eventsBasedObjects":[]},{"author":"","category":"Camera","extensionNamespace":"","fullName":"3D camera shake","gdevelopVersion":">=5.5.222","helpPath":"","iconUrl":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0ibWRpLXZlY3Rvci1kaWZmZXJlbmNlLWFiIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZD0iTTMsMUMxLjg5LDEgMSwxLjg5IDEsM1Y1SDNWM0g1VjFIM003LDFWM0gxMFYxSDdNMTIsMVYzSDE0VjVIMTZWM0MxNiwxLjg5IDE1LjExLDEgMTQsMUgxMk0xLDdWMTBIM1Y3SDFNMTQsN0MxNCw3IDE0LDExLjY3IDE0LDE0QzExLjY3LDE0IDcsMTQgNywxNEM3LDE0IDcsMTggNywyMEM3LDIxLjExIDcuODksMjIgOSwyMkgyMEMyMS4xMSwyMiAyMiwyMS4xMSAyMiwyMFY5QzIyLDcuODkgMjEuMTEsNyAyMCw3QzE4LDcgMTQsNyAxNCw3TTE2LDlIMjBWMjBIOVYxNkgxNEMxNS4xMSwxNiAxNiwxNS4xMSAxNiwxNFY5TTEsMTJWMTRDMSwxNS4xMSAxLjg5LDE2IDMsMTZINVYxNEgzVjEySDFaIiAvPjwvc3ZnPg==","name":"CameraShake3D","previewIconUrl":"https://resources.gdevelop-app.com/assets/Icons/vector-difference-ab.svg","shortDescription":"Shake 3D layer cameras.","version":"0.3.0","description":["Shake layer cameras on 3 rotations.","","- Short shaking can be used to give impact (explosion, hit)","- Shaking can go indefinitely to set an ambiance (engine vibration, earthquake, pulsing)","- Low frequency shaking allows to simulate slow moving objects (ship rocking back and forth)",""],"origin":{"identifier":"CameraShake3D","name":"gdevelop-extension-store"},"tags":["shaking","camera","effect","screen","shake","3d"],"authorIds":["IWykYNRvhCZBN3vEgKEbBPOR3Oc2"],"dependencies":[],"globalVariables":[],"sceneVariables":[{"folded":true,"name":"DefaultFrequency","type":"number","value":24.0},{"folded":true,"name":"DefaultAmplitudeAngleX","type":"number","value":0.5},{"folded":true,"name":"DefaultAmplitudeAngleY","type":"number","value":0.5},{"folded":true,"name":"DefaultAmplitudeAngleZ","type":"number","value":0.5},{"folded":true,"name":"Duration","type":"number","value":0.0},{"name":"Layers","type":"structure","children":[]},{"name":"Layer","type":"structure","children":[{"name":"AmplitudeAngleX","type":"number","value":0.0},{"name":"AmplitudeAngleY","type":"number","value":0.0},{"folded":true,"name":"AmplitudeAngleZ","type":"number","value":0.0},{"folded":true,"name":"CameraDeltaAngleX","type":"number","value":0.0},{"name":"CameraDeltaAngleY","type":"number","value":0.0},{"name":"CameraDeltaAngleZ","type":"number","value":0.0},{"folded":true,"name":"Frequency","type":"number","value":0.0}]},{"folded":true,"name":"LayerName","type":"string","value":""},{"folded":true,"name":"Time","type":"number","value":0.0},{"folded":true,"name":"StartEaseDuration","type":"number","value":0.0},{"folded":true,"name":"StopEaseDuration","type":"number","value":0.0}],"eventsFunctions":[{"fullName":"","functionType":"Action","name":"onSceneLoaded","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["Index","=","0"]}],"events":[{"type":"BuiltinCommonInstructions::Repeat","repeatExpression":"CameraShake3D::LayerCount()","conditions":[],"actions":[{"type":{"value":"CameraShake3D::SetLayerShakable"},"parameters":["","","CameraShake3D::LayerName(Index)",""]},{"type":{"value":"SetNumberVariable"},"parameters":["Index","+","1"]}]}],"variables":[{"folded":true,"name":"Index","type":"number","value":0.0}]}],"parameters":[],"objectGroups":[]},{"description":"Return the number of layers the current scene has. ","fullName":"Layer count","functionType":"Expression","name":"LayerCount","private":true,"sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["gdjs._cameraShake3DExtension = gdjs._cameraShake3DExtension || {};\r","gdjs._cameraShake3DExtension.layerNames = gdjs._cameraShake3DExtension.layerNames || [];\r","const layerNames = gdjs._cameraShake3DExtension.layerNames;\r","runtimeScene.getAllLayerNames(layerNames);\r","\r","eventsFunctionContext.returnValue = layerNames.length;\r",""],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[],"objectGroups":[]},{"description":"Return the number of layers the current scene has. ","fullName":"Layer name","functionType":"StringExpression","name":"LayerName","private":true,"sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const layerIndex = eventsFunctionContext.getArgument(\"LayerIndex\");\r","\r","gdjs._cameraShake3DExtension = gdjs._cameraShake3DExtension || {};\r","gdjs._cameraShake3DExtension.layerNames = gdjs._cameraShake3DExtension.layerNames || [];\r","const layerNames = gdjs._cameraShake3DExtension.layerNames;\r","runtimeScene.getAllLayerNames(layerNames);\r","\r","eventsFunctionContext.returnValue = layerNames[layerIndex];\r",""],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"string"},"parameters":[{"description":"Layer index","name":"LayerIndex","type":"expression"}],"objectGroups":[]},{"fullName":"","functionType":"Action","name":"onScenePostEvents","sentence":"","events":[{"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Step time counters."},{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["Time","+","TimeDelta()"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"CameraShake3D::IsShaking"},"parameters":["",""]}],"actions":[],"events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[],"events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberVariable"},"parameters":["Time","<","StartEaseDuration"]},{"type":{"inverted":true,"value":"NumberVariable"},"parameters":["Time",">","Duration - StopEaseDuration"]}],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["EaseFactor","=","clamp(Time / StartEaseDuration, 0, 1)"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberVariable"},"parameters":["Time",">","Duration - StopEaseDuration"]}],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["EaseFactor","=","clamp((Duration - Time) / StopEaseDuration, 0, 1)"]}]},{"type":"BuiltinCommonInstructions::ForEachChildVariable","iterableVariableName":"Layers","valueIteratorVariableName":"Layer","keyIteratorVariableName":"LayerName","conditions":[{"type":{"value":"BooleanVariable"},"parameters":["Layers[LayerName].Shakable","True",""]}],"actions":[],"events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetStringVariable"},"parameters":["ActualLayerName","=","LayerName"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"StringVariable"},"parameters":["LayerName","=","\"__BaseLayer\""]}],"actions":[{"type":{"value":"SetStringVariable"},"parameters":["ActualLayerName","=","\"\""]}]},{"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Default values when there is no layer specific value set."},{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"CameraShake3D::SetFrequency"},"parameters":["","DefaultFrequency","\"\"",""]},{"type":{"value":"SetNumberVariable"},"parameters":["AmplitudeAngleZ","=","DefaultAmplitudeAngleZ"]},{"type":{"value":"SetNumberVariable"},"parameters":["AmplitudeAngleY","=","DefaultAmplitudeAngleY"]},{"type":{"value":"SetNumberVariable"},"parameters":["AmplitudeAngleX","=","DefaultAmplitudeAngleX"]},{"type":{"value":"SetNumberVariable"},"parameters":["Layers[LayerName].CameraDeltaAngleZ","=","0"]},{"type":{"value":"SetNumberVariable"},"parameters":["Layers[LayerName].CameraDeltaAngleY","=","0"]},{"type":{"value":"SetNumberVariable"},"parameters":["Layers[LayerName].CameraDeltaAngleX","=","0"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"VariableChildExists2"},"parameters":["Layer","\"Frequency\""]}],"actions":[{"type":{"value":"CameraShake3D::SetFrequency"},"parameters":["","Layer.Frequency","\"\"",""]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"VariableChildExists2"},"parameters":["Layer","\"AmplitudeAngleZ\""]}],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["AmplitudeAngleZ","=","Layer.AmplitudeAngleZ"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"VariableChildExists2"},"parameters":["Layer","\"AmplitudeAngleY\""]}],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["AmplitudeAngleY","=","Layer.AmplitudeAngleY"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"VariableChildExists2"},"parameters":["Layer","\"AmplitudeAngleX\""]}],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["AmplitudeAngleX","=","Layer.AmplitudeAngleX"]}]},{"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Shake the layer camera.\nSave the camera displacement to revert it in onScenePostEvents."},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberVariable"},"parameters":["AmplitudeAngleZ","!=","0"]}],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["Layers[LayerName].CameraDeltaAngleZ","=","CameraShake3D::Noise2d(\"\", TimeFromStart(), 1000) * AmplitudeAngleZ * EaseFactor"]},{"type":{"value":"CameraShake3D::SpinCamera"},"parameters":["","Layers[LayerName].CameraDeltaAngleZ","ActualLayerName","VariableString(__CameraShake.ActualLayerName)"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberVariable"},"parameters":["AmplitudeAngleY","!=","0"]}],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["Layers[LayerName].CameraDeltaAngleY","=","CameraShake3D::Noise2d(\"\", TimeFromStart(), 2000) * AmplitudeAngleY * EaseFactor"]},{"type":{"value":"CameraShake3D::TurnCameraHorizontally"},"parameters":["","Layers[LayerName].CameraDeltaAngleY","ActualLayerName","VariableString(__CameraShake.ActualLayerName)"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberVariable"},"parameters":["AmplitudeAngleX","!=","0"]}],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["Layers[LayerName].CameraDeltaAngleX","=","CameraShake3D::Noise2d(\"\", TimeFromStart(), 3000) * AmplitudeAngleX * EaseFactor"]},{"type":{"value":"CameraShake3D::TurnCameraVertically"},"parameters":["","Layers[LayerName].CameraDeltaAngleX","ActualLayerName","VariableString(__CameraShake.ActualLayerName)"]}]}]}],"variables":[{"folded":true,"name":"AmplitudeAngleZ","type":"number","value":0.0},{"folded":true,"name":"AmplitudeAngleY","type":"number","value":0.0},{"folded":true,"name":"AmplitudeAngleX","type":"number","value":0.0},{"folded":true,"name":"EaseFactor","type":"number","value":1.0},{"folded":true,"name":"ActualLayerName","type":"string","value":""}]}]}],"parameters":[],"objectGroups":[]},{"fullName":"","functionType":"Action","name":"onScenePreEvents","sentence":"","events":[{"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Revert the shaking."},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"CameraShake3D::IsShaking"},"parameters":["",""]}],"actions":[],"events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[],"events":[{"type":"BuiltinCommonInstructions::ForEachChildVariable","iterableVariableName":"__CameraShake.Layers","valueIteratorVariableName":"Layer","keyIteratorVariableName":"LayerName","conditions":[{"type":{"value":"BooleanVariable"},"parameters":["Layers[LayerName].Shakable","True",""]}],"actions":[],"events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetStringVariable"},"parameters":["ActualLayerName","=","LayerName"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"StringVariable"},"parameters":["LayerName","=","\"__BaseLayer\""]}],"actions":[{"type":{"value":"SetStringVariable"},"parameters":["ActualLayerName","=","\"\""]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"CameraShake3D::SpinCamera"},"parameters":["","0 - Layers[LayerName].CameraDeltaAngleZ","ActualLayerName","VariableString(__CameraShake.ActualLayerName)"]},{"type":{"value":"CameraShake3D::TurnCameraHorizontally"},"parameters":["","0 - Layers[LayerName].CameraDeltaAngleY","ActualLayerName","VariableString(__CameraShake.ActualLayerName)"]},{"type":{"value":"CameraShake3D::TurnCameraVertically"},"parameters":["","0 - Layers[LayerName].CameraDeltaAngleX","ActualLayerName","VariableString(__CameraShake.ActualLayerName)"]}]}]}],"variables":[{"folded":true,"name":"ActualLayerName","type":"string","value":""}]}]}],"parameters":[],"objectGroups":[]},{"description":"Shake the camera on layers chosen with configuration actions.","fullName":"Shake camera","functionType":"Action","name":"ShakeCamera","sentence":"Shake camera for _PARAM1_ seconds with _PARAM2_ seconds of easing to start and _PARAM3_ seconds to stop","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["Time","=","0"]},{"type":{"value":"SetNumberVariable"},"parameters":["Duration","=","NewDuration"]},{"type":{"value":"SetNumberVariable"},"parameters":["StartEaseDuration","=","NewStartEaseDuration"]},{"type":{"value":"SetNumberVariable"},"parameters":["StopEaseDuration","=","NewStopEaseDuration"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberVariable"},"parameters":["Duration","<","StartEaseDuration + StopEaseDuration"]}],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["StartEaseDuration","=","StartEaseDuration * Duration / (StartEaseDuration + StopEaseDuration)"]},{"type":{"value":"SetNumberVariable"},"parameters":["StopEaseDuration","=","StopEaseDuration * Duration / (StartEaseDuration + StopEaseDuration)"]}]}],"parameters":[{"description":"Duration (in seconds)","name":"NewDuration","type":"expression"},{"description":"Ease duration to start (in seconds)","name":"NewStartEaseDuration","type":"expression"},{"description":"Ease duration to stop (in seconds)","name":"NewStopEaseDuration","type":"expression"}],"objectGroups":[]},{"description":"Start shaking the camera indefinitely.","fullName":"Start camera shaking","functionType":"Action","name":"StartShaking","sentence":"Start shaking the camera with _PARAM1_ seconds of easing","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["Time","=","0"]},{"type":{"value":"SetNumberVariable"},"parameters":["Duration","=","1234567890"]},{"type":{"value":"SetNumberVariable"},"parameters":["StartEaseDuration","=","EaseDuration"]}]}],"parameters":[{"description":"Ease duration (in seconds)","name":"EaseDuration","type":"expression"}],"objectGroups":[]},{"description":"Stop shaking the camera.","fullName":"Stop camera shaking","functionType":"Action","name":"StopShaking","sentence":"Stop shaking the camera with _PARAM1_ seconds of easing","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["Time","=","0"]},{"type":{"value":"SetNumberVariable"},"parameters":["Duration","=","EaseDuration"]},{"type":{"value":"SetNumberVariable"},"parameters":["StopEaseDuration","=","EaseDuration"]}]}],"parameters":[{"description":"Ease duration (in seconds)","name":"EaseDuration","type":"expression"}],"objectGroups":[]},{"description":"Mark a layer as shakable.","fullName":"Shakable layer","functionType":"Action","group":"Camera shake configuration","name":"SetLayerShakable","sentence":"Mark the layer: _PARAM2_ as shakable: _PARAM1_","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetStringVariable"},"parameters":["LayerName","=","NewLayerName"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"BuiltinCommonInstructions::CompareStrings"},"parameters":["NewLayerName","=","\"\""]}],"actions":[{"type":{"value":"SetStringVariable"},"parameters":["LayerName","=","\"__BaseLayer\""]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":true,"value":"BooleanVariable"},"parameters":["Shakable","True",""]}],"actions":[{"type":{"value":"SetBooleanVariable"},"parameters":["Layers[LayerName].Shakable","False",""]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"BooleanVariable"},"parameters":["Shakable","True",""]}],"actions":[{"type":{"value":"SetBooleanVariable"},"parameters":["Layers[LayerName].Shakable","True",""]}]}],"parameters":[{"defaultValue":"yes","description":"Shakable","name":"Shakable","optional":true,"type":"yesorno"},{"description":"Layer","name":"NewLayerName","type":"layer"}],"objectGroups":[]},{"description":"Check if the camera is shaking.","fullName":"Camera is shaking","functionType":"Condition","name":"IsShaking","sentence":"Camera is shaking","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberVariable"},"parameters":["Time","<","Duration"]}],"actions":[{"type":{"value":"SetReturnBoolean"},"parameters":["True"]}]}],"parameters":[],"objectGroups":[]},{"description":"the spinning amplitude of the shaking (in degrees).","fullName":"Spinning shake amplitude","functionType":"ExpressionAndCondition","group":"Camera shake configuration","name":"SpineAmplitudeAngle","sentence":"the spinning shake amplitude of layer: _PARAM1_","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetStringVariable"},"parameters":["LayerName","=","NewLayerName"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"BuiltinCommonInstructions::CompareStrings"},"parameters":["NewLayerName","=","\"\""]}],"actions":[{"type":{"value":"SetStringVariable"},"parameters":["LayerName","=","\"__BaseLayer\""]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["Layers[LayerName].AmplitudeAngleZ"]}]}],"expressionType":{"type":"expression"},"parameters":[{"description":"Layer","name":"NewLayerName","type":"layer"}],"objectGroups":[]},{"fullName":"","functionType":"ActionWithOperator","getterName":"SpineAmplitudeAngle","group":"Camera shake configuration","name":"SetSpineAmplitudeAngle","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetStringVariable"},"parameters":["LayerName","=","NewLayerName"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"BuiltinCommonInstructions::CompareStrings"},"parameters":["NewLayerName","=","\"\""]}],"actions":[{"type":{"value":"SetStringVariable"},"parameters":["LayerName","=","\"__BaseLayer\""]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["Layers[LayerName].AmplitudeAngleZ","=","Value"]}]}],"parameters":[],"objectGroups":[]},{"description":"the horizontal rotation amplitude of the shaking (in degrees).","fullName":"Horizontal rotation amplitude","functionType":"ExpressionAndCondition","group":"Camera shake configuration","name":"HorizontalAmplitudeAngle","sentence":"the horizontal shaking amplitude of layer: _PARAM1_","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetStringVariable"},"parameters":["LayerName","=","NewLayerName"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"BuiltinCommonInstructions::CompareStrings"},"parameters":["NewLayerName","=","\"\""]}],"actions":[{"type":{"value":"SetStringVariable"},"parameters":["LayerName","=","\"__BaseLayer\""]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["Layers[LayerName].AmplitudeAngleY"]}]}],"expressionType":{"type":"expression"},"parameters":[{"description":"Layer","name":"NewLayerName","type":"layer"}],"objectGroups":[]},{"fullName":"","functionType":"ActionWithOperator","getterName":"HorizontalAmplitudeAngle","group":"Camera shake configuration","name":"SetHorizontalAmplitudeAngle","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetStringVariable"},"parameters":["LayerName","=","NewLayerName"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"BuiltinCommonInstructions::CompareStrings"},"parameters":["NewLayerName","=","\"\""]}],"actions":[{"type":{"value":"SetStringVariable"},"parameters":["LayerName","=","\"__BaseLayer\""]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["Layers[LayerName].AmplitudeAngleY","=","Value"]}]}],"parameters":[],"objectGroups":[]},{"description":"the vertical rotation amplitude of the shaking (in degrees).","fullName":"Vertical rotation amplitude","functionType":"ExpressionAndCondition","group":"Camera shake configuration","name":"VerticalAmplitudeAngle","sentence":"the vertical shaking amplitude of layer: _PARAM1_","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetStringVariable"},"parameters":["LayerName","=","NewLayerName"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"BuiltinCommonInstructions::CompareStrings"},"parameters":["NewLayerName","=","\"\""]}],"actions":[{"type":{"value":"SetStringVariable"},"parameters":["LayerName","=","\"__BaseLayer\""]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["Layers[LayerName].AmplitudeAngleX"]}]}],"expressionType":{"type":"expression"},"parameters":[{"description":"Layer","name":"NewLayerName","type":"layer"}],"objectGroups":[]},{"fullName":"","functionType":"ActionWithOperator","getterName":"VerticalAmplitudeAngle","group":"Camera shake configuration","name":"SetVerticalAmplitudeAngle","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetStringVariable"},"parameters":["LayerName","=","NewLayerName"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"BuiltinCommonInstructions::CompareStrings"},"parameters":["NewLayerName","=","\"\""]}],"actions":[{"type":{"value":"SetStringVariable"},"parameters":["LayerName","=","\"__BaseLayer\""]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["Layers[LayerName].AmplitudeAngleX","=","Value"]}]}],"parameters":[],"objectGroups":[]},{"description":"Change the number of back and forth per seconds.","fullName":"Layer shaking frequency","functionType":"Action","group":"Camera shake configuration","name":"SetLayerShakingFrequency","sentence":"Change the shaking frequency to _PARAM1_ (layer: _PARAM2_)","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetStringVariable"},"parameters":["LayerName","=","NewLayerName"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"BuiltinCommonInstructions::CompareStrings"},"parameters":["NewLayerName","=","\"\""]}],"actions":[{"type":{"value":"SetStringVariable"},"parameters":["LayerName","=","\"__BaseLayer\""]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["Layers[LayerName].Frequency","=","Frequency"]}]}],"parameters":[{"description":"Frequency","name":"Frequency","type":"expression"},{"description":"Layer","name":"NewLayerName","type":"layer"}],"objectGroups":[]},{"description":"Rotates the camera around its own direction.","fullName":"Spin camera","functionType":"Action","name":"SpinCamera","private":true,"sentence":"Spin the camera (layer: _PARAM2_) by _PARAM1_","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const angle = eventsFunctionContext.getArgument(\"Angle\");","const layerName = eventsFunctionContext.getArgument(\"NewLayer\");","","if (angle === 0) {","    return;","}","","const layer = runtimeScene.getLayer(layerName);","const camera = layer.getRenderer().getThreeCamera();","if (camera) {","    camera.rotation.z = gdjs.toRad(layer.getCameraRotation());","    ","    camera.rotateZ(gdjs.toRad(angle));","","    layer.setCameraRotation(gdjs.toDegrees(camera.rotation.z));","}",""],"parameterObjects":"Object","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"description":"Angle (in degrees)","name":"Angle","type":"expression"},{"description":"Layer","name":"NewLayer","type":"layer"}],"objectGroups":[]},{"description":"Rotate the camera vertically according to its own direction.","fullName":"Rotate camera vertically","functionType":"Action","name":"TurnCameraVertically","private":true,"sentence":"Rotate the camera (layer: _PARAM2_) vertically by _PARAM1_","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const angle = eventsFunctionContext.getArgument(\"Angle\");","const layerName = eventsFunctionContext.getArgument(\"NewLayer\");","","if (angle === 0) {","    return;","}","","const layer = runtimeScene.getLayer(layerName);","const camera = layer.getRenderer().getThreeCamera();","if (camera) {","    camera.rotation.z = gdjs.toRad(layer.getCameraRotation());","    ","    camera.rotateX(gdjs.toRad(angle));","","    layer.setCameraRotation(gdjs.toDegrees(camera.rotation.z));","}"],"parameterObjects":"Object","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"description":"Angle (in degrees)","name":"Angle","type":"expression"},{"description":"Layer","name":"NewLayer","type":"layer"}],"objectGroups":[]},{"description":"Rotate the camera horizontally according to its own direction.","fullName":"Rotate camera horizontally","functionType":"Action","name":"TurnCameraHorizontally","private":true,"sentence":"Rotate the camera (layer: _PARAM2_) horizontally by _PARAM1_","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const angle = eventsFunctionContext.getArgument(\"Angle\");","const layerName = eventsFunctionContext.getArgument(\"NewLayer\");","","if (angle === 0) {","    return;","}","","const layer = runtimeScene.getLayer(layerName);","const camera = layer.getRenderer().getThreeCamera();","if (camera) {","    camera.rotation.z = gdjs.toRad(layer.getCameraRotation());","    ","    camera.rotateY(gdjs.toRad(angle));","","    layer.setCameraRotation(gdjs.toDegrees(camera.rotation.z));","}"],"parameterObjects":"Object","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"description":"Angle (in degrees)","name":"Angle","type":"expression"},{"description":"Layer","name":"NewLayer","type":"layer"}],"objectGroups":[]},{"fullName":"","functionType":"Action","name":"onFirstSceneLoaded","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["if (gdjs._cameraShake3DExtension) {","    return;","}","","/** Noise generator manager. */","class NoiseManager {","    /**","     * Create the manager of noise generators.","     */","    constructor() {","        this.seed = gdjs.randomInRange(1, Number.MAX_SAFE_INTEGER);","        /** @type {Map<string, NoiseGenerator>} */","        this.generators = new Map();","    }","","    /**","     * @param name {string}","     * @return {NoiseGenerator}","     */","    getGenerator(name) {","        let generator = this.generators.get(name);","        if (!generator) {","            generator = new NoiseGenerator(name + this.seed);","            this.generators.set(name, generator);","        }","        return generator;","    }","","    /**","     * @param seed {number}","     */","    setSeed(seed) {","        this.seed = seed;","        this.generators.forEach(generator => generator.setSeed(name + this.seed));","    }","","    /**","     * @param name {string}","     */","    deleteGenerator(name) {","        this.generators.delete(name);","    }","","    /**","     */","    deleteAllGenerators() {","        this.generators.clear();","    }","}","","/** Noise generator with octaves. */","class NoiseGenerator {","    /**","     * Create a noise generator with a seed.","     * @param seed {string}","     */","    constructor(seed) {","        this.simplexNoise = new SimplexNoise(seed);","        this.frequency = 1;","        this.octaves = 1;","        this.persistence = 0.5;","        this.lacunarity = 2;","        this.xLoopPeriod = 0;","        this.yLoopPeriod = 0;","    }","","    /**","     * @param seed {string}","     */","    setSeed(seed) {","        this.simplexNoise = new SimplexNoise(seed);","    }","","    /**","     * @param x {float}","     * @param y {float}","     * @param z {float} optionnal","     * @param w {float} optionnal","     * @return {float}","     */","    noise(x, y, z, w) {","        if (this.xLoopPeriod && this.yLoopPeriod) {","            const circleRatioX = 2 * Math.PI / this.xLoopPeriod;","            const circleRatioY = 2 * Math.PI / this.yLoopPeriod;","            const angleX = circleRatioX * x;","            const angleY = circleRatioY * y;","            x = Math.cos(angleX) / circleRatioX;","            y = Math.sin(angleX) / circleRatioX;","            z = Math.cos(angleY) / circleRatioY;","            w = Math.sin(angleY) / circleRatioY;","        }","        else if (this.xLoopPeriod) {","            const circleRatio = 2 * Math.PI / this.xLoopPeriod;","            const angleX = circleRatio * x;","            w = z;","            z = y;","            x = Math.cos(angleX) / circleRatio;","            y = Math.sin(angleX) / circleRatio;","        }","        else if (this.yLoopPeriod) {","            const circleRatio = 2 * Math.PI / this.xLoopPeriod;","            const angleX = circleRatio * x;","            w = z;","            // Make the circle perimeter equals to the looping period","            // to keep the same perceived frequency with or without looping.","            y = Math.cos(angleX) / circleRatio;","            z = Math.sin(angleX) / circleRatio;","        }","        let noiseFunction = this.simplexNoise.noise4D.bind(this.simplexNoise);","        if (z === undefined) {","            noiseFunction = this.simplexNoise.noise2D.bind(this.simplexNoise);","        }","        else if (w === undefined) {","            noiseFunction = this.simplexNoise.noise3D.bind(this.simplexNoise);","        }","        let frequency = this.frequency;","        let noiseSum = 0;","        let amplitudeSum = 0;","        let amplitude = 1;","        for (let i = 0; i < this.octaves; i++) {","            noiseSum += noiseFunction(x * frequency, y * frequency, z * frequency, w * frequency) * amplitude;","            amplitudeSum += Math.abs(amplitude);","            amplitude *= this.persistence;","            frequency *= this.lacunarity;","        }","        return noiseSum / amplitudeSum;","    }","}","","/*","A fast javascript implementation of simplex noise by Jonas Wagner","https://github.com/jwagner/simplex-noise.js","","Based on a speed-improved simplex noise algorithm for 2D, 3D and 4D in Java.","Which is based on example code by Stefan Gustavson (stegu@itn.liu.se).","With Optimisations by Peter Eastman (peastman@drizzle.stanford.edu).","Better rank ordering method by Stefan Gustavson in 2012.",""," Copyright (c) 2021 Jonas Wagner",""," Permission is hereby granted, free of charge, to any person obtaining a copy"," of this software and associated documentation files (the \"Software\"), to deal"," in the Software without restriction, including without limitation the rights"," to use, copy, modify, merge, publish, distribute, sublicense, and/or sell"," copies of the Software, and to permit persons to whom the Software is"," furnished to do so, subject to the following conditions:",""," The above copyright notice and this permission notice shall be included in all"," copies or substantial portions of the Software.",""," THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR"," IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,"," FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE"," AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER"," LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,"," OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE"," SOFTWARE."," */","","const F2 = 0.5 * (Math.sqrt(3.0) - 1.0);","const G2 = (3.0 - Math.sqrt(3.0)) / 6.0;","const F3 = 1.0 / 3.0;","const G3 = 1.0 / 6.0;","const F4 = (Math.sqrt(5.0) - 1.0) / 4.0;","const G4 = (5.0 - Math.sqrt(5.0)) / 20.0;","const grad3 = new Float32Array([1, 1, 0,","    -1, 1, 0,","    1, -1, 0,","    -1, -1, 0,","    1, 0, 1,","    -1, 0, 1,","    1, 0, -1,","    -1, 0, -1,","    0, 1, 1,","    0, -1, 1,","    0, 1, -1,","    0, -1, -1]);","const grad4 = new Float32Array([0, 1, 1, 1, 0, 1, 1, -1, 0, 1, -1, 1, 0, 1, -1, -1,","    0, -1, 1, 1, 0, -1, 1, -1, 0, -1, -1, 1, 0, -1, -1, -1,","    1, 0, 1, 1, 1, 0, 1, -1, 1, 0, -1, 1, 1, 0, -1, -1,","    -1, 0, 1, 1, -1, 0, 1, -1, -1, 0, -1, 1, -1, 0, -1, -1,","    1, 1, 0, 1, 1, 1, 0, -1, 1, -1, 0, 1, 1, -1, 0, -1,","    -1, 1, 0, 1, -1, 1, 0, -1, -1, -1, 0, 1, -1, -1, 0, -1,","    1, 1, 1, 0, 1, 1, -1, 0, 1, -1, 1, 0, 1, -1, -1, 0,","    -1, 1, 1, 0, -1, 1, -1, 0, -1, -1, 1, 0, -1, -1, -1, 0]);","","","/**"," * Builds a random permutation table."," * This is exported only for (internal) testing purposes."," * Do not rely on this export."," * @param {() => number} random"," * @private"," */","function buildPermutationTable(random) {","    const p = new Uint8Array(256);","    for (let i = 0; i < 256; i++) {","        p[i] = i;","    }","    for (let i = 0; i < 255; i++) {","        const r = i + ~~(random() * (256 - i));","        const aux = p[i];","        p[i] = p[r];","        p[r] = aux;","    }","    return p;","}","","/*","The ALEA PRNG and masher code used by simplex-noise.js","is based on code by Johannes Baage, modified by Jonas Wagner.","See alea.md for the full license.","@param {string|number} seed","*/","function alea(seed) {","    let s0 = 0;","    let s1 = 0;","    let s2 = 0;","    let c = 1;","    const mash = masher();","    s0 = mash(' ');","    s1 = mash(' ');","    s2 = mash(' ');","    s0 -= mash(seed);","    if (s0 < 0) {","        s0 += 1;","    }","    s1 -= mash(seed);","    if (s1 < 0) {","        s1 += 1;","    }","    s2 -= mash(seed);","    if (s2 < 0) {","        s2 += 1;","    }","    return function () {","        const t = 2091639 * s0 + c * 2.3283064365386963e-10; // 2^-32","        s0 = s1;","        s1 = s2;","        return s2 = t - (c = t | 0);","    };","}","","function masher() {","    let n = 0xefc8249d;","    return function (data) {","        data = data.toString();","        for (let i = 0; i < data.length; i++) {","            n += data.charCodeAt(i);","            let h = 0.02519603282416938 * n;","            n = h >>> 0;","            h -= n;","            h *= n;","            n = h >>> 0;","            h -= n;","            n += h * 0x100000000; // 2^32","        }","        return (n >>> 0) * 2.3283064365386963e-10; // 2^-32","    };","}","","/** Deterministic simplex noise generator suitable for 2D, 3D and 4D spaces. */","class SimplexNoise {","    /**","     * Creates a new `SimplexNoise` instance.","     * This involves some setup. You can save a few cpu cycles by reusing the same instance.","     * @param {(() => number)|string|number} randomOrSeed A random number generator or a seed (string|number).","     * Defaults to Math.random (random irreproducible initialization).","     */","    constructor(randomOrSeed) {","        if (randomOrSeed === void 0) { randomOrSeed = Math.random; }","        const random = typeof randomOrSeed == 'function' ? randomOrSeed : alea(randomOrSeed);","        this.p = buildPermutationTable(random);","        this.perm = new Uint8Array(512);","        this.permMod12 = new Uint8Array(512);","        for (let i = 0; i < 512; i++) {","            this.perm[i] = this.p[i & 255];","            this.permMod12[i] = this.perm[i] % 12;","        }","    }","","    /**","     * Samples the noise field in 2 dimensions","     * @param {number} x","     * @param {number} y","     * @returns a number in the interval [-1, 1]","     */","    noise2D(x, y) {","        const permMod12 = this.permMod12;","        const perm = this.perm;","        let n0 = 0; // Noise contributions from the three corners","        let n1 = 0;","        let n2 = 0;","        // Skew the input space to determine which simplex cell we're in","        const s = (x + y) * F2; // Hairy factor for 2D","        const i = Math.floor(x + s);","        const j = Math.floor(y + s);","        const t = (i + j) * G2;","        const X0 = i - t; // Unskew the cell origin back to (x,y) space","        const Y0 = j - t;","        const x0 = x - X0; // The x,y distances from the cell origin","        const y0 = y - Y0;","        // For the 2D case, the simplex shape is an equilateral triangle.","        // Determine which simplex we are in.","        let i1, j1; // Offsets for second (middle) corner of simplex in (i,j) coords","        if (x0 > y0) {","            i1 = 1;","            j1 = 0;","        } // lower triangle, XY order: (0,0)->(1,0)->(1,1)","        else {","            i1 = 0;","            j1 = 1;","        } // upper triangle, YX order: (0,0)->(0,1)->(1,1)","        // A step of (1,0) in (i,j) means a step of (1-c,-c) in (x,y), and","        // a step of (0,1) in (i,j) means a step of (-c,1-c) in (x,y), where","        // c = (3-sqrt(3))/6","        const x1 = x0 - i1 + G2; // Offsets for middle corner in (x,y) unskewed coords","        const y1 = y0 - j1 + G2;","        const x2 = x0 - 1.0 + 2.0 * G2; // Offsets for last corner in (x,y) unskewed coords","        const y2 = y0 - 1.0 + 2.0 * G2;","        // Work out the hashed gradient indices of the three simplex corners","        const ii = i & 255;","        const jj = j & 255;","        // Calculate the contribution from the three corners","        let t0 = 0.5 - x0 * x0 - y0 * y0;","        if (t0 >= 0) {","            const gi0 = permMod12[ii + perm[jj]] * 3;","            t0 *= t0;","            n0 = t0 * t0 * (grad3[gi0] * x0 + grad3[gi0 + 1] * y0); // (x,y) of grad3 used for 2D gradient","        }","        let t1 = 0.5 - x1 * x1 - y1 * y1;","        if (t1 >= 0) {","            const gi1 = permMod12[ii + i1 + perm[jj + j1]] * 3;","            t1 *= t1;","            n1 = t1 * t1 * (grad3[gi1] * x1 + grad3[gi1 + 1] * y1);","        }","        let t2 = 0.5 - x2 * x2 - y2 * y2;","        if (t2 >= 0) {","            const gi2 = permMod12[ii + 1 + perm[jj + 1]] * 3;","            t2 *= t2;","            n2 = t2 * t2 * (grad3[gi2] * x2 + grad3[gi2 + 1] * y2);","        }","        // Add contributions from each corner to get the final noise value.","        // The result is scaled to return values in the interval [-1,1].","        return 70.0 * (n0 + n1 + n2);","    }","","    /**","     * Samples the noise field in 3 dimensions","     * @param {number} x","     * @param {number} y","     * @param {number} z","     * @returns a number in the interval [-1, 1]","     */","    noise3D(x, y, z) {","        const permMod12 = this.permMod12;","        const perm = this.perm;","        let n0, n1, n2, n3; // Noise contributions from the four corners","        // Skew the input space to determine which simplex cell we're in","        const s = (x + y + z) * F3; // Very nice and simple skew factor for 3D","        const i = Math.floor(x + s);","        const j = Math.floor(y + s);","        const k = Math.floor(z + s);","        const t = (i + j + k) * G3;","        const X0 = i - t; // Unskew the cell origin back to (x,y,z) space","        const Y0 = j - t;","        const Z0 = k - t;","        const x0 = x - X0; // The x,y,z distances from the cell origin","        const y0 = y - Y0;","        const z0 = z - Z0;","        // For the 3D case, the simplex shape is a slightly irregular tetrahedron.","        // Determine which simplex we are in.","        let i1, j1, k1; // Offsets for second corner of simplex in (i,j,k) coords","        let i2, j2, k2; // Offsets for third corner of simplex in (i,j,k) coords","        if (x0 >= y0) {","            if (y0 >= z0) {","                i1 = 1;","                j1 = 0;","                k1 = 0;","                i2 = 1;","                j2 = 1;","                k2 = 0;","            } // X Y Z order","            else if (x0 >= z0) {","                i1 = 1;","                j1 = 0;","                k1 = 0;","                i2 = 1;","                j2 = 0;","                k2 = 1;","            } // X Z Y order","            else {","                i1 = 0;","                j1 = 0;","                k1 = 1;","                i2 = 1;","                j2 = 0;","                k2 = 1;","            } // Z X Y order","        }","        else { // x0<y0","            if (y0 < z0) {","                i1 = 0;","                j1 = 0;","                k1 = 1;","                i2 = 0;","                j2 = 1;","                k2 = 1;","            } // Z Y X order","            else if (x0 < z0) {","                i1 = 0;","                j1 = 1;","                k1 = 0;","                i2 = 0;","                j2 = 1;","                k2 = 1;","            } // Y Z X order","            else {","                i1 = 0;","                j1 = 1;","                k1 = 0;","                i2 = 1;","                j2 = 1;","                k2 = 0;","            } // Y X Z order","        }","        // A step of (1,0,0) in (i,j,k) means a step of (1-c,-c,-c) in (x,y,z),","        // a step of (0,1,0) in (i,j,k) means a step of (-c,1-c,-c) in (x,y,z), and","        // a step of (0,0,1) in (i,j,k) means a step of (-c,-c,1-c) in (x,y,z), where","        // c = 1/6.","        const x1 = x0 - i1 + G3; // Offsets for second corner in (x,y,z) coords","        const y1 = y0 - j1 + G3;","        const z1 = z0 - k1 + G3;","        const x2 = x0 - i2 + 2.0 * G3; // Offsets for third corner in (x,y,z) coords","        const y2 = y0 - j2 + 2.0 * G3;","        const z2 = z0 - k2 + 2.0 * G3;","        const x3 = x0 - 1.0 + 3.0 * G3; // Offsets for last corner in (x,y,z) coords","        const y3 = y0 - 1.0 + 3.0 * G3;","        const z3 = z0 - 1.0 + 3.0 * G3;","        // Work out the hashed gradient indices of the four simplex corners","        const ii = i & 255;","        const jj = j & 255;","        const kk = k & 255;","        // Calculate the contribution from the four corners","        let t0 = 0.6 - x0 * x0 - y0 * y0 - z0 * z0;","        if (t0 < 0)","            n0 = 0.0;","        else {","            const gi0 = permMod12[ii + perm[jj + perm[kk]]] * 3;","            t0 *= t0;","            n0 = t0 * t0 * (grad3[gi0] * x0 + grad3[gi0 + 1] * y0 + grad3[gi0 + 2] * z0);","        }","        let t1 = 0.6 - x1 * x1 - y1 * y1 - z1 * z1;","        if (t1 < 0)","            n1 = 0.0;","        else {","            const gi1 = permMod12[ii + i1 + perm[jj + j1 + perm[kk + k1]]] * 3;","            t1 *= t1;","            n1 = t1 * t1 * (grad3[gi1] * x1 + grad3[gi1 + 1] * y1 + grad3[gi1 + 2] * z1);","        }","        let t2 = 0.6 - x2 * x2 - y2 * y2 - z2 * z2;","        if (t2 < 0)","            n2 = 0.0;","        else {","            const gi2 = permMod12[ii + i2 + perm[jj + j2 + perm[kk + k2]]] * 3;","            t2 *= t2;","            n2 = t2 * t2 * (grad3[gi2] * x2 + grad3[gi2 + 1] * y2 + grad3[gi2 + 2] * z2);","        }","        let t3 = 0.6 - x3 * x3 - y3 * y3 - z3 * z3;","        if (t3 < 0)","            n3 = 0.0;","        else {","            const gi3 = permMod12[ii + 1 + perm[jj + 1 + perm[kk + 1]]] * 3;","            t3 *= t3;","            n3 = t3 * t3 * (grad3[gi3] * x3 + grad3[gi3 + 1] * y3 + grad3[gi3 + 2] * z3);","        }","        // Add contributions from each corner to get the final noise value.","        // The result is scaled to stay just inside [-1,1]","        return 32.0 * (n0 + n1 + n2 + n3);","    }","","    /**","     * Samples the noise field in 4 dimensions","     * @param {number} x","     * @param {number} y","     * @param {number} z","     * @returns a number in the interval [-1, 1]","     */","    noise4D(x, y, z, w) {","        const perm = this.perm;","        let n0, n1, n2, n3, n4; // Noise contributions from the five corners","        // Skew the (x,y,z,w) space to determine which cell of 24 simplices we're in","        const s = (x + y + z + w) * F4; // Factor for 4D skewing","        const i = Math.floor(x + s);","        const j = Math.floor(y + s);","        const k = Math.floor(z + s);","        const l = Math.floor(w + s);","        const t = (i + j + k + l) * G4; // Factor for 4D unskewing","        const X0 = i - t; // Unskew the cell origin back to (x,y,z,w) space","        const Y0 = j - t;","        const Z0 = k - t;","        const W0 = l - t;","        const x0 = x - X0; // The x,y,z,w distances from the cell origin","        const y0 = y - Y0;","        const z0 = z - Z0;","        const w0 = w - W0;","        // For the 4D case, the simplex is a 4D shape I won't even try to describe.","        // To find out which of the 24 possible simplices we're in, we need to","        // determine the magnitude ordering of x0, y0, z0 and w0.","        // Six pair-wise comparisons are performed between each possible pair","        // of the four coordinates, and the results are used to rank the numbers.","        let rankx = 0;","        let ranky = 0;","        let rankz = 0;","        let rankw = 0;","        if (x0 > y0)","            rankx++;","        else","            ranky++;","        if (x0 > z0)","            rankx++;","        else","            rankz++;","        if (x0 > w0)","            rankx++;","        else","            rankw++;","        if (y0 > z0)","            ranky++;","        else","            rankz++;","        if (y0 > w0)","            ranky++;","        else","            rankw++;","        if (z0 > w0)","            rankz++;","        else","            rankw++;","        // simplex[c] is a 4-vector with the numbers 0, 1, 2 and 3 in some order.","        // Many values of c will never occur, since e.g. x>y>z>w makes x<z, y<w and x<w","        // impossible. Only the 24 indices which have non-zero entries make any sense.","        // We use a thresholding to set the coordinates in turn from the largest magnitude.","        // Rank 3 denotes the largest coordinate.","        // Rank 2 denotes the second largest coordinate.","        // Rank 1 denotes the second smallest coordinate.","        // The integer offsets for the second simplex corner","        const i1 = rankx >= 3 ? 1 : 0;","        const j1 = ranky >= 3 ? 1 : 0;","        const k1 = rankz >= 3 ? 1 : 0;","        const l1 = rankw >= 3 ? 1 : 0;","        // The integer offsets for the third simplex corner","        const i2 = rankx >= 2 ? 1 : 0;","        const j2 = ranky >= 2 ? 1 : 0;","        const k2 = rankz >= 2 ? 1 : 0;","        const l2 = rankw >= 2 ? 1 : 0;","        // The integer offsets for the fourth simplex corner","        const i3 = rankx >= 1 ? 1 : 0;","        const j3 = ranky >= 1 ? 1 : 0;","        const k3 = rankz >= 1 ? 1 : 0;","        const l3 = rankw >= 1 ? 1 : 0;","        // The fifth corner has all coordinate offsets = 1, so no need to compute that.","        const x1 = x0 - i1 + G4; // Offsets for second corner in (x,y,z,w) coords","        const y1 = y0 - j1 + G4;","        const z1 = z0 - k1 + G4;","        const w1 = w0 - l1 + G4;","        const x2 = x0 - i2 + 2.0 * G4; // Offsets for third corner in (x,y,z,w) coords","        const y2 = y0 - j2 + 2.0 * G4;","        const z2 = z0 - k2 + 2.0 * G4;","        const w2 = w0 - l2 + 2.0 * G4;","        const x3 = x0 - i3 + 3.0 * G4; // Offsets for fourth corner in (x,y,z,w) coords","        const y3 = y0 - j3 + 3.0 * G4;","        const z3 = z0 - k3 + 3.0 * G4;","        const w3 = w0 - l3 + 3.0 * G4;","        const x4 = x0 - 1.0 + 4.0 * G4; // Offsets for last corner in (x,y,z,w) coords","        const y4 = y0 - 1.0 + 4.0 * G4;","        const z4 = z0 - 1.0 + 4.0 * G4;","        const w4 = w0 - 1.0 + 4.0 * G4;","        // Work out the hashed gradient indices of the five simplex corners","        const ii = i & 255;","        const jj = j & 255;","        const kk = k & 255;","        const ll = l & 255;","        // Calculate the contribution from the five corners","        let t0 = 0.6 - x0 * x0 - y0 * y0 - z0 * z0 - w0 * w0;","        if (t0 < 0)","            n0 = 0.0;","        else {","            const gi0 = (perm[ii + perm[jj + perm[kk + perm[ll]]]] % 32) * 4;","            t0 *= t0;","            n0 = t0 * t0 * (grad4[gi0] * x0 + grad4[gi0 + 1] * y0 + grad4[gi0 + 2] * z0 + grad4[gi0 + 3] * w0);","        }","        let t1 = 0.6 - x1 * x1 - y1 * y1 - z1 * z1 - w1 * w1;","        if (t1 < 0)","            n1 = 0.0;","        else {","            const gi1 = (perm[ii + i1 + perm[jj + j1 + perm[kk + k1 + perm[ll + l1]]]] % 32) * 4;","            t1 *= t1;","            n1 = t1 * t1 * (grad4[gi1] * x1 + grad4[gi1 + 1] * y1 + grad4[gi1 + 2] * z1 + grad4[gi1 + 3] * w1);","        }","        let t2 = 0.6 - x2 * x2 - y2 * y2 - z2 * z2 - w2 * w2;","        if (t2 < 0)","            n2 = 0.0;","        else {","            const gi2 = (perm[ii + i2 + perm[jj + j2 + perm[kk + k2 + perm[ll + l2]]]] % 32) * 4;","            t2 *= t2;","            n2 = t2 * t2 * (grad4[gi2] * x2 + grad4[gi2 + 1] * y2 + grad4[gi2 + 2] * z2 + grad4[gi2 + 3] * w2);","        }","        let t3 = 0.6 - x3 * x3 - y3 * y3 - z3 * z3 - w3 * w3;","        if (t3 < 0)","            n3 = 0.0;","        else {","            const gi3 = (perm[ii + i3 + perm[jj + j3 + perm[kk + k3 + perm[ll + l3]]]] % 32) * 4;","            t3 *= t3;","            n3 = t3 * t3 * (grad4[gi3] * x3 + grad4[gi3 + 1] * y3 + grad4[gi3 + 2] * z3 + grad4[gi3 + 3] * w3);","        }","        let t4 = 0.6 - x4 * x4 - y4 * y4 - z4 * z4 - w4 * w4;","        if (t4 < 0)","            n4 = 0.0;","        else {","            const gi4 = (perm[ii + 1 + perm[jj + 1 + perm[kk + 1 + perm[ll + 1]]]] % 32) * 4;","            t4 *= t4;","            n4 = t4 * t4 * (grad4[gi4] * x4 + grad4[gi4 + 1] * y4 + grad4[gi4 + 2] * z4 + grad4[gi4 + 3] * w4);","        }","        // Sum up and scale the result to cover the range [-1,1]","        return 27.0 * (n0 + n1 + n2 + n3 + n4);","    };","}","","gdjs._cameraShake3DExtension = {","    noiseManager: new NoiseManager(),","};",""],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"parameters":[],"objectGroups":[]},{"description":"Generate a number from 2 dimensional simplex noise.","fullName":"2D noise","functionType":"Expression","name":"Noise2d","private":true,"sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const name = eventsFunctionContext.getArgument(\"Name\");\r","const x = eventsFunctionContext.getArgument(\"X\");\r","const y = eventsFunctionContext.getArgument(\"Y\");\r","\r","eventsFunctionContext.returnValue = gdjs._cameraShake3DExtension.noiseManager.getGenerator(name).noise(x, y);"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"expressionType":{"type":"expression"},"parameters":[{"description":"Generator name","name":"Name","type":"string"},{"description":"X coordinate","name":"X","type":"expression"},{"description":"Y coordinate","name":"Y","type":"expression"}],"objectGroups":[]},{"description":"Generate a number from 3 dimensional simplex noise.","fullName":"3D noise","functionType":"Expression","name":"Noise3d","private":true,"sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const name = eventsFunctionContext.getArgument(\"Name\");\r","const x = eventsFunctionContext.getArgument(\"X\");\r","const y = eventsFunctionContext.getArgument(\"Y\");\r","const z = eventsFunctionContext.getArgument(\"Z\");\r","\r","eventsFunctionContext.returnValue = gdjs._cameraShake3DExtension.noiseManager.getGenerator(name).noise(x, y, z);"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"expressionType":{"type":"expression"},"parameters":[{"description":"Generator name","name":"Name","type":"string"},{"description":"X coordinate","name":"X","type":"expression"},{"description":"Y coordinate","name":"Y","type":"expression"},{"description":"Z coordinate","name":"Z","type":"expression"}],"objectGroups":[]},{"description":"Generate a number from 4 dimensional simplex noise.","fullName":"4D noise","functionType":"Expression","name":"Noise4d","private":true,"sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const name = eventsFunctionContext.getArgument(\"Name\");\r","const x = eventsFunctionContext.getArgument(\"X\");\r","const y = eventsFunctionContext.getArgument(\"Y\");\r","const z = eventsFunctionContext.getArgument(\"Z\");\r","const w = eventsFunctionContext.getArgument(\"W\");\r","\r","eventsFunctionContext.returnValue = gdjs._cameraShake3DExtension.noiseManager.getGenerator(name).noise(x, y, z, w);"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"expressionType":{"type":"expression"},"parameters":[{"description":"Generator name","name":"Name","type":"string"},{"description":"X coordinate","name":"X","type":"expression"},{"description":"Y coordinate","name":"Y","type":"expression"},{"description":"Z coordinate","name":"Z","type":"expression"},{"description":"W coordinate","name":"W","type":"expression"}],"objectGroups":[]},{"description":"Create a noise generator with default settings (frequency = 1,  octaves = 1, persistence = 0.5, lacunarity = 2).","fullName":"Create a noise generator","functionType":"Action","name":"Create","private":true,"sentence":"Create a noise generator named _PARAM1_","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const name = eventsFunctionContext.getArgument(\"Name\");\r","\r","gdjs._cameraShake3DExtension.noiseManager.getGenerator(name);"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"parameters":[{"description":"Generator name","name":"Name","type":"string"}],"objectGroups":[]},{"description":"Delete a noise generator and loose its settings.","fullName":"Delete a noise generator","functionType":"Action","name":"Delete","private":true,"sentence":"Delete _PARAM1_ noise generator","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const name = eventsFunctionContext.getArgument(\"Name\");\r","\r","gdjs._cameraShake3DExtension.noiseManager.deleteGenerator(name);"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"parameters":[{"description":"Generator name","name":"Name","type":"string"}],"objectGroups":[]},{"description":"Delete all noise generators and loose their settings.","fullName":"Delete all noise generators","functionType":"Action","name":"DeleteAll","private":true,"sentence":"Delete all noise generators","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":"gdjs._cameraShake3DExtension.noiseManager.deleteAllGenerators();","parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"parameters":[],"objectGroups":[]},{"description":"The seed is a number used to generate the random noise. Setting the same seed will result in the same random noise generation. It's for example useful to generate the same world, by saving this seed value and reusing it later to generate again a world.","fullName":"Noise seed","functionType":"Action","name":"SetSeed","private":true,"sentence":"Change the noise seed to _PARAM1_","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":"gdjs._cameraShake3DExtension.noiseManager.setSeed(eventsFunctionContext.getArgument(\"Seed\"));","parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"parameters":[{"description":"Seed","longDescription":"15 digits numbers maximum","name":"Seed","type":"expression"}],"objectGroups":[]},{"description":"Change the looping period on X used for noise generation. The noise will wrap-around on X.","fullName":"Noise looping period on X","functionType":"Action","name":"SetLoopPeriodX","private":true,"sentence":"Change the looping period on X of _PARAM2_: _PARAM1_","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const name = eventsFunctionContext.getArgument(\"Name\");\r","\r","gdjs._cameraShake3DExtension.noiseManager.getGenerator(name).xLoopPeriod = eventsFunctionContext.getArgument(\"LoopPeriod\");"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"parameters":[{"description":"Looping period on X","name":"LoopPeriod","type":"expression"},{"description":"Generator name","name":"Name","type":"string"}],"objectGroups":[]},{"description":"Change the looping period on Y used for noise generation. The noise will wrap-around on Y.","fullName":"Noise looping period on Y","functionType":"Action","name":"SetLoopPeriodY","private":true,"sentence":"Change the looping period on Y of _PARAM2_: _PARAM1_","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const name = eventsFunctionContext.getArgument(\"Name\");\r","\r","gdjs._cameraShake3DExtension.noiseManager.getGenerator(name).yLoopPeriod = eventsFunctionContext.getArgument(\"LoopPeriod\");"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"description":"Looping period on Y","name":"LoopPeriod","type":"expression"},{"description":"Generator name","name":"Name","type":"string"}],"objectGroups":[]},{"description":"Change the base frequency used for noise generation. A lower frequency will zoom in the noise.","fullName":"Noise base frequency","functionType":"Action","name":"SetFrequency","private":true,"sentence":"Change the noise frequency of _PARAM2_: _PARAM1_","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const name = eventsFunctionContext.getArgument(\"Name\");\r","\r","gdjs._cameraShake3DExtension.noiseManager.getGenerator(name).frequency = eventsFunctionContext.getArgument(\"Frequency\");"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"parameters":[{"description":"Frequency","name":"Frequency","type":"expression"},{"description":"Generator name","name":"Name","type":"string"}],"objectGroups":[]},{"description":"Change the number of octaves used for noise generation. It can be seen as layers of noise with different zoom.","fullName":"Noise octaves","functionType":"Action","name":"SetOctaves","private":true,"sentence":"Change the number of noise octaves of _PARAM2_: _PARAM1_","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const name = eventsFunctionContext.getArgument(\"Name\");\r","\r","gdjs._cameraShake3DExtension.noiseManager.getGenerator(name).octaves = eventsFunctionContext.getArgument(\"Octaves\");"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"parameters":[{"description":"Octaves","name":"Octaves","type":"expression"},{"description":"Generator name","name":"Name","type":"string"}],"objectGroups":[]},{"description":"Change the persistence used for noise generation. At its default value \"0.5\", it halves the noise amplitude at each octave.","fullName":"Noise persistence","functionType":"Action","name":"SetPersistence","private":true,"sentence":"Change the noise persistence of _PARAM2_: _PARAM1_","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const name = eventsFunctionContext.getArgument(\"Name\");\r","\r","gdjs._cameraShake3DExtension.noiseManager.getGenerator(name).persistence = eventsFunctionContext.getArgument(\"Persistence\");"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"parameters":[{"description":"Persistence","name":"Persistence","type":"expression"},{"description":"Generator name","name":"Name","type":"string"}],"objectGroups":[]},{"description":"Change the lacunarity used for noise generation. At its default value \"2\", it doubles the frequency at each octave.","fullName":"Noise lacunarity","functionType":"Action","name":"SetLacunarity","private":true,"sentence":"Change the noise lacunarity of _PARAM2_: _PARAM1_","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const name = eventsFunctionContext.getArgument(\"Name\");\r","\r","gdjs._cameraShake3DExtension.noiseManager.getGenerator(name).lacunarity = eventsFunctionContext.getArgument(\"Lacunarity\");"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"parameters":[{"description":"Lacunarity","name":"Lacunarity","type":"expression"},{"description":"Generator name","name":"Name","type":"string"}],"objectGroups":[]},{"description":"The seed used for noise generation.","fullName":"Noise seed","functionType":"Expression","name":"Seed","private":true,"sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":"eventsFunctionContext.returnValue = gdjs._cameraShake3DExtension.noiseManager.seed;","parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[],"objectGroups":[]},{"description":"The base frequency used for noise generation.","fullName":"Noise base frequency","functionType":"Expression","name":"Frequency","private":true,"sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const name = eventsFunctionContext.getArgument(\"Name\");\r","\r","eventsFunctionContext.returnValue = gdjs._cameraShake3DExtension.noiseManager.getGenerator(name).frequency;"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[{"description":"Generator name","name":"Name","type":"string"}],"objectGroups":[]},{"description":"The number of octaves used for noise generation.","fullName":"Noise octaves number","functionType":"Expression","name":"Octaves","private":true,"sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const name = eventsFunctionContext.getArgument(\"Name\");\r","\r","eventsFunctionContext.returnValue = gdjs._cameraShake3DExtension.noiseManager.getGenerator(name).octaves;"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[{"description":"Generator name","name":"Name","type":"string"}],"objectGroups":[]},{"description":"The persistence used for noise generation.","fullName":"Noise persistence","functionType":"Expression","name":"Persistence","private":true,"sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const name = eventsFunctionContext.getArgument(\"Name\");\r","\r","eventsFunctionContext.returnValue = gdjs._cameraShake3DExtension.noiseManager.getGenerator(name).persistence;"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[{"description":"Generator name","name":"Name","type":"string"}],"objectGroups":[]},{"description":"The lacunarity used for noise generation.","fullName":"Noise lacunarity","functionType":"Expression","name":"Lacunarity","private":true,"sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const name = eventsFunctionContext.getArgument(\"Name\");\r","\r","eventsFunctionContext.returnValue = gdjs._cameraShake3DExtension.noiseManager.getGenerator(name).lacunarity;"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[{"description":"Generator name","name":"Name","type":"string"}],"objectGroups":[]}],"eventsBasedBehaviors":[],"eventsBasedObjects":[]},{"author":"","category":"Camera","extensionNamespace":"","fullName":"First person 3D camera","gdevelopVersion":">=5.5.222","helpPath":"","iconUrl":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjMsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iSWNvbnMiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMzIgMzIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMyIDMyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KCS5zdDB7ZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDoxMDt9DQoJLnN0MXtmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjEwO30NCjwvc3R5bGU+DQo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMjcsMTZjMCwwLTQuOSw3LTExLDdTNSwxNiw1LDE2czQuOS03LDExLTdTMjcsMTYsMjcsMTZ6Ii8+DQo8Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSIxNiIgY3k9IjE2IiByPSIzIi8+DQo8cG9seWxpbmUgY2xhc3M9InN0MCIgcG9pbnRzPSIzLDkgMywzIDksMyAiLz4NCjxwb2x5bGluZSBjbGFzcz0ic3QwIiBwb2ludHM9IjksMjkgMywyOSAzLDIzICIvPg0KPHBvbHlsaW5lIGNsYXNzPSJzdDAiIHBvaW50cz0iMjksMjMgMjksMjkgMjMsMjkgIi8+DQo8cG9seWxpbmUgY2xhc3M9InN0MCIgcG9pbnRzPSIyMywzIDI5LDMgMjksOSAiLz4NCjwvc3ZnPg0K","name":"FirstPersonCamera","previewIconUrl":"https://asset-resources.gdevelop.io/public-resources/Icons/Line Hero Pack/Master/SVG/Security and Protection/e8248ffd504c314e6a9d9d560c3a0fdad3398a5f125ae6a4c0654d4e68c86376_Security and Protection_security_protection_eye_scan_lock.svg","shortDescription":"Move the camera to look though objects eyes.","version":"1.0.4","description":["Move the camera to look though objects eyes.","","This extension can be used with the \"Mouse pointer lock\" or \"Gamepad\" extension to build a first person camera.","","The first person example uses this extension ([open the project online](https://editor.gdevelop.io/?project=example://3d-first-person))."],"origin":{"identifier":"FirstPersonCamera","name":"gdevelop-extension-store"},"tags":["3d","camera","fps"],"authorIds":["IWykYNRvhCZBN3vEgKEbBPOR3Oc2","m8kleQHonagHWsvILDhyJhgVhuF2"],"dependencies":[],"globalVariables":[],"sceneVariables":[],"eventsFunctions":[{"description":"Move the camera to look though the object eyes. The object must look to the right when all its angles are 0 and the top of its head be toward Z+.","fullName":"Look through object eyes","functionType":"Action","group":"Layers and cameras","name":"LookFromObjectEyes","private":true,"sentence":"Move the camera of _PARAM2_ to look though _PARAM1_ eyes","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"CentreCamera"},"parameters":["","Object","","Layer",""]},{"type":{"value":"Scene3D::SetCameraZ"},"parameters":["","=","Object.Z()","Layer",""]},{"type":{"value":"Scene3D::SetCameraRotationX"},"parameters":["","=","- Object.RotationY() + 90","Layer",""]},{"type":{"value":"Scene3D::SetCameraRotationY"},"parameters":["","=","Object.RotationX()","Layer",""]},{"type":{"value":"SetCameraAngle"},"parameters":["","=","Object.Angle() + 90","Layer",""]}]}],"parameters":[{"description":"Object","name":"Object","supplementaryInformation":"Scene3D::Cube3DObject","type":"objectList"},{"description":"Layer","name":"Layer","type":"layer"}],"objectGroups":[]},{"description":"Move the camera to look though the object eyes. The object must look to the right when all its angles are 0 and the top of its head be toward Z+.","fullName":"Look through object eyes","functionType":"Action","group":"Layers and cameras","name":"LookFrom3DObjectEyes","sentence":"Move the camera of _PARAM3_ to look though _PARAM1_ eyes","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"CentreCamera"},"parameters":["","Object","","Layer",""]},{"type":{"value":"Scene3D::SetCameraZ"},"parameters":["","=","Object.Object3D::Z()","Layer",""]},{"type":{"value":"Scene3D::SetCameraRotationX"},"parameters":["","=","- Object.Object3D::RotationY() + 90","Layer",""]},{"type":{"value":"Scene3D::SetCameraRotationY"},"parameters":["","=","Object.Object3D::RotationX()","Layer",""]},{"type":{"value":"SetCameraAngle"},"parameters":["","=","Object.Angle() + 90","Layer",""]}]}],"parameters":[{"description":"3D Object","name":"Object","type":"objectList"},{"description":"3D capability","name":"Object3D","supplementaryInformation":"Scene3D::Base3DBehavior","type":"behavior"},{"description":"Layer","name":"Layer","type":"layer"}],"objectGroups":[]}],"eventsBasedBehaviors":[],"eventsBasedObjects":[]},{"author":"Bouh","category":"Input","extensionNamespace":"","fullName":"Gamepads (controllers)","gdevelopVersion":">=5.5.222","helpPath":"/all-features/gamepad","iconUrl":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0ibWRpLWdhbWVwYWQtdmFyaWFudC1vdXRsaW5lIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZD0iTTYsOUg4VjExSDEwVjEzSDhWMTVINlYxM0g0VjExSDZWOU0xOC41LDlBMS41LDEuNSAwIDAsMSAyMCwxMC41QTEuNSwxLjUgMCAwLDEgMTguNSwxMkExLjUsMS41IDAgMCwxIDE3LDEwLjVBMS41LDEuNSAwIDAsMSAxOC41LDlNMTUuNSwxMkExLjUsMS41IDAgMCwxIDE3LDEzLjVBMS41LDEuNSAwIDAsMSAxNS41LDE1QTEuNSwxLjUgMCAwLDEgMTQsMTMuNUExLjUsMS41IDAgMCwxIDE1LjUsMTJNMTcsNUE3LDcgMCAwLDEgMjQsMTJBNyw3IDAgMCwxIDE3LDE5QzE1LjA0LDE5IDEzLjI3LDE4LjIgMTIsMTYuOUMxMC43MywxOC4yIDguOTYsMTkgNywxOUE3LDcgMCAwLDEgMCwxMkE3LDcgMCAwLDEgNyw1SDE3TTcsN0E1LDUgMCAwLDAgMiwxMkE1LDUgMCAwLDAgNywxN0M4LjY0LDE3IDEwLjA5LDE2LjIxIDExLDE1SDEzQzEzLjkxLDE2LjIxIDE1LjM2LDE3IDE3LDE3QTUsNSAwIDAsMCAyMiwxMkE1LDUgMCAwLDAgMTcsN0g3WiIgLz48L3N2Zz4=","name":"Gamepads","previewIconUrl":"https://resources.gdevelop-app.com/assets/Icons/gamepad-variant-outline.svg","shortDescription":"Add support for gamepads (or other controllers) to your game, giving access to information such as button presses, axis positions, trigger pressure, etc...","version":"0.7.0","description":["Add support for gamepads (or other controllers).","","It gives access to:","- button presses","- axis positions and force","- trigger pressure","- configurable deadzone","- vibration","- automatic mappers for platformer characters and top-down movement","","The Bomberman-like example handles 4 players with gamepads ([open the project online](https://editor.gdevelop.io/?project=example://goose-bomberman))."],"origin":{"identifier":"Gamepads","name":"gdevelop-extension-store"},"tags":["controllers","gamepads","joysticks","axis","xbox","ps4","platformer","platform","top-down"],"authorIds":["2OwwM8ToR9dx9RJ2sAKTcrLmCB92","taRwmWxwAFYFL9yyBwB3cwBw0BO2","mnImQKdn8nQxwzkS5D6a1JB27V23"],"dependencies":[],"globalVariables":[],"sceneVariables":[],"eventsFunctions":[{"fullName":"","functionType":"Action","name":"onFirstSceneLoaded","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[]},{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["//Define an new private object javascript for the gamepad extension\r","gdjs._extensionController = {\r","    players: {\r","        0: { mapping: 'DEFAULT', lastButtonUsed: -1, deadzone: 0.2, previousFrameStateButtons: {}, rumble: {} },\r","        1: { mapping: 'DEFAULT', lastButtonUsed: -1, deadzone: 0.2, previousFrameStateButtons: {}, rumble: {} },\r","        2: { mapping: 'DEFAULT', lastButtonUsed: -1, deadzone: 0.2, previousFrameStateButtons: {}, rumble: {} },\r","        3: { mapping: 'DEFAULT', lastButtonUsed: -1, deadzone: 0.2, previousFrameStateButtons: {}, rumble: {} },\r","    },\r","    lastActiveController: -1, // Last active controller\r","    controllerButtonNames: { //Map associating controller button ids to button names\r","        \"XBOX\": {\r","            0: \"A\",\r","            1: \"B\",\r","            2: \"X\",\r","            3: \"Y\",\r","            4: \"LB\",\r","            5: \"RB\",\r","            6: \"LT\",\r","            7: \"RT\",\r","            8: \"BACK\",\r","            9: \"START\",\r","            10: \"CLICK_STICK_LEFT\",\r","            11: \"CLICK_STICK_RIGHT\",\r","            12: \"UP\",\r","            13: \"DOWN\",\r","            14: \"LEFT\",\r","            15: \"RIGHT\",\r","            16: \"NONE\",\r","            17: \"NONE\"\r","        },\r","        \"PS4\": {\r","            0: \"CROSS\",\r","            1: \"CIRCLE\",\r","            2: \"SQUARE\",\r","            3: \"TRIANGLE\",\r","            4: \"L1\",\r","            5: \"R1\",\r","            6: \"L2\",\r","            7: \"R2\",\r","            8: \"SHARE\",\r","            9: \"OPTIONS\",\r","            10: \"CLICK_STICK_LEFT\",\r","            11: \"CLICK_STICK_RIGHT\",\r","            12: \"UP\",\r","            13: \"DOWN\",\r","            14: \"LEFT\",\r","            15: \"RIGHT\",\r","            16: \"PS_BUTTON\",\r","            17: \"CLICK_TOUCHPAD\"\r","        }\r","    }\r","};\r","\r","gdjs._extensionController.getInputString = function (type, buttonId) {\r","    const controllerButtonNames = gdjs._extensionController.controllerButtonNames;\r","    if (controllerButtonNames[type] !== undefined) {\r","        return controllerButtonNames[type][buttonId];\r","    }\r","\r","    return \"UNKNOWN_BUTTON\";\r","}\r","\r","gdjs._extensionController.axisToAngle = function (deltaX, deltaY) {\r","    const rad = Math.atan2(deltaY, deltaX);\r","    const deg = rad * (180 / Math.PI);\r","    return deg;\r","}\r","\r","gdjs._extensionController.isXbox = function (gamepad) {\r","    return (gamepad ? (\r","        gamepad.id.toUpperCase().indexOf(\"XBOX\") !== -1\r","        // \"XINPUT\" cannot be used to check if it is a xbox controller is just a generic\r","        // name reported in Firefox corresponding to the driver being used by the controller\r","        // https://gamefaqs.gamespot.com/boards/916373-pc/73341312?page=1\r","    ) : false);\r","}\r","\r","//Returns the new value taking into account the dead zone for the player_ID given\r","gdjs._extensionController.getNormalizedAxisValue = function (v, player_ID) {\r","    //    gdjs._extensionController = gdjs._extensionController || { deadzone: 0.2 };\r","\r","    // Anything smaller than this is assumed to be 0,0\r","    const DEADZONE = gdjs._extensionController.players[player_ID].deadzone;\r","\r","    if (Math.abs(v) < DEADZONE) {\r","        // In the dead zone, set to 0\r","        v = 0;\r","\r","        if (v == null) {\r","            return 0;\r","        } else {\r","            return v;\r","        }\r","\r","    } else {\r","        // We're outside the dead zone, but we'd like to smooth\r","        // this value out so it still runs nicely between 0..1.\r","        // That is, we don't want it to jump suddenly from 0 to\r","        // DEADZONE.\r","\r","        // Remap v from\r","        //    DEADZONE..1 to 0..(1-DEADZONE)\r","        // or from\r","        //    -1..-DEADZONE to -(1-DEADZONE)..0\r","\r","        v = v - Math.sign(v) * DEADZONE;\r","\r","        // Remap v from\r","        //    0..(1-DEADZONE) to 0..1\r","        // or from\r","        //    -(1-DEADZONE)..0 to -1..0\r","\r","        return v / (1 - DEADZONE);\r","    }\r","};"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"parameters":[],"objectGroups":[]},{"fullName":"","functionType":"Action","name":"onScenePostEvents","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[]},{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["//Each time a player press a button i save the last button pressed for the next frame","/** @type {Gamepad[]} */","const gamepads = navigator.getGamepads ? navigator.getGamepads() : (navigator.webkitGetGamepads ? navigator.webkitGetGamepads() : []);","","//Get function parameter","let countPlayers = Object.keys(gdjs._extensionController.players).length;","","//Repeat for each players","for (let i = 0; i < countPlayers; i++) {","    let gamepad = gamepads[i]; // Get the gamepad of the player","","    //We have to keep this condition because if the user hasn't plugged in his controller yet, we can't get the controller in the gamepad variable.","    if (gamepad == null) {","        continue;","    }","","    for (let b = 0; b < Object.keys(gamepad.buttons).length; b++) { //For each buttons","        if (gamepad.buttons[b].pressed) { //One of them is pressed","            gdjs._extensionController.players[i].lastButtonUsed = b; //Save the button pressed","","            //Save the state of the button for the next frame.","            gdjs._extensionController.players[i].previousFrameStateButtons[b] = { pressed: true };","","            // Update Last Active Controller","            gdjs._extensionController.lastActiveController = i;","        } else {","            gdjs._extensionController.players[i].previousFrameStateButtons[b] = { pressed: false };","        }","    }","","","    gdjs._extensionController.players[i].rumble.elapsedTime += runtimeScene.getElapsedTime(runtimeScene) / 1000;","    if (","        gdjs._extensionController.players[i].rumble.duration - gdjs._extensionController.players[i].rumble.elapsedTime <= 0 &&","        (gdjs._extensionController.players[i].rumble.weakMagnitude || gdjs._extensionController.players[i].rumble.strongMagnitude)","    ) {","        gdjs._extensionController.players[i].rumble.weakMagnitude = 0;","        gdjs._extensionController.players[i].rumble.strongMagnitude = 0;","    }","","","}",""],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"parameters":[],"objectGroups":[]},{"fullName":"Accelerated speed","functionType":"Expression","name":"AcceleratedSpeed","private":true,"sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["AcceleratedSpeed","=","CurrentSpeed"]}],"events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberVariable"},"parameters":["TargetedSpeed","<","0"]}],"actions":[],"events":[{"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Reduce the speed to match the stick force."},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberVariable"},"parameters":["CurrentSpeed","<","TargetedSpeed"]}],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["AcceleratedSpeed","=","min(TargetedSpeed, CurrentSpeed + Acceleration * TimeDelta())"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberVariable"},"parameters":["CurrentSpeed",">","TargetedSpeed"]},{"type":{"value":"NumberVariable"},"parameters":["CurrentSpeed","<","0"]}],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["AcceleratedSpeed","-","Acceleration * TimeDelta()"]}]},{"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Turn back at least as fast as it would stop."},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberVariable"},"parameters":["CurrentSpeed",">=","0"]}],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["AcceleratedSpeed","=","max(TargetedSpeed, CurrentSpeed - max(Acceleration , Deceleration) * TimeDelta())"]}]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberVariable"},"parameters":["TargetedSpeed",">","0"]}],"actions":[],"events":[{"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Reduce the speed to match the stick force."},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberVariable"},"parameters":["CurrentSpeed",">","TargetedSpeed"]}],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["AcceleratedSpeed","=","max(TargetedSpeed, CurrentSpeed - Acceleration * TimeDelta())"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberVariable"},"parameters":["CurrentSpeed","<","TargetedSpeed"]},{"type":{"value":"NumberVariable"},"parameters":["CurrentSpeed",">","0"]}],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["AcceleratedSpeed","+","Acceleration * TimeDelta()"]}]},{"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Turn back at least as fast as it would stop."},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberVariable"},"parameters":["CurrentSpeed","<=","0"]}],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["AcceleratedSpeed","=","min(TargetedSpeed, CurrentSpeed + max(Acceleration , Deceleration) * TimeDelta())"]}]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberVariable"},"parameters":["TargetedSpeed","=","0"]}],"actions":[],"events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberVariable"},"parameters":["CurrentSpeed","<","0"]}],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["AcceleratedSpeed","=","min(0, CurrentSpeed + Acceleration * TimeDelta())"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberVariable"},"parameters":["CurrentSpeed",">","0"]}],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["AcceleratedSpeed","=","max(0, CurrentSpeed - Acceleration * TimeDelta())"]}]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["clamp(AcceleratedSpeed, -SpeedMax, SpeedMax)"]}]}],"variables":[{"name":"AcceleratedSpeed","type":"number","value":0.0}]}],"expressionType":{"type":"expression"},"parameters":[{"description":"Current speed","name":"CurrentSpeed","type":"expression"},{"description":"Targeted speed","name":"TargetedSpeed","type":"expression"},{"description":"Max speed","name":"SpeedMax","type":"expression"},{"description":"Acceleration","name":"Acceleration","type":"expression"},{"description":"Deceleration","name":"Deceleration","type":"expression"}],"objectGroups":[]},{"description":"Get the value of the pressure on a gamepad trigger.","fullName":"Pressure on a gamepad trigger","functionType":"Expression","name":"TriggerPressure","sentence":"Player _PARAM1_ push axis _PARAM2_ to _PARAM3_","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["/** @type {Gamepad[]} */\r","const gamepads = navigator.getGamepads ? navigator.getGamepads() : (navigator.webkitGetGamepads ? navigator.webkitGetGamepads() : []);\r","\r","//Get function parameters\r","const playerId = eventsFunctionContext.getArgument(\"player_ID\") - 1;\r","const trigger = eventsFunctionContext.getArgument(\"trigger\").toUpperCase();\r","\r","if (playerId < 0 || playerId > 4) {\r","    console.error('Parameter gamepad identifier in expression: \"Pressure on a gamepad trigger\", is not valid number, must be between 0 and 4.');\r","    return;\r","}\r","if (trigger != \"LT\" && trigger != \"RT\" && trigger != \"L2\" && trigger != \"R2\") {\r","    console.error('Parameter trigger is not valid in expression: \"Pressure on a gamepad trigger\"');\r","    return;\r","}\r","\r","const gamepad = gamepads[playerId];\r","\r","//we need keep this condition because when use have not yet plug her controller we can't get the controller in the gamepad variable.\r","if (gamepad == null) return;\r","\r","switch (trigger) {\r","    case 'LT':\r","    case 'L2':\r","        eventsFunctionContext.returnValue = gamepad.buttons[6].value;\r","        break;\r","\r","    case 'RT':\r","    case 'R2':\r","        eventsFunctionContext.returnValue = gamepad.buttons[7].value;\r","        break;\r","\r","    default:\r","        eventsFunctionContext.returnValue = -1;\r","        break;\r","}"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"expressionType":{"type":"expression"},"parameters":[{"description":"The gamepad identifier: 1, 2, 3 or 4","name":"player_ID","type":"expression"},{"description":"Trigger button","name":"trigger","supplementaryInformation":"[\"LT\",\"RT\",\"L2\",\"R2\"]","type":"stringWithSelector"}],"objectGroups":[]},{"description":"the force of gamepad stick (from 0 to 1).","fullName":"Stick force","functionType":"ExpressionAndCondition","name":"StickForce","sentence":"the gamepad _PARAM1_ _PARAM2_ stick force","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["/** @type {Gamepad[]} */\r","const gamepads = navigator.getGamepads ? navigator.getGamepads() : (navigator.webkitGetGamepads ? navigator.webkitGetGamepads() : []);\r","\r","//Get function parameters\r","const playerId = eventsFunctionContext.getArgument(\"player_ID\") - 1;\r","const stick = eventsFunctionContext.getArgument(\"stick\").toUpperCase();\r","\r","\r","if (playerId < 0 || playerId > 4) {\r","    console.error('Parameter gamepad identifier is not valid in expression: \"Value of a stick force\"');\r","    return;\r","}\r","\r","if (stick !== \"LEFT\" && stick !== \"RIGHT\") {\r","    console.error('Parameter stick is not valid in expression: \"Value of a stick force\"');\r","    return;\r","}\r","\r","const gamepad = gamepads[playerId];\r","\r","//we need keep this condition because when use have not yet plug her controller we can't get the controller in the gamepad variable.\r","if (gamepad == null) return;\r","\r","\r","switch (stick) {\r","    case 'LEFT':\r","        eventsFunctionContext.returnValue = gdjs.evtTools.common.clamp(Math.abs(gdjs._extensionController.getNormalizedAxisValue(gamepad.axes[0], playerId)) + Math.abs(gdjs._extensionController.getNormalizedAxisValue(gamepad.axes[1], playerId)), 0, 1);\r","        break;\r","\r","    case 'RIGHT':\r","        eventsFunctionContext.returnValue = gdjs.evtTools.common.clamp(Math.abs(gdjs._extensionController.getNormalizedAxisValue(gamepad.axes[2], playerId)) + Math.abs(gdjs._extensionController.getNormalizedAxisValue(gamepad.axes[3], playerId)), 0, 1);\r","        break;\r","\r","    default:\r","        eventsFunctionContext.returnValue = -1;\r","        break;\r","}"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"expressionType":{"type":"expression"},"parameters":[{"description":"The gamepad identifier: 1, 2, 3 or 4","name":"player_ID","type":"expression"},{"description":"Stick: \"Left\" or \"Right\"","name":"stick","supplementaryInformation":"[\"Left\",\"Right\"]","type":"stringWithSelector"}],"objectGroups":[]},{"description":"Get the rotation value of a gamepad stick.\nIf the deadzone value is high, the angle value is rounded to main axes, left, left, up, down.\nAn zero deadzone value give a total freedom on the angle value.","fullName":"Value of a stick rotation (deprecated)","functionType":"Expression","name":"StickRotationValue","private":true,"sentence":"Player _PARAM1_ push axis _PARAM2_ to _PARAM3_","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["Gamepads::StickAngle(player_ID, stick)"]}]}],"expressionType":{"type":"expression"},"parameters":[{"description":"The gamepad identifier: 1, 2, 3 or 4","name":"player_ID","type":"expression"},{"description":"Stick: \"Left\" or \"Right\"","name":"stick","supplementaryInformation":"[\"Left\",\"Right\"]","type":"stringWithSelector"}],"objectGroups":[]},{"description":"Return the angle of a gamepad stick.\nIf the deadzone value is high, the angle value is rounded to main axes, left, left, up, down.\nAn zero deadzone value give a total freedom on the angle value.","fullName":"Stick angle","functionType":"Expression","name":"StickAngle","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["/** @type {Gamepad[]} */\r","const gamepads = navigator.getGamepads ? navigator.getGamepads() : (navigator.webkitGetGamepads ? navigator.webkitGetGamepads() : []);\r","\r","//Get function parameters\r","const playerId = eventsFunctionContext.getArgument(\"player_ID\") - 1;\r","const stick = eventsFunctionContext.getArgument(\"stick\").toUpperCase();\r","\r","\r","if (playerId < 0 || playerId > 4) {\r","    console.error('Parameter gamepad identifier is not valid in expression: \"Value of a stick rotation\"');\r","    return;\r","}\r","if (stick !== \"LEFT\" && stick !== \"RIGHT\") {\r","    console.error('Parameter stick is not valid in expression: \"Value of a stick rotation\"');\r","    return;\r","}\r","const gamepad = gamepads[playerId];\r","\r","//we need keep this condition because when use have not yet plug her controller we can't get the controller in the gamepad variable.\r","if (gamepad == null) return;\r","\r","switch (stick) {\r","    case 'LEFT':\r","        eventsFunctionContext.returnValue = gdjs._extensionController.axisToAngle(gdjs._extensionController.getNormalizedAxisValue(gamepad.axes[0], playerId), gdjs._extensionController.getNormalizedAxisValue(gamepad.axes[1], playerId));\r","        break;\r","\r","    case 'RIGHT':\r","        eventsFunctionContext.returnValue = gdjs._extensionController.axisToAngle(gdjs._extensionController.getNormalizedAxisValue(gamepad.axes[2], playerId), gdjs._extensionController.getNormalizedAxisValue(gamepad.axes[3], playerId));\r","        break;\r","\r","    default:\r","        eventsFunctionContext.returnValue = -1;\r","        break;\r","}"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"expressionType":{"type":"expression"},"parameters":[{"description":"The gamepad identifier: 1, 2, 3 or 4","name":"player_ID","type":"expression"},{"description":"Stick: \"Left\" or \"Right\"","name":"stick","supplementaryInformation":"[\"Left\",\"Right\"]","type":"stringWithSelector"}],"objectGroups":[]},{"description":"Get the value of axis of a gamepad stick.","fullName":"Value of a gamepad axis (deprecated)","functionType":"Expression","name":"AxisValue","private":true,"sentence":"Player _PARAM1_ push axis _PARAM2_ to _PARAM3_","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["/** @type {Gamepad[]} */\r","const gamepads = navigator.getGamepads ? navigator.getGamepads() : (navigator.webkitGetGamepads ? navigator.webkitGetGamepads() : []);\r","\r","//Get function parameters\r","const playerId = eventsFunctionContext.getArgument(\"player_ID\") - 1;\r","const stick = eventsFunctionContext.getArgument(\"stick\").toUpperCase();\r","const direction = eventsFunctionContext.getArgument(\"direction\").toUpperCase();\r","\r","if (playerId < 0 || playerId > 4) {\r","    console.error('Parameter gamepad identifier is not valid in expression: \"Value of a gamepad axis\"');\r","    return;\r","}\r","if (stick != \"LEFT\" && stick != \"RIGHT\") {\r","    console.error('Parameter stick is not valid in expression: \"Value of a gamepad axis\"');\r","    return;\r","}\r","if (direction != \"UP\" && direction != \"DOWN\" && direction != \"LEFT\" && direction != \"RIGHT\" && direction != \"HORIZONTAL\" && direction != \"VERTICAL\") {\r","    console.error('Parameter direction is not valid in expression: \"Value of a gamepad axis\"');\r","    return;\r","}\r","const gamepad = gamepads[playerId];\r","\r","//we need keep this condition because when use have not yet plug her controller we can't get the controller in the gamepad variable.\r","if (gamepad == null) return;\r","\r","let parameterError = false;\r","switch (stick) {\r","    case 'LEFT':\r","        switch (direction) {\r","            case 'LEFT':\r","                if (gdjs._extensionController.getNormalizedAxisValue(gamepad.axes[0], playerId) < 0) {\r","                    eventsFunctionContext.returnValue = -gdjs._extensionController.getNormalizedAxisValue(gamepad.axes[0], playerId);\r","                }\r","                break;\r","\r","            case 'RIGHT':\r","                if (gdjs._extensionController.getNormalizedAxisValue(gamepad.axes[0], playerId) > 0) {\r","                    eventsFunctionContext.returnValue = gdjs._extensionController.getNormalizedAxisValue(gamepad.axes[0], playerId);\r","                }\r","                break;\r","\r","            case 'UP':\r","                if (gdjs._extensionController.getNormalizedAxisValue(gamepad.axes[1], playerId) < 0) {\r","                    eventsFunctionContext.returnValue = -gdjs._extensionController.getNormalizedAxisValue(gamepad.axes[1], playerId);\r","                }\r","                break;\r","\r","            case 'DOWN':\r","                if (gdjs._extensionController.getNormalizedAxisValue(gamepad.axes[1], playerId) > 0) {\r","                    eventsFunctionContext.returnValue = gdjs._extensionController.getNormalizedAxisValue(gamepad.axes[1], playerId);\r","                }\r","                break;\r","\r","            case \"HORIZONTAL\":\r","                eventsFunctionContext.returnValue = gdjs._extensionController.getNormalizedAxisValue(gamepad.axes[0], playerId);\r","                break;\r","\r","            case \"VERTICAL\":\r","                eventsFunctionContext.returnValue = gdjs._extensionController.getNormalizedAxisValue(gamepad.axes[1], playerId);\r","                break;\r","\r","            default:\r","                break;\r","        }\r","        break;\r","\r","    case 'RIGHT':\r","        switch (direction) {\r","            case 'LEFT':\r","                if (gdjs._extensionController.getNormalizedAxisValue(gamepad.axes[2], playerId) < 0) {\r","                    eventsFunctionContext.returnValue = -gdjs._extensionController.getNormalizedAxisValue(gamepad.axes[2], playerId);\r","                }\r","                break;\r","\r","            case 'RIGHT':\r","                if (gdjs._extensionController.getNormalizedAxisValue(gamepad.axes[2], playerId) > 0) {\r","                    eventsFunctionContext.returnValue = gdjs._extensionController.getNormalizedAxisValue(gamepad.axes[2], playerId);\r","                }\r","                break;\r","\r","            case 'UP':\r","                if (gdjs._extensionController.getNormalizedAxisValue(gamepad.axes[3], playerId) < 0) {\r","                    eventsFunctionContext.returnValue = -gdjs._extensionController.getNormalizedAxisValue(gamepad.axes[3], playerId);\r","                }\r","                break;\r","\r","            case 'DOWN':\r","                if (gdjs._extensionController.getNormalizedAxisValue(gamepad.axes[3], playerId) > 0) {\r","                    eventsFunctionContext.returnValue = gdjs._extensionController.getNormalizedAxisValue(gamepad.axes[3], playerId);\r","                }\r","                break;\r","\r","            case \"HORIZONTAL\":\r","                eventsFunctionContext.returnValue = gdjs._extensionController.getNormalizedAxisValue(gamepad.axes[2], playerId);\r","                break;\r","\r","            case \"VERTICAL\":\r","                eventsFunctionContext.returnValue = gdjs._extensionController.getNormalizedAxisValue(gamepad.axes[3], playerId);\r","                break;\r","\r","            default:\r","                break;\r","        }\r","        break;\r","\r","    default:\r","        break;\r","}\r",""],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"expressionType":{"type":"expression"},"parameters":[{"description":"The gamepad identifier: 1, 2, 3 or 4","name":"player_ID","type":"expression"},{"description":"Stick: \"Left\" or \"Right\"","name":"stick","supplementaryInformation":"[\"Left\",\"Right\"]","type":"stringWithSelector"},{"description":"Direction","name":"direction","supplementaryInformation":"[\"Up\",\"Down\",\"Left\",\"Right\",\"Horizontal\",\"Vertical\"]","type":"stringWithSelector"}],"objectGroups":[]},{"description":"Return the gamepad stick force on X axis (from -1 at the left to 1 at the right).","fullName":"Stick X force","functionType":"Expression","name":"StickForceX","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["/** @type {Gamepad[]} */\r","const gamepads = navigator.getGamepads ? navigator.getGamepads() : (navigator.webkitGetGamepads ? navigator.webkitGetGamepads() : []);\r","\r","//Get function parameters\r","const playerId = eventsFunctionContext.getArgument(\"Gamepad\") - 1;\r","const stick = eventsFunctionContext.getArgument(\"Stick\").toLowerCase();\r","\r","if (playerId < 0 || playerId > 4) {\r","    console.error('Parameter gamepad identifier is not valid in expression: \"Value of a gamepad axis\"');\r","    return;\r","}\r","if (stick != \"left\" && stick != \"right\") {\r","    console.error('Parameter stick is not valid in expression: \"Value of a gamepad axis\"');\r","    return;\r","}\r","const gamepad = gamepads[playerId];\r","\r","//we need keep this condition because when use have not yet plug her controller we can't get the controller in the gamepad variable.\r","if (gamepad == null) return;\r","\r","const axisIndex = stick === 'right' ? 2 : 0;\r","eventsFunctionContext.returnValue = gdjs._extensionController.getNormalizedAxisValue(gamepad.axes[axisIndex], playerId);\r",""],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"expressionType":{"type":"expression"},"parameters":[{"description":"The gamepad identifier: 1, 2, 3 or 4","name":"Gamepad","type":"expression"},{"description":"Stick: \"Left\" or \"Right\"","name":"Stick","supplementaryInformation":"[\"Left\",\"Right\"]","type":"stringWithSelector"}],"objectGroups":[]},{"description":"Return the gamepad stick force on Y axis (from -1 at the top to 1 at the bottom).","fullName":"Stick Y force","functionType":"Expression","name":"StickForceY","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["/** @type {Gamepad[]} */\r","const gamepads = navigator.getGamepads ? navigator.getGamepads() : (navigator.webkitGetGamepads ? navigator.webkitGetGamepads() : []);\r","\r","//Get function parameters\r","const playerId = eventsFunctionContext.getArgument(\"Gamepad\") - 1;\r","const stick = eventsFunctionContext.getArgument(\"Stick\").toLowerCase();\r","\r","if (playerId < 0 || playerId > 4) {\r","    console.error('Parameter gamepad identifier is not valid in expression: \"Value of a gamepad axis\"');\r","    return;\r","}\r","if (stick != \"left\" && stick != \"right\") {\r","    console.error('Parameter stick is not valid in expression: \"Value of a gamepad axis\"');\r","    return;\r","}\r","const gamepad = gamepads[playerId];\r","\r","//we need keep this condition because when use have not yet plug her controller we can't get the controller in the gamepad variable.\r","if (gamepad == null) return;\r","\r","const axisIndex = stick === 'right' ? 3 : 1;\r","eventsFunctionContext.returnValue = gdjs._extensionController.getNormalizedAxisValue(gamepad.axes[axisIndex], playerId);\r",""],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"expressionType":{"type":"expression"},"parameters":[{"description":"The gamepad identifier: 1, 2, 3 or 4","name":"Gamepad","type":"expression"},{"description":"Stick: \"Left\" or \"Right\"","name":"Stick","supplementaryInformation":"[\"Left\",\"Right\"]","type":"stringWithSelector"}],"objectGroups":[]},{"description":"Test if a button is released on a gamepad. Buttons can be:\n* Xbox: \"A\", \"B\", \"X\", \"Y\", \"LB\", \"RB\", \"LT\", \"RT\", \"BACK\", \"START\",\n* PS4: \"CROSS\", \"SQUARE\", \"CIRCLE\", \"TRIANGLE\", \"L1\", \"L2\", \"R1\", \"R2\", \"SHARE\", \"OPTIONS\", \"PS_BUTTON\", \"CLICK_TOUCHPAD\",\n* Other: \"UP\", \"DOWN\", \"LEFT\", \"RIGHT\", \"CLICK_STICK_LEFT\", \"CLICK_STICK_RIGHT\".","fullName":"Gamepad button released","functionType":"Condition","name":"C_Button_released","sentence":"Button _PARAM2_ of gamepad _PARAM1_ is released","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["/** @type {Gamepad[]} */\r","const gamepads = navigator.getGamepads ? navigator.getGamepads() : (navigator.webkitGetGamepads ? navigator.webkitGetGamepads() : []);\r","\r","//Get function parameters\r","const playerId = eventsFunctionContext.getArgument(\"player_ID\") - 1;\r","const button = eventsFunctionContext.getArgument(\"button\").toUpperCase();\r","\r","if (playerId < 0 || playerId > 4) {\r","    console.error('Parameter gamepad identifier in condition: \"Gamepad button released\", is not valid number, must be between 0 and 4.');\r","    return;\r","}\r","if (button === \"\") {\r","    console.error('Parameter button is not valid in condition: \"Gamepad button released\"');\r","    return;\r","}\r","\r","const gamepad = gamepads[playerId];\r","\r","//we need keep this condition because when use have not yet plug her controller we can't get the controller in the gamepad variable.\r","if (gamepad == null) return;\r","\r","let buttonId;\r","\r","switch (button) {\r","    case 'A':\r","    case 'CROSS':\r","        buttonId = 0;\r","        break;\r","    case 'B':\r","    case 'CIRCLE':\r","        buttonId = 1;\r","        break;\r","    case 'X':\r","    case 'SQUARE':\r","        buttonId = 2;\r","        break;\r","    case 'Y':\r","    case 'TRIANGLE':\r","        buttonId = 3;\r","        break;\r","    case 'LB':\r","    case 'L1':\r","        buttonId = 4;\r","        break;\r","    case 'RB':\r","    case 'R1':\r","        buttonId = 5;\r","        break;\r","    case 'LT':\r","    case 'L2':\r","        buttonId = 6;\r","        break;\r","    case 'RT':\r","    case 'R2':\r","        buttonId = 7;\r","        break;\r","\r","    case 'UP':\r","        buttonId = 12;\r","        break;\r","    case 'DOWN':\r","        buttonId = 13;\r","        break;\r","    case 'LEFT':\r","        buttonId = 14;\r","        break;\r","    case 'RIGHT':\r","        buttonId = 15;\r","        break;\r","\r","    case 'BACK':\r","    case 'SHARE':\r","        buttonId = 8;\r","        break;\r","    case 'START':\r","    case 'OPTIONS':\r","        buttonId = 9;\r","        break;\r","\r","    case 'CLICK_STICK_LEFT':\r","        buttonId = 10;\r","        break;\r","    case 'CLICK_STICK_RIGHT':\r","        buttonId = 11;\r","        break;\r","\r","    //PS4\r","    case 'PS_BUTTON':\r","        buttonId = 16;\r","        break;\r","    case 'CLICK_TOUCHPAD':\r","        buttonId = 17;\r","        break;\r","\r","    default:\r","        console.error('The button: ' + button + ' in condition: \"Gamepad button released\" is not valid.');\r","        break;\r","}\r","\r","if (buttonId === undefined) {\r","    console.error('There is no buttons valid in condition: \"Gamepad button released\"');\r","    eventsFunctionContext.returnValue = false;\r","    return;\r","}\r","\r","if (gamepad.buttons == null || gamepad.buttons[buttonId] == null) {\r","    console.error('Buttons on the gamepad are not accessible in condition: \"Gamepad button released\"');\r","    eventsFunctionContext.returnValue = false;\r","    return;\r","}\r","\r","//Define default value on pressed button or use previous value\r","gdjs._extensionController.players[playerId].previousFrameStateButtons[buttonId] = gdjs._extensionController.players[playerId].previousFrameStateButtons[buttonId] || { pressed: false };\r","\r","//Get state of button at previous frame\r","const previousStateButton = gdjs._extensionController.players[playerId].previousFrameStateButtons[buttonId].pressed;\r","\r","//When previousStateButton is true and actual button state is not pressed\r","//Player have release the button\r","if (previousStateButton === true && gamepad.buttons[buttonId].pressed === false) {\r","    // Save the last button used for the player    \r","    gdjs._extensionController.players[playerId].lastButtonUsed = buttonId;\r","    gdjs._extensionController.players[playerId].previousFrameStateButtons[buttonId].pressed = true;\r","    eventsFunctionContext.returnValue = true;\r","\r","} else {\r","    gdjs._extensionController.players[playerId].previousFrameStateButtons[buttonId].pressed = false;\r","    eventsFunctionContext.returnValue = false;\r","}\r",""],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"description":"The gamepad identifier: 1, 2, 3 or 4","name":"player_ID","type":"expression"},{"description":"Name of the button","name":"button","supplementaryInformation":"[\"A\",\"Cross\",\"B\",\"Circle\",\"X\",\"Square\",\"Y\",\"Triangle\",\"LB\",\"L1\",\"RB\",\"R1\",\"LT\",\"L2\",\"RT\",\"R2\",\"Up\",\"Down\",\"Left\",\"Right\",\"Back\",\"Share\",\"Start\",\"Options\",\"Click_Stick_Left\",\"Click_Stick_Right\",\"PS_Button\",\"Click_Touchpad\"]","type":"stringWithSelector"}],"objectGroups":[]},{"description":"Return the index of the last pressed button of a gamepad.","fullName":"Last pressed button (id)","functionType":"Expression","name":"LastButtonID","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["//Get function parameter\r","const playerId = eventsFunctionContext.getArgument(\"player_ID\") - 1;\r","\r","//Player id is not valid\r","if (playerId < 0 || playerId > 4) {\r","    console.error('Parameter gamepad identifier in expression: \"Last pressed button (id)\", is not valid number, must be between 0 and 4.');\r","    return;\r","}\r","\r","//Return the last button used by the player\r","eventsFunctionContext.returnValue = gdjs._extensionController.players[playerId].lastButtonUsed;"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"expressionType":{"type":"expression"},"parameters":[{"description":"The gamepad identifier: 1, 2, 3 or 4","name":"player_ID","type":"expression"}],"objectGroups":[]},{"description":"Check if any button is pressed on a gamepad.","fullName":"Any gamepad button pressed","functionType":"Condition","name":"C_Any_Button_pressed","sentence":"Any button of gamepad _PARAM1_ is pressed","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["/** @type {Gamepad[]} */\r","const gamepads = navigator.getGamepads ? navigator.getGamepads() : (navigator.webkitGetGamepads ? navigator.webkitGetGamepads() : []);\r","\r","//Get function parameter\r","const playerId = eventsFunctionContext.getArgument(\"player_ID\") - 1;\r","\r","if (playerId < 0 || playerId > 4) {\r","    console.error('Parameter gamepad identifier in condition: \"Any gamepad button pressed\", is not valid number, must be between 0 and 4.');\r","    return;\r","}\r","const gamepad = gamepads[playerId];\r","\r","//we need keep this condition because when use have not yet plug her controller we can't get the controller in the gamepad variable.\r","if (gamepad == null) return;\r","\r","let buttonId;\r","for (let i = 0; i < gamepad.buttons.length; i++) { //For each buttons\r","    if (gamepad.buttons[i].pressed) { //One of them is pressed\r","        buttonId = i; //Save the button pressed\r","        break;\r","    }\r","}\r","\r","if (buttonId === undefined) {\r","    // No buttons are pressed.\r","    eventsFunctionContext.returnValue = false;\r","    return;\r","}\r","\r","if (gamepad.buttons == null || gamepad.buttons[buttonId] == null) {\r","    console.error('Buttons on the gamepad are not accessible in condition: \"Any gamepad button pressed\"');\r","    eventsFunctionContext.returnValue = false;\r","    return;\r","}\r","\r","//When a button is pressed, save the button in lastButtonUsed for each players\r","if (gamepad.buttons[buttonId].pressed) gdjs._extensionController.players[playerId].lastButtonUsed = buttonId;\r","eventsFunctionContext.returnValue = gamepad.buttons[buttonId].pressed;\r","\r","\r",""],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"description":"The gamepad identifier: 1, 2, 3 or 4","name":"player_ID","type":"expression"}],"objectGroups":[]},{"description":"Return the last button pressed. \nButtons for Xbox and PS4 can be:\n* Xbox: \"A\", \"B\", \"X\", \"Y\", \"LB\", \"RB\", \"LT\", \"RT\", \"BACK\", \"START\",\n* PS4: \"CROSS\", \"SQUARE\", \"CIRCLE\", \"TRIANGLE\", \"L1\", \"L2\", \"R1\", \"R2\", \"SHARE\", \"OPTIONS\", \"PS_BUTTON\", \"CLICK_TOUCHPAD\",\n* Both: \"UP\", \"DOWN\", \"LEFT\", \"RIGHT\", \"CLICK_STICK_LEFT\", \"CLICK_STICK_RIGHT\".","fullName":"Last pressed button (string)","functionType":"StringExpression","name":"LastButtonString","sentence":"Button _PARAM2_ of gamepad _PARAM1_ is pressed","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["/** @type {Gamepad[]} */\r","const gamepads = navigator.getGamepads ? navigator.getGamepads() : (navigator.webkitGetGamepads ? navigator.webkitGetGamepads() : []);\r","\r","//Get function parameters\r","const playerId = eventsFunctionContext.getArgument(\"player_ID\") - 1;\r","const controllerType = eventsFunctionContext.getArgument(\"controller_type\").toUpperCase();\r","\r","if (playerId < 0 || playerId > 4) {\r","    console.error('Parameter gamepad identifier in string expression: \"Last pressed button (LastButtonString)\", is not valid number, must be between 0 and 4.');\r","    return;\r","}\r","if (controllerType === \"\") {\r","    console.error('Parameter controller type is not valid in string expression: \"Last pressed button (LastButtonString)\"');\r","    return;\r","}\r","\r","const gamepad = gamepads[playerId];\r","\r","if (gamepad !== null) { //Gamepad exist\r","    //Get last btn id\r","    const lastButtonUsedID = gdjs._extensionController.players[playerId].lastButtonUsed;\r","\r","    //Return last button as string    \r","    eventsFunctionContext.returnValue = gdjs._extensionController.getInputString(controllerType, lastButtonUsedID);\r","\r","} else { //Gamepad dosen't exist\r","    console.error('Your controller is not supported or the gamepad wasn\\'t detected in string expression: \"Last pressed button (LastButtonString)\"');\r","    eventsFunctionContext.returnValue = \"Gamepad not connected\";\r","}"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"expressionType":{"type":"string"},"parameters":[{"description":"The gamepad identifier: 1, 2, 3 or 4","name":"player_ID","type":"expression"},{"description":"Controller type","name":"controller_type","supplementaryInformation":"[\"Xbox\",\"PS4\"]","type":"stringWithSelector"}],"objectGroups":[]},{"description":"Return the number of gamepads.","fullName":"Gamepad count","functionType":"Expression","name":"GamepadCount","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const gamepads = navigator.getGamepads ? navigator.getGamepads() : (navigator.webkitGetGamepads ? navigator.webkitGetGamepads() : []);\r","\r","//Get the last activated controller\r","const controllerId = gdjs._extensionController.lastActiveController;\r","\r","// Check if controller is active\r","const gamepad = gamepads[controllerId];\r","if (gamepad == null) {\r","    eventsFunctionContext.returnValue = 0;\r","} else {\r","    // Return active controller id\r","    eventsFunctionContext.returnValue = controllerId + 1;\r","}\r",""],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"expressionType":{"type":"expression"},"parameters":[],"objectGroups":[]},{"description":"Check if a button is pressed on a gamepad. \nButtons can be:\n* Xbox: \"A\", \"B\", \"X\", \"Y\", \"LB\", \"RB\", \"LT\", \"RT\", \"BACK\", \"START\",\n* PS4: \"CROSS\", \"SQUARE\", \"CIRCLE\", \"TRIANGLE\", \"L1\", \"L2\", \"R1\", \"R2\", \"SHARE\", \"OPTIONS\", \"PS_BUTTON\", \"CLICK_TOUCHPAD\",\n* Other: \"UP\", \"DOWN\", \"LEFT\", \"RIGHT\", \"CLICK_STICK_LEFT\", \"CLICK_STICK_RIGHT\".","fullName":"Gamepad button pressed","functionType":"Condition","name":"C_Button_pressed","sentence":"Button _PARAM2_ of gamepad _PARAM1_ is pressed","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["/** @type {Gamepad[]} */\r","const gamepads = navigator.getGamepads ? navigator.getGamepads() : (navigator.webkitGetGamepads ? navigator.webkitGetGamepads() : []);\r","\r","//Get function parameters\r","const playerId = eventsFunctionContext.getArgument(\"player_ID\") - 1;\r","const button = eventsFunctionContext.getArgument(\"button\").toUpperCase();\r","\r","if (playerId < 0 || playerId > 4) {\r","    console.error('Parameter gamepad identifier in condition: \"Gamepad button pressed\", is not valid number, must be between 0 and 4.');\r","    return;\r","}\r","if (button === \"\") {\r","    console.error('Parameter button is not valid in condition: \"Gamepad button pressed\"');\r","    eventsFunctionContext.returnValue = false;\r","    return;\r","}\r","\r","const gamepad = gamepads[playerId];\r","\r","//we need keep this condition because when use have not yet plug her controller we can't get the controller in the gamepad variable.\r","if (gamepad == null) return;\r","\r","let buttonId;\r","\r","switch (button) {\r","    case 'A':\r","    case 'CROSS':\r","        buttonId = 0;\r","        break;\r","    case 'B':\r","    case 'CIRCLE':\r","        buttonId = 1;\r","        break;\r","    case 'X':\r","    case 'SQUARE':\r","        buttonId = 2;\r","        break;\r","    case 'Y':\r","    case 'TRIANGLE':\r","        buttonId = 3;\r","        break;\r","    case 'LB':\r","    case 'L1':\r","        buttonId = 4;\r","        break;\r","    case 'RB':\r","    case 'R1':\r","        buttonId = 5;\r","        break;\r","    case 'LT':\r","    case 'L2':\r","        buttonId = 6;\r","        break;\r","    case 'RT':\r","    case 'R2':\r","        buttonId = 7;\r","        break;\r","\r","    case 'UP':\r","        buttonId = 12;\r","        break;\r","    case 'DOWN':\r","        buttonId = 13;\r","        break;\r","    case 'LEFT':\r","        buttonId = 14;\r","        break;\r","    case 'RIGHT':\r","        buttonId = 15;\r","        break;\r","\r","    case 'BACK':\r","    case 'SHARE':\r","        buttonId = 8;\r","        break;\r","    case 'START':\r","    case 'OPTIONS':\r","        buttonId = 9;\r","        break;\r","\r","    case 'CLICK_STICK_LEFT':\r","        buttonId = 10;\r","        break;\r","    case 'CLICK_STICK_RIGHT':\r","        buttonId = 11;\r","        break;\r","\r","    //PS4\r","    case 'PS_BUTTON':\r","        buttonId = 16;\r","        break;\r","    case 'CLICK_TOUCHPAD':\r","        buttonId = 17;\r","        break;\r","\r","    default:\r","        console.error('The button: ' + button + ' in condition: \"Gamepad button pressed\" is not valid.');\r","        eventsFunctionContext.returnValue = false;\r","        break;\r","}\r","\r","\r","\r","if (buttonId === undefined) {\r","    console.error('There is no buttons valid in condition: \"Gamepad button pressed\"');\r","    eventsFunctionContext.returnValue = false;\r","    return;\r","}\r","\r","if (gamepad.buttons == null || gamepad.buttons[buttonId] == null) {\r","    console.error('Buttons on the gamepad are not accessible in condition: \"Gamepad button pressed\"');\r","    eventsFunctionContext.returnValue = false;\r","    return;\r","}\r","\r","//When a button is pressed, save the button in lastButtonUsed for each players\r","if (gamepad.buttons[buttonId].pressed) gdjs._extensionController.players[playerId].lastButtonUsed = buttonId;\r","eventsFunctionContext.returnValue = gamepad.buttons[buttonId].pressed;\r","\r","\r","\r",""],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"description":"The gamepad identifier: 1, 2, 3 or 4","name":"player_ID","type":"expression"},{"description":"Name of the button","name":"button","supplementaryInformation":"[\"A\",\"Cross\",\"B\",\"Circle\",\"X\",\"Square\",\"Y\",\"Triangle\",\"LB\",\"L1\",\"RB\",\"R1\",\"LT\",\"L2\",\"RT\",\"R2\",\"Up\",\"Down\",\"Left\",\"Right\",\"Back\",\"Share\",\"Start\",\"Options\",\"Click_Stick_Left\",\"Click_Stick_Right\",\"PS_Button\",\"Click_Touchpad\"]","type":"stringWithSelector"}],"objectGroups":[]},{"description":"Return the value of the deadzone applied to a gamepad sticks, between 0 and 1.","fullName":"Gamepad deadzone for sticks","functionType":"Expression","name":"Deadzone","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[]},{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["//Get function parameter\r","const playerId = eventsFunctionContext.getArgument(\"player_ID\") - 1;\r","\r","if (playerId < 0 || playerId > 4) {\r","    console.error('Parameter gamepad identifier in expression: \"Gamepad deadzone for sticks\", is not valid number, must be between 0 and 4.');\r","    return;\r","}\r","///Return the deadzone value for a given player\r","eventsFunctionContext.returnValue = gdjs._extensionController.players[playerId].deadzone;"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"expressionType":{"type":"expression"},"parameters":[{"description":"The gamepad identifier: 1, 2, 3 or 4","name":"player_ID","type":"expression"}],"objectGroups":[]},{"description":"Set the deadzone for sticks of the gamepad. The deadzone is an area for which movement on sticks won't be taken into account (instead, the stick will be considered as not moved). Deadzone is between 0 and 1, and is by default 0.2.","fullName":"Set gamepad deadzone for sticks","functionType":"Action","name":"A_Set_deadzone","sentence":"Set deadzone for sticks on gamepad: _PARAM1_ to _PARAM2_","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["//Get function parameter\r","const playerId = eventsFunctionContext.getArgument(\"player_ID\") - 1;\r","const newDeadzone = eventsFunctionContext.getArgument(\"deadzone\");\r","\r","if (playerId < 0 || playerId > 4) {\r","    console.error('Parameter gamepad identifier in action: \"Set gamepad deadzone for sticks\", is not valid, must be between 0 and 4.');\r","    return;\r","}\r","\r","// clamp the newDeadzone in range [0, 1].\r","// https://github.com/4ian/GDevelop-extensions/pull/33#issuecomment-618224857\r","gdjs._extensionController.players[playerId].deadzone = gdjs.evtTools.common.clamp(newDeadzone, 0, 1);\r",""],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"description":"The gamepad identifier: 1, 2, 3 or 4","name":"player_ID","type":"expression"},{"description":"Deadzone for sticks, 0.2 by default (0 to 1)","name":"deadzone","type":"expression"}],"objectGroups":[]},{"description":"Check if a stick of a gamepad is pushed in a given direction.","fullName":"Gamepad stick pushed (axis)","functionType":"Condition","name":"C_Axis_pushed","sentence":"_PARAM2_ stick of gamepad _PARAM1_ is pushed in direction _PARAM3_","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["/** @type {Gamepad[]} */\r","const gamepads = navigator.getGamepads ? navigator.getGamepads() : (navigator.webkitGetGamepads ? navigator.webkitGetGamepads() : []);\r","\r","//Get function parameters\r","const playerId = eventsFunctionContext.getArgument(\"player_ID\") - 1;\r","const stick = eventsFunctionContext.getArgument(\"stick\").toUpperCase();\r","const direction = eventsFunctionContext.getArgument(\"direction\").toUpperCase();\r","\r","if (playerId < 0 || playerId > 4) {\r","    console.error('Parameter gamepad identifier in condition: \"Gamepad stick pushed (axis)\", is not valid number, must be between 0 and 4.');\r","    return;\r","}\r","if (stick != \"LEFT\" && stick != \"RIGHT\") {\r","    console.error('Parameter stick in condition: \"Gamepad stick pushed (axis)\", is not valid, must be LEFT or RIGHT');\r","    return;\r","}\r","if (direction != \"UP\" && direction != \"DOWN\" && direction != \"LEFT\" && direction != \"RIGHT\" && direction != \"ANY\") {\r","    console.error('Parameter deadzone in condition: \"Gamepad stick pushed (axis)\", is not valid, must be UP, DOWN, LEFT or RIGHT');\r","    return;\r","}\r","\r","const gamepad = gamepads[playerId];\r","\r","//we need keep this condition because when use have not yet plug her controller we can't get the controller in the gamepad variable.\r","if (gamepad == null) {\r","    eventsFunctionContext.returnValue = false;\r","    return;\r","}\r","\r","\r","//Define in onFirstSceneLoaded function\r","const getNormalizedAxisValue = gdjs._extensionController.getNormalizedAxisValue;\r","\r","switch (stick) {\r","    case 'LEFT':\r","        switch (direction) {\r","            case 'LEFT':\r","                if (getNormalizedAxisValue(gamepad.axes[0], playerId) < 0) {\r","                    eventsFunctionContext.returnValue = true;\r","                    return;\r","                }\r","                break;\r","\r","            case 'RIGHT':\r","                if (getNormalizedAxisValue(gamepad.axes[0], playerId) > 0) {\r","                    eventsFunctionContext.returnValue = true;\r","                    return;\r","                }\r","                break;\r","\r","            case 'UP':\r","                if (getNormalizedAxisValue(gamepad.axes[1], playerId) < 0) {\r","                    eventsFunctionContext.returnValue = true;\r","                    return;\r","                }\r","                break;\r","\r","            case 'DOWN':\r","                if (getNormalizedAxisValue(gamepad.axes[1], playerId) > 0) {\r","                    eventsFunctionContext.returnValue = true;\r","                    return;\r","                }\r","                break;\r","\r","            case 'ANY':\r","                if (   getNormalizedAxisValue(gamepad.axes[0], playerId) < 0\r","                    || getNormalizedAxisValue(gamepad.axes[0], playerId) > 0\r","                    || getNormalizedAxisValue(gamepad.axes[1], playerId) < 0 \r","                    || getNormalizedAxisValue(gamepad.axes[1], playerId) > 0) {\r","                    eventsFunctionContext.returnValue = true;\r","                    return;\r","                }\r","                break;\r","\r","            default:\r","                console.error('The value Direction on stick Left on the condition: \"Gamepad stick pushed (axis)\" is not valid.');\r","                eventsFunctionContext.returnValue = false;\r","                break;\r","        }\r","        break;\r","\r","    case 'RIGHT':\r","        switch (direction) {\r","            case 'LEFT':\r","                if (getNormalizedAxisValue(gamepad.axes[2], playerId) < 0) {\r","                    eventsFunctionContext.returnValue = true;\r","                    return;\r","                }\r","                break;\r","\r","            case 'RIGHT':\r","                if (getNormalizedAxisValue(gamepad.axes[2], playerId) > 0) {\r","                    eventsFunctionContext.returnValue = true;\r","                    return;\r","                }\r","                break;\r","\r","            case 'UP':\r","                if (getNormalizedAxisValue(gamepad.axes[3], playerId) < 0) {\r","                    eventsFunctionContext.returnValue = true;\r","                    return;\r","                }\r","                break;\r","\r","            case 'DOWN':\r","                if (getNormalizedAxisValue(gamepad.axes[3], playerId) > 0) {\r","                    eventsFunctionContext.returnValue = true;\r","                    return;\r","                }\r","                break;\r","\r","            case 'ANY':\r","                if (   getNormalizedAxisValue(gamepad.axes[2], playerId) < 0\r","                    || getNormalizedAxisValue(gamepad.axes[2], playerId) > 0\r","                    || getNormalizedAxisValue(gamepad.axes[3], playerId) < 0 \r","                    || getNormalizedAxisValue(gamepad.axes[3], playerId) > 0) {\r","                    eventsFunctionContext.returnValue = true;\r","                    return;\r","                }\r","                break;\r","\r","            default:\r","                console.error('The value Direction on stick Right on the condition: \"Gamepad stick pushed (axis)\" is not valid.');\r","                eventsFunctionContext.returnValue = false;\r","                break;\r","        }\r","        break;\r","\r","    default:\r","        console.error('The value Stick on the condition: \"Gamepad stick pushed (axis)\" is not valid.');\r","        eventsFunctionContext.returnValue = false;\r","        break;\r","}\r","\r","eventsFunctionContext.returnValue = false;\r",""],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"description":"The gamepad identifier: 1, 2, 3 or 4","name":"player_ID","type":"expression"},{"description":"Stick: \"Left\" or \"Right\"","name":"stick","supplementaryInformation":"[\"Left\",\"Right\"]","type":"stringWithSelector"},{"description":"Direction","name":"direction","supplementaryInformation":"[\"Up\",\"Down\",\"Left\",\"Right\",\"Any\"]","type":"stringWithSelector"}],"objectGroups":[]},{"description":"Return the number of connected gamepads.","fullName":"Connected gamepads number","functionType":"Expression","name":"ConnectedGamepadsCount","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[]},{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["/** @type {Gamepad[]} */\r","const gamepads = navigator.getGamepads ? navigator.getGamepads() : (navigator.webkitGetGamepads ? navigator.webkitGetGamepads() : []);\r","\r","// Gamepads can be disconnected and become null, so we have to filter them.\r","eventsFunctionContext.returnValue = Object.keys(gamepads).filter(key => !!gamepads[key]).length;\r",""],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"expressionType":{"type":"expression"},"parameters":[],"objectGroups":[]},{"description":"Return a string containing informations about the specified gamepad.","fullName":"Gamepad type","functionType":"StringExpression","name":"GamepadType","sentence":"Player _PARAM1_ use _PARAM2_ controller","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["/** @type {Gamepad[]} */","const gamepads = navigator.getGamepads ? navigator.getGamepads() : (navigator.webkitGetGamepads ? navigator.webkitGetGamepads() : []);","","//Get function parameter","const playerId = eventsFunctionContext.getArgument(\"player_ID\") - 1;","","if (playerId < 0 || playerId > 4) {","    console.error('Parameter gamepad identifier in string expression: \"Gamepad type\", is not valid number, must be between 0 and 4');","    return;","}","","const gamepad = gamepads[playerId];","","//we need keep this condition because when use have not yet plug her controller we can't get the controller in the gamepad variable.","if (gamepad == null) return;","","eventsFunctionContext.returnValue = (gamepad && gamepad.id) ? gamepad.id : \"No information for player \" + (playerId + 1)",""],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"expressionType":{"type":"string"},"parameters":[{"description":"The gamepad identifier: 1, 2, 3 or 4","name":"player_ID","type":"expression"}],"objectGroups":[]},{"description":"Check if the specified gamepad has the specified information in its description. Useful to know if the gamepad is a Xbox or PS4 controller.","fullName":"Gamepad type","functionType":"Condition","name":"C_Controller_type","sentence":"Gamepad _PARAM1_ is a _PARAM2_ controller","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["/** @type {Gamepad[]} */","const gamepads = navigator.getGamepads ? navigator.getGamepads() : (navigator.webkitGetGamepads ? navigator.webkitGetGamepads() : []);","","//Get function parameters","const playerId = eventsFunctionContext.getArgument(\"player_ID\") - 1;","const controllerType = eventsFunctionContext.getArgument(\"controller_type\").toUpperCase();","","if (playerId < 0 || playerId > 4) {","    console.error('Parameter gamepad identifier in condition: \"Gamepad type\", is not valid number, must be between 0 and 4.');","    return;","}","if (controllerType === \"\") {","    console.error('Parameter type in condition: \"Gamepad type\", is not a string.');","    return;","}","","const gamepad = gamepads[playerId];","","//we need keep this condition because when use have not yet plug her controller we can't get the controller in the gamepad variable.","if (gamepad == null) return;","","","if (controllerType == \"XBOX\") {","    eventsFunctionContext.returnValue = gdjs._extensionController.isXbox(gamepad);","} else {","    eventsFunctionContext.returnValue = gamepad ? gamepad.id.toUpperCase().indexOf(controllerType) !== -1 : false;","}"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"description":"The gamepad identifier: 1, 2, 3 or 4","name":"player_ID","type":"expression"},{"description":"Type: \"Xbox\", \"PS4\", \"Steam\" or \"PS3\" (among other)","name":"controller_type","type":"string"}],"objectGroups":[]},{"description":"Check if a gamepad is connected.","fullName":"Gamepad connected","functionType":"Condition","name":"C_Controller_X_is_connected","sentence":"Gamepad _PARAM1_ is plugged and connected","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["/** @type {Gamepad[]} */","const gamepads = navigator.getGamepads ? navigator.getGamepads() : (navigator.webkitGetGamepads ? navigator.webkitGetGamepads() : []);","","//Get function parameter","const playerId = eventsFunctionContext.getArgument(\"player_ID\") - 1;","","if (playerId < 0 || playerId > 4) {","    console.error('Parameter gamepad identifier in condition: \"Gamepad connected\", is not valid number, must be between 0 and 4.');","    return;","}","","// If gamepad was disconnected it will be null (so this will return false)","// If gamepad was never connected it will be undefined (so this will return false)","eventsFunctionContext.returnValue = !!gamepads[playerId];"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"description":"The gamepad identifier: 1, 2, 3 or 4","name":"player_ID","type":"expression"}],"objectGroups":[]},{"description":"Generate a vibration on the specified controller. Might only work if the game is running in a recent web browser.","fullName":"Gamepad vibration","functionType":"Action","name":"A_Vibrate_controller","sentence":"Make gamepad _PARAM1_ vibrate for _PARAM2_ seconds","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["/** @type {Gamepad[]} */","//Vibration work only on game in browser.","const gamepads = navigator.getGamepads ? navigator.getGamepads() : (navigator.webkitGetGamepads ? navigator.webkitGetGamepads() : []);","","//Get function parameters","const playerId = eventsFunctionContext.getArgument(\"Player_ID\") - 1;","const duration = eventsFunctionContext.getArgument(\"Duration\") || 1;","","if (playerId < 0 || playerId > 4) {","  console.error('Parameter gamepad identifier in action: \"Gamepad connected\", is not valid number, must be between 0 and 4.');","  return;","}","","const gamepad = gamepads[playerId];","","//we need keep this condition because when use have not yet plug her controller we can't get the controller in the gamepad variable.","if (gamepad == null) return;","","if (gamepad && gamepad.vibrationActuator) {","  gamepad.vibrationActuator.playEffect(\"dual-rumble\", {","    startDelay: 0,","    duration: duration * 1000,","    weakMagnitude: 1.0,","    strongMagnitude: 1.0","  });","}"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"description":"The gamepad identifier: 1, 2, 3 or 4","name":"Player_ID","type":"expression"},{"description":"Time of the vibration, in seconds (optional, default value is 1)","name":"Duration","type":"expression"}],"objectGroups":[]},{"description":"Generate an advanced vibration on the specified controller. Incompatible with Firefox.","fullName":"Advanced gamepad vibration","functionType":"Action","name":"A_Advanced_Vibration_Controller","sentence":"Make gamepad _PARAM1_ vibrate for _PARAM2_ seconds with the vibration magnitude of _PARAM3_ and _PARAM4_","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["/** @type {Gamepad[]} */","//Vibration work only on game in browser.","const gamepads = navigator.getGamepads ? navigator.getGamepads() : (navigator.webkitGetGamepads ? navigator.webkitGetGamepads() : []);","","//Get function parameters","const playerId = eventsFunctionContext.getArgument(\"Player_ID\") - 1;","const duration = eventsFunctionContext.getArgument(\"Duration\") || 1;","const strongRumbleMagnitude = eventsFunctionContext.getArgument(\"StrongMagnitude\");","const weakRumbleMagnitude = eventsFunctionContext.getArgument(\"WeakMagnitude\");","","if (playerId < 0 || playerId > 4) {","  console.error('Parameter gamepad identifier in action: \"Advanced gamepad vibration\", is not valid number, must be between 0 and 4.');","  return;","}","if (weakRumbleMagnitude < 0 || weakRumbleMagnitude > 1) {","  console.error('Parameter weakRumble identifier in action: \"Advanced gamepad vibration\", is not valid number, must be between 0 and 1.');","  return;","}","if (strongRumbleMagnitude < 0 || strongRumbleMagnitude > 1) {","  console.error('Parameter strongRumble identifier in action: \"Advanced gamepad vibration\", is not valid number, must be between 0 and 1.');","  return;","}","","const gamepad = gamepads[playerId];","","//we need keep this condition because when use have not yet plug the controller we can't get the controller in the gamepad variable.","if (gamepad == null) return;","","if (gamepad && gamepad.vibrationActuator) {","  gamepad.vibrationActuator.playEffect(\"dual-rumble\", {","    startDelay: 0,","    duration: duration * 1000,","    weakMagnitude: weakRumbleMagnitude,","    strongMagnitude: strongRumbleMagnitude","  });","}","","gdjs._extensionController.players[playerId].rumble.duration = duration;","gdjs._extensionController.players[playerId].rumble.elapsedTime = 0;","gdjs._extensionController.players[playerId].rumble.weakMagnitude = weakRumbleMagnitude;","gdjs._extensionController.players[playerId].rumble.strongMagnitude = strongRumbleMagnitude;"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"description":"The gamepad identifier: 1, 2, 3 or 4","name":"Player_ID","type":"expression"},{"description":"Time of the vibration, in seconds (optional, default value is 1)","name":"Duration","type":"expression"},{"description":"Strong rumble magnitude (from 0 to 1)","name":"StrongMagnitude","type":"expression"},{"description":"Weak rumble magnitude (from 0 to 1)","name":"WeakMagnitude","type":"expression"}],"objectGroups":[]},{"description":"Change a vibration on the specified controller. Incompatible with Firefox.","fullName":"Change gamepad active vibration","functionType":"Action","name":"A_Change_Vibration_Magnitude","sentence":"Change the vibration magnitude of _PARAM2_ & _PARAM3_ on gamepad _PARAM1_","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["/** @type {Gamepad[]} */","//Vibration work only on game in browser.","const gamepads = navigator.getGamepads ? navigator.getGamepads() : (navigator.webkitGetGamepads ? navigator.webkitGetGamepads() : []);","","//Get function parameters","const playerId = eventsFunctionContext.getArgument(\"Player_ID\") - 1;","const elapsedTime = gdjs._extensionController.players[playerId].rumble.elapsedTime || 0;","const originalDuration = gdjs._extensionController.players[playerId].rumble.duration || 1;","const strongRumbleMagnitude = eventsFunctionContext.getArgument(\"StrongMagnitude\");","const weakRumbleMagnitude = eventsFunctionContext.getArgument(\"WeakMagnitude\");","","","if (playerId < 0 || playerId > 4) {","  console.error('Parameter gamepad identifier in action: \"Change gamepad active vibration\", is not valid number, must be between 0 and 4.');","  return;","}","if (weakRumbleMagnitude < 0 || weakRumbleMagnitude > 1) {","  console.error('Parameter weakRumble identifier in action: \"Change gamepad active vibration\", is not valid number, must be between 0 and 1.');","  return;","}","if (strongRumbleMagnitude < 0 || strongRumbleMagnitude > 1) {","  console.error('Parameter strongRumble identifier in action: \"Change gamepad active vibration\", is not valid number, must be between 0 and 1.');","  return;","}","","const gamepad = gamepads[playerId];","","//we need keep this condition because when use have not yet plug the controller we can't get the controller in the gamepad variable.","if (gamepad == null) return;","","if (originalDuration - elapsedTime <= 0) return;","","if (gamepad && gamepad.vibrationActuator) {","  gamepad.vibrationActuator.playEffect(\"dual-rumble\", {","    startDelay: 0,","    duration: 1000 * (originalDuration - elapsedTime),","    weakMagnitude: weakRumbleMagnitude,","    strongMagnitude: strongRumbleMagnitude","  });","}","","gdjs._extensionController.players[playerId].rumble.weakMagnitude = weakRumbleMagnitude;","gdjs._extensionController.players[playerId].rumble.strongMagnitude = strongRumbleMagnitude;"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"description":"The gamepad identifier: 1, 2, 3 or 4","name":"Player_ID","type":"expression"},{"description":"Strong rumble magnitude (from 0 to 1)","name":"StrongMagnitude","type":"expression"},{"description":"Weak rumble magnitude (from 0 to 1)","name":"WeakMagnitude","type":"expression"}],"objectGroups":[]},{"description":"Check if any button is released on a gamepad.","fullName":"Any gamepad button released","functionType":"Condition","name":"C_any_button_released","sentence":"Any button of gamepad _PARAM1_ is released","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[]},{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["/** @type {Gamepad[]} */\r","const gamepads = navigator.getGamepads ? navigator.getGamepads() : (navigator.webkitGetGamepads ? navigator.webkitGetGamepads() : []);\r","\r","//Get function parameters\r","const playerId = eventsFunctionContext.getArgument(\"player_ID\") - 1;\r","\r","if (playerId < 0 || playerId > 4) {\r","\tconsole.error('Parameter gamepad identifier in condition: \"Any gamepad button released\", is not valid number, must be between 0 and 4.');\r","\treturn;\r","}\r","\r","const gamepad = gamepads[playerId];\r","\r","//we need keep this condition because when use have not yet plug her controller we can't get the controller in the gamepad variable.\r","if (gamepad == null) return;\r","\r","for (let buttonId = 0; buttonId < gamepad.buttons.length; buttonId++) { //For each buttons on current frame.\r","\r","\tif (buttonId === undefined) {\r","\t\teventsFunctionContext.returnValue = false;\r","\t\treturn;\r","\t}\r","\r","\t//Get previous value or define value by default for the current button\r","\tgdjs._extensionController.players[playerId].previousFrameStateButtons[buttonId] = gdjs._extensionController.players[playerId].previousFrameStateButtons[buttonId] || { pressed: false };\r","\r","\t//Get state of the button at previous frame\r","\tconst previousStateButtonIsPressed = gdjs._extensionController.players[playerId].previousFrameStateButtons[buttonId].pressed;\r","\r","\t//Get the state of the button on the current frame.\r","\tconst currentFrameStateButtonIsPressed = gamepad.buttons[buttonId].pressed;\r","\r","\t//When previousStateButtonIsPressed is true and actual button state is not pressed\r","\t//Player have release the button\r","\tif (previousStateButtonIsPressed === true && currentFrameStateButtonIsPressed === false) {\r","\t\tgdjs._extensionController.players[playerId].previousFrameStateButtons[buttonId].pressed = true;\r","\t\teventsFunctionContext.returnValue = true;\r","\t\t//break;\r","\t\treturn;\r","\t} else {\r","\t\t//The player didn't released the button yet, the previous frame state is still true\r","\t\tgdjs._extensionController.players[playerId].previousFrameStateButtons[buttonId].pressed = false;\r","\t\teventsFunctionContext.returnValue = false;\r","\t}\r","\r","\tif (currentFrameStateButtonIsPressed) gdjs._extensionController.players[playerId].lastButtonUsed = buttonId;\r","}\r",""],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"description":"The gamepad identifier: 1, 2, 3 or 4","name":"player_ID","type":"expression"}],"objectGroups":[]},{"description":"Return the strength of the weak vibration motor on the gamepad of a player.","fullName":"Weak rumble magnitude","functionType":"Expression","name":"WeakVibrationMagnitude","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const playerId = eventsFunctionContext.getArgument(\"Player_ID\") - 1;\r","eventsFunctionContext.returnValue = gdjs._extensionController.players[playerId].rumble.weakMagnitude;"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[{"description":"The gamepad identifier: 1, 2, 3 or 4","name":"Player_ID","type":"expression"}],"objectGroups":[]},{"description":"Return the strength of the strong vibration motor on the gamepad of a player.","fullName":"Strong rumble magnitude","functionType":"Expression","name":"StrongVibrationMagnitude","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const playerId = eventsFunctionContext.getArgument(\"Player_ID\") - 1;\r","eventsFunctionContext.returnValue = gdjs._extensionController.players[playerId].rumble.strongMagnitude;"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[{"description":"The gamepad identifier: 1, 2, 3 or 4","name":"Player_ID","type":"expression"}],"objectGroups":[]}],"eventsBasedBehaviors":[{"description":"Control a platformer character with a gamepad.","fullName":"Platformer gamepad mapper","name":"PlatformerGamepadMapper","objectType":"","eventsFunctions":[{"fullName":"","functionType":"Action","name":"doStepPreEvents","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Gamepads::C_Controller_X_is_connected"},"parameters":["","GamepadIdentifier",""]}],"actions":[],"events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"BooleanVariable"},"parameters":["UseArrows","True",""]}],"actions":[],"events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Gamepads::C_Button_pressed"},"parameters":["","GamepadIdentifier","\"Left\"","\"Left\""]}],"actions":[{"type":{"value":"PlatformBehavior::SimulateLeftKey"},"parameters":["Object","PlatformerCharacter"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Gamepads::C_Button_pressed"},"parameters":["","GamepadIdentifier","\"Right\"","\"Left\""]}],"actions":[{"type":{"value":"PlatformBehavior::SimulateRightKey"},"parameters":["Object","PlatformerCharacter"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Gamepads::C_Button_pressed"},"parameters":["","GamepadIdentifier","\"Up\"","\"Left\""]}],"actions":[{"type":{"value":"PlatformBehavior::SimulateUpKey"},"parameters":["Object","PlatformerCharacter"]},{"type":{"value":"PlatformBehavior::SimulateLadderKey"},"parameters":["Object","PlatformerCharacter"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Gamepads::C_Button_pressed"},"parameters":["","GamepadIdentifier","\"Down\"","\"Left\""]}],"actions":[{"type":{"value":"PlatformBehavior::SimulateDownKey"},"parameters":["Object","PlatformerCharacter"]}]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"BooleanVariable"},"parameters":["UseLeftStick","True",""]}],"actions":[],"events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Gamepads::C_Axis_pushed"},"parameters":["","GamepadIdentifier","\"Left\"","\"Left\"",""]}],"actions":[{"type":{"value":"PlatformBehavior::SimulateLeftKey"},"parameters":["Object","PlatformerCharacter"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Gamepads::C_Axis_pushed"},"parameters":["","GamepadIdentifier","\"Left\"","\"Right\"",""]}],"actions":[{"type":{"value":"PlatformBehavior::SimulateRightKey"},"parameters":["Object","PlatformerCharacter"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Gamepads::C_Axis_pushed"},"parameters":["","GamepadIdentifier","\"Left\"","\"Up\"",""]}],"actions":[{"type":{"value":"PlatformBehavior::SimulateUpKey"},"parameters":["Object","PlatformerCharacter"]},{"type":{"value":"PlatformBehavior::SimulateLadderKey"},"parameters":["Object","PlatformerCharacter"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Gamepads::C_Axis_pushed"},"parameters":["","GamepadIdentifier","\"Left\"","\"Down\"",""]}],"actions":[{"type":{"value":"PlatformBehavior::SimulateDownKey"},"parameters":["Object","PlatformerCharacter"]}]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"BooleanVariable"},"parameters":["UseRightStick","True",""]}],"actions":[],"events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Gamepads::C_Axis_pushed"},"parameters":["","GamepadIdentifier","\"Right\"","\"Left\"",""]}],"actions":[{"type":{"value":"PlatformBehavior::SimulateLeftKey"},"parameters":["Object","PlatformerCharacter"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Gamepads::C_Axis_pushed"},"parameters":["","GamepadIdentifier","\"Right\"","\"Right\"",""]}],"actions":[{"type":{"value":"PlatformBehavior::SimulateRightKey"},"parameters":["Object","PlatformerCharacter"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Gamepads::C_Axis_pushed"},"parameters":["","GamepadIdentifier","\"Right\"","\"Up\"",""]}],"actions":[{"type":{"value":"PlatformBehavior::SimulateUpKey"},"parameters":["Object","PlatformerCharacter"]},{"type":{"value":"PlatformBehavior::SimulateLadderKey"},"parameters":["Object","PlatformerCharacter"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Gamepads::C_Axis_pushed"},"parameters":["","GamepadIdentifier","\"Right\"","\"Down\"",""]}],"actions":[{"type":{"value":"PlatformBehavior::SimulateDownKey"},"parameters":["Object","PlatformerCharacter"]}]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"StringVariable"},"parameters":["JumpButton","=","\"A or Cross\""]},{"type":{"value":"Gamepads::C_Button_pressed"},"parameters":["","GamepadIdentifier","\"A\"","\"Left\""]}],"actions":[{"type":{"value":"PlatformBehavior::SimulateJumpKey"},"parameters":["Object","PlatformerCharacter"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"StringVariable"},"parameters":["JumpButton","=","\"B or Circle\""]},{"type":{"value":"Gamepads::C_Button_pressed"},"parameters":["","GamepadIdentifier","\"B\"","\"Left\""]}],"actions":[{"type":{"value":"PlatformBehavior::SimulateJumpKey"},"parameters":["Object","PlatformerCharacter"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"StringVariable"},"parameters":["JumpButton","=","\"X or Square\""]},{"type":{"value":"Gamepads::C_Button_pressed"},"parameters":["","GamepadIdentifier","\"X\"","\"Left\""]}],"actions":[{"type":{"value":"PlatformBehavior::SimulateJumpKey"},"parameters":["Object","PlatformerCharacter"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"StringVariable"},"parameters":["JumpButton","=","\"Y or Triangle\""]},{"type":{"value":"Gamepads::C_Button_pressed"},"parameters":["","GamepadIdentifier","\"Y\"","\"Left\""]}],"actions":[{"type":{"value":"PlatformBehavior::SimulateJumpKey"},"parameters":["Object","PlatformerCharacter"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"StringVariable"},"parameters":["JumpButton","=","\"LB or L1\""]},{"type":{"value":"Gamepads::C_Button_pressed"},"parameters":["","GamepadIdentifier","\"LB\"","\"Left\""]}],"actions":[{"type":{"value":"PlatformBehavior::SimulateJumpKey"},"parameters":["Object","PlatformerCharacter"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"StringVariable"},"parameters":["JumpButton","=","\"RB or R1\""]},{"type":{"value":"Gamepads::C_Button_pressed"},"parameters":["","GamepadIdentifier","\"RB\"","\"Left\""]}],"actions":[{"type":{"value":"PlatformBehavior::SimulateJumpKey"},"parameters":["Object","PlatformerCharacter"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"StringVariable"},"parameters":["JumpButton","=","\"LT or L2\""]},{"type":{"value":"Gamepads::C_Button_pressed"},"parameters":["","GamepadIdentifier","\"LT\"","\"Left\""]}],"actions":[{"type":{"value":"PlatformBehavior::SimulateJumpKey"},"parameters":["Object","PlatformerCharacter"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"StringVariable"},"parameters":["JumpButton","=","\"RT or R2\""]},{"type":{"value":"Gamepads::C_Button_pressed"},"parameters":["","GamepadIdentifier","\"RT\"","\"Left\""]}],"actions":[{"type":{"value":"PlatformBehavior::SimulateJumpKey"},"parameters":["Object","PlatformerCharacter"]}]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Gamepads::PlatformerGamepadMapper","type":"behavior"}],"objectGroups":[]}],"propertyDescriptors":[{"value":"","type":"Behavior","label":"Platformer character behavior","description":"","group":"","extraInformation":["PlatformBehavior::PlatformerObjectBehavior"],"name":"PlatformerCharacter"},{"value":"1","type":"Number","label":"Gamepad identifier (1, 2, 3 or 4)","description":"","group":"","extraInformation":[],"name":"GamepadIdentifier"},{"value":"true","type":"Boolean","label":"Use directional pad","description":"","group":"Controls","extraInformation":[],"name":"UseArrows"},{"value":"true","type":"Boolean","label":"Use left stick","description":"","group":"Controls","extraInformation":[],"name":"UseLeftStick"},{"value":"","type":"Boolean","label":"Use right stick","description":"","group":"Controls","extraInformation":[],"name":"UseRightStick"},{"value":"A or Cross","type":"Choice","label":"Jump button","description":"","group":"Controls","extraInformation":["A or Cross","B or Circle","X or Square","Y or Triangle","LB or L1","RB or R1","LT or L2","RT or R2"],"name":"JumpButton"}],"sharedPropertyDescriptors":[]},{"description":"Control a 3D physics character with a gamepad.","fullName":"3D platformer gamepad mapper","name":"Platformer3DGamepadMapper","objectType":"","eventsFunctions":[{"fullName":"","functionType":"Action","name":"doStepPreEvents","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Gamepads::C_Controller_X_is_connected"},"parameters":["","GamepadIdentifier",""]}],"actions":[],"events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Gamepads::StickForce"},"parameters":["",">","0","GamepadIdentifier","JoystickIdentifier",""]}],"actions":[{"type":{"value":"Physics3D::PhysicsCharacter3D::SetForwardAngle"},"parameters":["Object","PhysicsCharacter3D","=","Gamepads::StickAngle(GamepadIdentifier, JoystickIdentifier) + CameraAngle(Object.Layer())"]},{"type":{"value":"Physics3D::PhysicsCharacter3D::SimulateStick"},"parameters":["Object","PhysicsCharacter3D","-90","Gamepads::StickForce(GamepadIdentifier, JoystickIdentifier)"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"StringVariable"},"parameters":["JumpButton","=","\"A or Cross\""]},{"type":{"value":"Gamepads::C_Button_pressed"},"parameters":["","GamepadIdentifier","\"A\"","\"Left\""]}],"actions":[{"type":{"value":"Physics3D::PhysicsCharacter3D::SimulateJumpKey"},"parameters":["Object","PhysicsCharacter3D"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"StringVariable"},"parameters":["JumpButton","=","\"B or Circle\""]},{"type":{"value":"Gamepads::C_Button_pressed"},"parameters":["","GamepadIdentifier","\"B\"","\"Left\""]}],"actions":[{"type":{"value":"Physics3D::PhysicsCharacter3D::SimulateJumpKey"},"parameters":["Object","PhysicsCharacter3D"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"StringVariable"},"parameters":["JumpButton","=","\"X or Square\""]},{"type":{"value":"Gamepads::C_Button_pressed"},"parameters":["","GamepadIdentifier","\"X\"","\"Left\""]}],"actions":[{"type":{"value":"Physics3D::PhysicsCharacter3D::SimulateJumpKey"},"parameters":["Object","PhysicsCharacter3D"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"StringVariable"},"parameters":["JumpButton","=","\"Y or Triangle\""]},{"type":{"value":"Gamepads::C_Button_pressed"},"parameters":["","GamepadIdentifier","\"Y\"","\"Left\""]}],"actions":[{"type":{"value":"Physics3D::PhysicsCharacter3D::SimulateJumpKey"},"parameters":["Object","PhysicsCharacter3D"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"StringVariable"},"parameters":["JumpButton","=","\"LB or L1\""]},{"type":{"value":"Gamepads::C_Button_pressed"},"parameters":["","GamepadIdentifier","\"LB\"","\"Left\""]}],"actions":[{"type":{"value":"Physics3D::PhysicsCharacter3D::SimulateJumpKey"},"parameters":["Object","PhysicsCharacter3D"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"StringVariable"},"parameters":["JumpButton","=","\"RB or R1\""]},{"type":{"value":"Gamepads::C_Button_pressed"},"parameters":["","GamepadIdentifier","\"RB\"","\"Left\""]}],"actions":[{"type":{"value":"Physics3D::PhysicsCharacter3D::SimulateJumpKey"},"parameters":["Object","PhysicsCharacter3D"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"StringVariable"},"parameters":["JumpButton","=","\"LT or L2\""]},{"type":{"value":"Gamepads::C_Button_pressed"},"parameters":["","GamepadIdentifier","\"LT\"","\"Left\""]}],"actions":[{"type":{"value":"Physics3D::PhysicsCharacter3D::SimulateJumpKey"},"parameters":["Object","PhysicsCharacter3D"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"StringVariable"},"parameters":["JumpButton","=","\"RT or R2\""]},{"type":{"value":"Gamepads::C_Button_pressed"},"parameters":["","GamepadIdentifier","\"RT\"","\"Left\""]}],"actions":[{"type":{"value":"Physics3D::PhysicsCharacter3D::SimulateJumpKey"},"parameters":["Object","PhysicsCharacter3D"]}]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Gamepads::Platformer3DGamepadMapper","type":"behavior"}],"objectGroups":[]}],"propertyDescriptors":[{"value":"","type":"Behavior","label":"3D physics character","description":"","group":"","extraInformation":["Physics3D::PhysicsCharacter3D"],"name":"PhysicsCharacter3D"},{"value":"1","type":"Number","label":"Gamepad identifier (1, 2, 3 or 4)","description":"","group":"","extraInformation":[],"name":"GamepadIdentifier"},{"value":"Left","type":"Choice","label":"Walk joystick","description":"","group":"Controls","extraInformation":["Left","Right"],"name":"JoystickIdentifier"},{"value":"A or Cross","type":"Choice","label":"Jump button","description":"","group":"Controls","extraInformation":["A or Cross","B or Circle","X or Square","Y or Triangle","LB or L1","RB or R1","LT or L2","RT or R2"],"name":"JumpButton"}],"sharedPropertyDescriptors":[]},{"description":"Control a 3D physics character with a gamepad.","fullName":"3D shooter gamepad mapper","name":"Shooter3DGamepadMapper","objectType":"","eventsFunctions":[{"fullName":"","functionType":"Action","name":"doStepPreEvents","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Gamepads::C_Controller_X_is_connected"},"parameters":["","GamepadIdentifier",""]}],"actions":[],"events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Gamepads::StickForce"},"parameters":["",">","0","GamepadIdentifier","WalkStick",""]}],"actions":[{"type":{"value":"Physics3D::PhysicsCharacter3D::SimulateStick"},"parameters":["Object","PhysicsCharacter3D","Gamepads::StickAngle(GamepadIdentifier, WalkStick)","Gamepads::StickForce(GamepadIdentifier, WalkStick)"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"StringVariable"},"parameters":["JumpButton","=","\"A or Cross\""]},{"type":{"value":"Gamepads::C_Button_pressed"},"parameters":["","GamepadIdentifier","\"A\"","\"Left\""]}],"actions":[{"type":{"value":"Physics3D::PhysicsCharacter3D::SimulateJumpKey"},"parameters":["Object","PhysicsCharacter3D"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"StringVariable"},"parameters":["JumpButton","=","\"B or Circle\""]},{"type":{"value":"Gamepads::C_Button_pressed"},"parameters":["","GamepadIdentifier","\"B\"","\"Left\""]}],"actions":[{"type":{"value":"Physics3D::PhysicsCharacter3D::SimulateJumpKey"},"parameters":["Object","PhysicsCharacter3D"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"StringVariable"},"parameters":["JumpButton","=","\"X or Square\""]},{"type":{"value":"Gamepads::C_Button_pressed"},"parameters":["","GamepadIdentifier","\"X\"","\"Left\""]}],"actions":[{"type":{"value":"Physics3D::PhysicsCharacter3D::SimulateJumpKey"},"parameters":["Object","PhysicsCharacter3D"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"StringVariable"},"parameters":["JumpButton","=","\"Y or Triangle\""]},{"type":{"value":"Gamepads::C_Button_pressed"},"parameters":["","GamepadIdentifier","\"Y\"","\"Left\""]}],"actions":[{"type":{"value":"Physics3D::PhysicsCharacter3D::SimulateJumpKey"},"parameters":["Object","PhysicsCharacter3D"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"StringVariable"},"parameters":["JumpButton","=","\"LB or L1\""]},{"type":{"value":"Gamepads::C_Button_pressed"},"parameters":["","GamepadIdentifier","\"LB\"","\"Left\""]}],"actions":[{"type":{"value":"Physics3D::PhysicsCharacter3D::SimulateJumpKey"},"parameters":["Object","PhysicsCharacter3D"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"StringVariable"},"parameters":["JumpButton","=","\"RB or R1\""]},{"type":{"value":"Gamepads::C_Button_pressed"},"parameters":["","GamepadIdentifier","\"RB\"","\"Left\""]}],"actions":[{"type":{"value":"Physics3D::PhysicsCharacter3D::SimulateJumpKey"},"parameters":["Object","PhysicsCharacter3D"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"StringVariable"},"parameters":["JumpButton","=","\"LT or L2\""]},{"type":{"value":"Gamepads::C_Button_pressed"},"parameters":["","GamepadIdentifier","\"LT\"","\"Left\""]}],"actions":[{"type":{"value":"Physics3D::PhysicsCharacter3D::SimulateJumpKey"},"parameters":["Object","PhysicsCharacter3D"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"StringVariable"},"parameters":["JumpButton","=","\"RT or R2\""]},{"type":{"value":"Gamepads::C_Button_pressed"},"parameters":["","GamepadIdentifier","\"RT\"","\"Left\""]}],"actions":[{"type":{"value":"Physics3D::PhysicsCharacter3D::SimulateJumpKey"},"parameters":["Object","PhysicsCharacter3D"]}]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Gamepads::Shooter3DGamepadMapper","type":"behavior"}],"objectGroups":[]}],"propertyDescriptors":[{"value":"","type":"Behavior","label":"3D physics character","description":"","group":"","extraInformation":["Physics3D::PhysicsCharacter3D"],"name":"PhysicsCharacter3D"},{"value":"1","type":"Number","label":"Gamepad identifier (1, 2, 3 or 4)","description":"","group":"","extraInformation":[],"name":"GamepadIdentifier"},{"value":"Left","type":"Choice","label":"Walk joystick","description":"","group":"Controls","extraInformation":["Left","Right"],"name":"WalkStick"},{"value":"Right","type":"Choice","label":"Camera joystick","description":"","group":"Controls","extraInformation":["Left","Right"],"name":"CameraStick"},{"value":"A or Cross","type":"Choice","label":"Jump button","description":"","group":"Controls","extraInformation":["A or Cross","B or Circle","X or Square","Y or Triangle","LB or L1","RB or R1","LT or L2","RT or R2"],"name":"JumpButton"}],"sharedPropertyDescriptors":[]},{"description":"Control camera rotations with a gamepad.","fullName":"First person camera gamepad mapper","name":"FirstPersonGamepadMapper","objectType":"","eventsFunctions":[{"fullName":"","functionType":"Action","name":"doStepPreEvents","sentence":"","events":[{"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"TODO It's probably a bad idea to rotate the object around Y."},{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["CurrentRotationSpeedZ","=","Gamepads::AcceleratedSpeed(CurrentRotationSpeedZ, Gamepads::StickForceX(GamepadIdentifier, CameraStick) * HorizontalRotationSpeedMax, HorizontalRotationSpeedMax, HorizontalRotationAcceleration, HorizontalRotationDeceleration)"]},{"type":{"value":"SetAngle"},"parameters":["Object","+","CurrentRotationSpeedZ * TimeDelta()"]},{"type":{"value":"SetNumberVariable"},"parameters":["CurrentRotationSpeedY","=","Gamepads::AcceleratedSpeed(CurrentRotationSpeedY, Gamepads::StickForceY(GamepadIdentifier, CameraStick) * VerticalRotationSpeedMax, VerticalRotationSpeedMax, VerticalRotationAcceleration, VerticalRotationDeceleration)"]},{"type":{"value":"Scene3D::Base3DBehavior::SetRotationY"},"parameters":["Object","Object3D","+","CurrentRotationSpeedY * TimeDelta()"]},{"type":{"value":"Scene3D::Base3DBehavior::SetRotationY"},"parameters":["Object","Object3D","=","clamp(Object.Object3D::RotationY(), VerticalAngleMin, VerticalAngleMax)"]},{"type":{"value":"Gamepads::FirstPersonGamepadMapper::LookFromObjectEyes"},"parameters":["Object","Behavior",""]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Gamepads::FirstPersonGamepadMapper","type":"behavior"}],"objectGroups":[]},{"description":"Move the camera to look though _PARAM1_ eyes. The object must look to the right when all its angles are 0 and the top of its head be toward Z+.","fullName":"Look through object eyes","functionType":"Action","group":"Layers and cameras","name":"LookFromObjectEyes","private":true,"sentence":"Move the camera to look though _PARAM0_ eyes","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"CentreCamera"},"parameters":["","Object","","Object.Layer()",""]},{"type":{"value":"Scene3D::SetCameraZ"},"parameters":["","=","Object.Object3D::Z() + Object.Object3D::Depth() + OffsetZ","",""]},{"type":{"value":"Scene3D::SetCameraRotationX"},"parameters":["","=","- Object.Object3D::RotationY() + 90","GetArgumentAsString(\"Layer\")",""]},{"type":{"value":"Scene3D::SetCameraRotationY"},"parameters":["","=","Object.Object3D::RotationX()","GetArgumentAsString(\"Layer\")",""]},{"type":{"value":"SetCameraAngle"},"parameters":["","=","Object.Angle() + 90","Object.Layer()",""]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Gamepads::FirstPersonGamepadMapper","type":"behavior"}],"objectGroups":[]},{"description":"the maximum horizontal rotation speed of the object.","fullName":"Maximum horizontal rotation speed","functionType":"ExpressionAndCondition","group":"First person camera gamepad mapper horizontal rotation configuration","name":"HorizontalRotationSpeedMax","sentence":"the maximum horizontal rotation speed","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["HorizontalRotationSpeedMax"]}]}],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Gamepads::FirstPersonGamepadMapper","type":"behavior"}],"objectGroups":[]},{"fullName":"","functionType":"ActionWithOperator","getterName":"HorizontalRotationSpeedMax","name":"SetHorizontalRotationSpeedMax","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["HorizontalRotationSpeedMax","=","Value"]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Gamepads::FirstPersonGamepadMapper","type":"behavior"}],"objectGroups":[]},{"description":"the horizontal rotation acceleration of the object.","fullName":"Horizontal rotation acceleration","functionType":"ExpressionAndCondition","group":"First person camera gamepad mapper horizontal rotation configuration","name":"HorizontalRotationAcceleration","sentence":"the horizontal rotation acceleration","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["HorizontalRotationAcceleration"]}]}],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Gamepads::FirstPersonGamepadMapper","type":"behavior"}],"objectGroups":[]},{"fullName":"","functionType":"ActionWithOperator","getterName":"HorizontalRotationAcceleration","name":"SetHorizontalRotationAcceleration","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["HorizontalRotationAcceleration","=","Value"]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Gamepads::FirstPersonGamepadMapper","type":"behavior"}],"objectGroups":[]},{"description":"the horizontal rotation deceleration of the object.","fullName":"Horizontal rotation deceleration","functionType":"ExpressionAndCondition","group":"First person camera gamepad mapper horizontal rotation configuration","name":"HorizontalRotationDeceleration","sentence":"the horizontal rotation deceleration","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["HorizontalRotationDeceleration"]}]}],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Gamepads::FirstPersonGamepadMapper","type":"behavior"}],"objectGroups":[]},{"fullName":"","functionType":"ActionWithOperator","getterName":"HorizontalRotationDeceleration","name":"SetHorizontalRotationDeceleration","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["HorizontalRotationDeceleration","=","Value"]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Gamepads::FirstPersonGamepadMapper","type":"behavior"}],"objectGroups":[]},{"description":"the maximum vertical rotation speed of the object.","fullName":"Maximum vertical rotation speed","functionType":"ExpressionAndCondition","group":"First person camera gamepad mapper vertical rotation configuration","name":"VerticalRotationSpeedMax","sentence":"the maximum vertical rotation speed","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["VerticalRotationSpeedMax"]}]}],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Gamepads::FirstPersonGamepadMapper","type":"behavior"}],"objectGroups":[]},{"fullName":"","functionType":"ActionWithOperator","getterName":"VerticalRotationSpeedMax","name":"SetVerticalRotationSpeedMax","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["VerticalRotationSpeedMax","=","Value"]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Gamepads::FirstPersonGamepadMapper","type":"behavior"}],"objectGroups":[]},{"description":"the vertical rotation acceleration of the object.","fullName":"Vertical rotation acceleration","functionType":"ExpressionAndCondition","group":"First person camera gamepad mapper vertical rotation configuration","name":"VerticalRotationAcceleration","sentence":"the vertical rotation acceleration","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["VerticalRotationAcceleration"]}]}],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Gamepads::FirstPersonGamepadMapper","type":"behavior"}],"objectGroups":[]},{"fullName":"","functionType":"ActionWithOperator","getterName":"VerticalRotationAcceleration","name":"SetVerticalRotationAcceleration","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["VerticalRotationAcceleration","=","Value"]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Gamepads::FirstPersonGamepadMapper","type":"behavior"}],"objectGroups":[]},{"description":"the vertical rotation deceleration of the object.","fullName":"Vertical rotation deceleration","functionType":"ExpressionAndCondition","group":"First person camera gamepad mapper vertical rotation configuration","name":"VerticalRotationDeceleration","sentence":"the vertical rotation deceleration","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["VerticalRotationDeceleration"]}]}],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Gamepads::FirstPersonGamepadMapper","type":"behavior"}],"objectGroups":[]},{"fullName":"","functionType":"ActionWithOperator","getterName":"VerticalRotationDeceleration","name":"SetVerticalRotationDeceleration","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["VerticalRotationDeceleration","=","Value"]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Gamepads::FirstPersonGamepadMapper","type":"behavior"}],"objectGroups":[]},{"description":"the minimum vertical camera angle of the object.","fullName":"Minimum vertical camera angle","functionType":"ExpressionAndCondition","group":"First person camera gamepad mapper vertical rotation configuration","name":"VerticalAngleMin","sentence":"the minimum vertical camera angle","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["VerticalAngleMin"]}]}],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Gamepads::FirstPersonGamepadMapper","type":"behavior"}],"objectGroups":[]},{"fullName":"","functionType":"ActionWithOperator","getterName":"VerticalAngleMin","name":"SetVerticalAngleMin","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["VerticalAngleMin","=","Value"]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Gamepads::FirstPersonGamepadMapper","type":"behavior"}],"objectGroups":[]},{"description":"the maximum vertical camera angle of the object.","fullName":"Maximum vertical camera angle","functionType":"ExpressionAndCondition","group":"First person camera gamepad mapper vertical rotation configuration","name":"VerticalAngleMax","sentence":"the maximum vertical camera angle","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["VerticalAngleMax"]}]}],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Gamepads::FirstPersonGamepadMapper","type":"behavior"}],"objectGroups":[]},{"fullName":"","functionType":"ActionWithOperator","getterName":"VerticalAngleMax","name":"SetVerticalAngleMax","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["VerticalAngleMax","=","Value"]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Gamepads::FirstPersonGamepadMapper","type":"behavior"}],"objectGroups":[]},{"description":"the z position offset of the object.","fullName":"Z position offset","functionType":"ExpressionAndCondition","group":"First person camera gamepad mapper position configuration","name":"OffsetZ","sentence":"the z position offset","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["OffsetZ"]}]}],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Gamepads::FirstPersonGamepadMapper","type":"behavior"}],"objectGroups":[]},{"fullName":"","functionType":"ActionWithOperator","getterName":"OffsetZ","name":"SetOffsetZ","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["OffsetZ","=","Value"]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Gamepads::FirstPersonGamepadMapper","type":"behavior"}],"objectGroups":[]}],"propertyDescriptors":[{"value":"","type":"Behavior","label":"3D capability","description":"","group":"","extraInformation":["Scene3D::Base3DBehavior"],"name":"Object3D"},{"value":"1","type":"Number","label":"Gamepad identifier (1, 2, 3 or 4)","description":"","group":"","extraInformation":[],"name":"GamepadIdentifier"},{"value":"Right","type":"Choice","label":"Camera joystick","description":"","group":"","extraInformation":["Left","Right"],"name":"CameraStick"},{"value":"180","type":"Number","unit":"AngularSpeed","label":"Maximum rotation speed","description":"","group":"Horizontal rotation","extraInformation":[],"name":"HorizontalRotationSpeedMax"},{"value":"360","type":"Number","label":"Rotation acceleration","description":"","group":"Horizontal rotation","extraInformation":[],"name":"HorizontalRotationAcceleration"},{"value":"720","type":"Number","label":"Rotation deceleration","description":"","group":"Horizontal rotation","extraInformation":[],"name":"HorizontalRotationDeceleration"},{"value":"120","type":"Number","unit":"AngularSpeed","label":"Maximum rotation speed","description":"","group":"Vertical rotation","extraInformation":[],"name":"VerticalRotationSpeedMax"},{"value":"240","type":"Number","label":"Rotation acceleration","description":"","group":"Vertical rotation","extraInformation":[],"name":"VerticalRotationAcceleration"},{"value":"480","type":"Number","label":"Rotation deceleration","description":"","group":"Vertical rotation","extraInformation":[],"name":"VerticalRotationDeceleration"},{"value":"-90","type":"Number","unit":"DegreeAngle","label":"Minimum angle","description":"","group":"Vertical rotation","extraInformation":[],"name":"VerticalAngleMin"},{"value":"90","type":"Number","unit":"DegreeAngle","label":"Maximum angle","description":"","group":"Vertical rotation","extraInformation":[],"name":"VerticalAngleMax"},{"value":"0","type":"Number","unit":"Pixel","label":"Z position offset","description":"","group":"Position","extraInformation":[],"name":"OffsetZ"},{"value":"0","type":"Number","unit":"AngularSpeed","label":"Current rotation speed Z","description":"","group":"","extraInformation":[],"hidden":true,"name":"CurrentRotationSpeedZ"},{"value":"0","type":"Number","unit":"AngularSpeed","label":"Current rotation speed Y","description":"","group":"","extraInformation":[],"hidden":true,"name":"CurrentRotationSpeedY"}],"sharedPropertyDescriptors":[]},{"description":"Control a top-down character with a gamepad.","fullName":"Top-down gamepad mapper","name":"TopDownGamepadMapper","objectType":"","eventsFunctions":[{"fullName":"","functionType":"Action","name":"doStepPreEvents","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Gamepads::C_Controller_X_is_connected"},"parameters":["","GamepadIdentifier",""]}],"actions":[],"events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"BooleanVariable"},"parameters":["UseArrows","True",""]}],"actions":[],"events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Gamepads::C_Button_pressed"},"parameters":["","GamepadIdentifier","\"Left\"","\"Left\""]}],"actions":[{"type":{"value":"TopDownMovementBehavior::SimulateLeftKey"},"parameters":["Object","TopDownMovement"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Gamepads::C_Button_pressed"},"parameters":["","GamepadIdentifier","\"Right\"","\"Left\""]}],"actions":[{"type":{"value":"TopDownMovementBehavior::SimulateRightKey"},"parameters":["Object","TopDownMovement"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Gamepads::C_Button_pressed"},"parameters":["","GamepadIdentifier","\"Up\"","\"Left\""]}],"actions":[{"type":{"value":"TopDownMovementBehavior::SimulateUpKey"},"parameters":["Object","TopDownMovement"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Gamepads::C_Button_pressed"},"parameters":["","GamepadIdentifier","\"Down\"","\"Left\""]}],"actions":[{"type":{"value":"TopDownMovementBehavior::SimulateDownKey"},"parameters":["Object","TopDownMovement"]}]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"BooleanVariable"},"parameters":["UseLeftStick","True",""]}],"actions":[],"events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"StringVariable"},"parameters":["StickMode","=","\"Analog\""]}],"actions":[{"type":{"value":"TopDownMovementBehavior::SimulateStick"},"parameters":["Object","TopDownMovement","Gamepads::StickRotationValue(GamepadIdentifier, \"Left\")","Gamepads::StickForce(GamepadIdentifier, \"Left\")"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"StringVariable"},"parameters":["StickMode","=","\"360\""]}],"actions":[{"type":{"value":"TopDownMovementBehavior::SimulateStick"},"parameters":["Object","TopDownMovement","Gamepads::StickRotationValue(GamepadIdentifier, \"Left\")","sign(Gamepads::StickForce(GamepadIdentifier, \"Left\"))"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"StringVariable"},"parameters":["StickMode","=","\"8 Directions\""]}],"actions":[],"events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Gamepads::C_Axis_pushed"},"parameters":["","GamepadIdentifier","\"Left\"","\"Left\"",""]}],"actions":[{"type":{"value":"TopDownMovementBehavior::SimulateLeftKey"},"parameters":["Object","TopDownMovement"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Gamepads::C_Axis_pushed"},"parameters":["","GamepadIdentifier","\"Left\"","\"Right\"",""]}],"actions":[{"type":{"value":"TopDownMovementBehavior::SimulateRightKey"},"parameters":["Object","TopDownMovement"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Gamepads::C_Axis_pushed"},"parameters":["","GamepadIdentifier","\"Left\"","\"Up\"",""]}],"actions":[{"type":{"value":"TopDownMovementBehavior::SimulateUpKey"},"parameters":["Object","TopDownMovement"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Gamepads::C_Axis_pushed"},"parameters":["","GamepadIdentifier","\"Left\"","\"Down\"",""]}],"actions":[{"type":{"value":"TopDownMovementBehavior::SimulateDownKey"},"parameters":["Object","TopDownMovement"]}]}]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"BooleanVariable"},"parameters":["UseRightStick","True",""]}],"actions":[],"events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"StringVariable"},"parameters":["StickMode","=","\"Analog\""]}],"actions":[{"type":{"value":"TopDownMovementBehavior::SimulateStick"},"parameters":["Object","TopDownMovement","Gamepads::StickRotationValue(GamepadIdentifier, \"Right\")","Gamepads::StickForce(GamepadIdentifier, \"Right\")"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"StringVariable"},"parameters":["StickMode","=","\"360\""]}],"actions":[{"type":{"value":"TopDownMovementBehavior::SimulateStick"},"parameters":["Object","TopDownMovement","sign(Gamepads::StickForce(GamepadIdentifier, \"Right\"))","1"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"StringVariable"},"parameters":["StickMode","=","\"8 Directions\""]}],"actions":[],"events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Gamepads::C_Axis_pushed"},"parameters":["","GamepadIdentifier","\"Right\"","\"Left\"",""]}],"actions":[{"type":{"value":"TopDownMovementBehavior::SimulateLeftKey"},"parameters":["Object","TopDownMovement"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Gamepads::C_Axis_pushed"},"parameters":["","GamepadIdentifier","\"Right\"","\"Right\"",""]}],"actions":[{"type":{"value":"TopDownMovementBehavior::SimulateRightKey"},"parameters":["Object","TopDownMovement"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Gamepads::C_Axis_pushed"},"parameters":["","GamepadIdentifier","\"Right\"","\"Up\"",""]}],"actions":[{"type":{"value":"TopDownMovementBehavior::SimulateUpKey"},"parameters":["Object","TopDownMovement"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Gamepads::C_Axis_pushed"},"parameters":["","GamepadIdentifier","\"Right\"","\"Down\"",""]}],"actions":[{"type":{"value":"TopDownMovementBehavior::SimulateDownKey"},"parameters":["Object","TopDownMovement"]}]}]}]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Gamepads::TopDownGamepadMapper","type":"behavior"}],"objectGroups":[]}],"propertyDescriptors":[{"value":"","type":"Behavior","label":"Top-down movement behavior","description":"","group":"","extraInformation":["TopDownMovementBehavior::TopDownMovementBehavior"],"name":"TopDownMovement"},{"value":"1","type":"Number","label":"Gamepad identifier (1, 2, 3 or 4)","description":"","group":"","extraInformation":[],"name":"GamepadIdentifier"},{"value":"true","type":"Boolean","label":"Use directional pad","description":"","group":"Controls","extraInformation":[],"name":"UseArrows"},{"value":"true","type":"Boolean","label":"Use left stick","description":"","group":"Controls","extraInformation":[],"name":"UseLeftStick"},{"value":"","type":"Boolean","label":"Use right stick","description":"","group":"Controls","extraInformation":[],"name":"UseRightStick"},{"value":"Analog","type":"Choice","label":"Stick mode","description":"","group":"Controls","extraInformation":["Analog","360","8 Directions"],"name":"StickMode"}],"sharedPropertyDescriptors":[]}],"eventsBasedObjects":[]},{"author":"@Bouh, @arthuro555","category":"User interface","extensionNamespace":"","fullName":"Cursor type","gdevelopVersion":">=5.5.222","helpPath":"","iconUrl":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0ibWRpLWN1cnNvci1kZWZhdWx0LW91dGxpbmUiIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTAuMDcsMTQuMjdDMTAuNTcsMTQuMDMgMTEuMTYsMTQuMjUgMTEuNCwxNC43NUwxMy43LDE5Ljc0TDE1LjUsMTguODlMMTMuMTksMTMuOTFDMTIuOTUsMTMuNDEgMTMuMTcsMTIuODEgMTMuNjcsMTIuNThMMTMuOTUsMTIuNUwxNi4yNSwxMi4wNUw4LDUuMTJWMTUuOUw5LjgyLDE0LjQzTDEwLjA3LDE0LjI3TTEzLjY0LDIxLjk3QzEzLjE0LDIyLjIxIDEyLjU0LDIyIDEyLjMxLDIxLjVMMTAuMTMsMTYuNzZMNy42MiwxOC43OEM3LjQ1LDE4LjkyIDcuMjQsMTkgNywxOUExLDEgMCAwLDEgNiwxOFYzQTEsMSAwIDAsMSA3LDJDNy4yNCwyIDcuNDcsMi4wOSA3LjY0LDIuMjNMNy42NSwyLjIyTDE5LjE0LDExLjg2QzE5LjU3LDEyLjIyIDE5LjYyLDEyLjg1IDE5LjI3LDEzLjI3QzE5LjEyLDEzLjQ1IDE4LjkxLDEzLjU3IDE4LjcsMTMuNjFMMTUuNTQsMTQuMjNMMTcuNzQsMTguOTZDMTgsMTkuNDYgMTcuNzYsMjAuMDUgMTcuMjYsMjAuMjhMMTMuNjQsMjEuOTdaIiAvPjwvc3ZnPg==","name":"CursorType","previewIconUrl":"https://resources.gdevelop-app.com/assets/Icons/cursor-default-outline.svg","shortDescription":"Provides an action to change the type of the cursor, and a behavior to change the cursor when an object is hovered.","version":"0.0.8","description":["Provides an action to change the type of the cursor, and a behavior to change the cursor when an object is hovered.","","Find the list of cursors here: https://developer.mozilla.org/en-US/docs/Web/CSS/cursor"],"origin":{"identifier":"CursorType","name":"gdevelop-extension-store"},"tags":["mouse","cursor","pointer","javascript","desktop"],"authorIds":["ZgrsWuRTAkXgeuPV9bo0zuEcA2w1","2OwwM8ToR9dx9RJ2sAKTcrLmCB92"],"dependencies":[],"globalVariables":[{"name":"ZOrderSorting","type":"number","value":0.0}],"sceneVariables":[{"name":"DefaultCursor","type":"string","value":"default"}],"eventsFunctions":[{"description":"Change the type of the cursor.","fullName":"Cursor type","functionType":"Action","name":"ChangeCursorType","sentence":"Change the cursor to _PARAM1_","events":[{"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Set as variable instead of directly setting as a CursorHover behavior can override it.\nBy using a variable, we ensure to be able to change it back to that \"default\" after the override is over."},{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetStringVariable"},"parameters":["DefaultCursor","=","CursorType"]},{"type":{"value":"CursorType::DoChangeCursorType"},"parameters":["","CursorType",""]}]}],"parameters":[{"defaultValue":"default","description":"The new cursor type","longDescription":"List of available cursors on https://developer.mozilla.org/en-US/docs/Web/CSS/cursor","name":"CursorType","supplementaryInformation":"[\"auto\",\"default\",\"none\",\"context-menu\",\"help\",\"pointer\",\"progress\",\"wait\",\"cell\",\"crosshair\",\"text\",\"vertical-text\",\"alias\",\"copy\",\"move\",\"no-drop\",\"not-allowed\",\"grab\",\"grabbing\",\"all-scroll\",\"col-resize\",\"row-resize\",\"n-resize\",\"e-resize\",\"s-resize\",\"w-resize\",\"ne-resize\",\"nw-resize\",\"se-resize\",\"sw-resize\",\"ew-resize\",\"ns-resize\",\"nwse-resize\",\"zoom-in\",\"zoom-out\"]","type":"stringWithSelector"}],"objectGroups":[]},{"description":"Do change the type of the cursor.","fullName":"Do change cursor type","functionType":"Action","name":"DoChangeCursorType","private":true,"sentence":"Do change the cursor to _PARAM1_","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const cursorType = eventsFunctionContext.getArgument(\"CursorType\");","","runtimeScene.getGame().getRenderer().getCanvas().style.cursor = cursorType;",""],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"parameters":[{"description":"The new cursor type","name":"CursorType","supplementaryInformation":"[]","type":"string"}],"objectGroups":[]},{"fullName":"","functionType":"Action","name":"onScenePreEvents","sentence":"","events":[{"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Reset ordering as the object with highest Z-Order might not exist anymore or be not be hovered anymore."},{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["ZOrderSorting","=","0"]},{"type":{"value":"CursorType::DoChangeCursorType"},"parameters":["","DefaultCursor",""]}]}],"parameters":[],"objectGroups":[]}],"eventsBasedBehaviors":[{"description":"Change the cursor appearence when the object is hovered (on Windows, macOS or Linux).","fullName":"Custom cursor when hovered","name":"CursorHover","objectType":"","eventsFunctions":[{"fullName":"","functionType":"Action","name":"doStepPostEvents","sentence":"","events":[{"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Check the z Order to ensure the cursor shown is the one from the foremost object "},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Plan"},"parameters":["Object",">","ZOrderSorting"]},{"type":{"value":"SourisSurObjet"},"parameters":["Object","","",""]}],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["ZOrderSorting","=","Object.ZOrder()"]},{"type":{"value":"CursorType::DoChangeCursorType"},"parameters":["","CursorType",""]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"CursorType::CursorHover","type":"behavior"}],"objectGroups":[]}],"propertyDescriptors":[{"value":"default","type":"Choice","label":"The cursor type","description":"See https://developer.mozilla.org/en-US/docs/Web/CSS/cursor for a list of possible cursors.","group":"","extraInformation":["auto","default","none","context-menu","help","pointer","progress","wait","cell","crosshair","text","vertical-text","alias","copy","move","no-drop","not-allowed","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nwse-resize","zoom-in","zoom-out"],"name":"CursorType"}],"sharedPropertyDescriptors":[]}],"eventsBasedObjects":[]},{"author":"PANDAKO-GitHub","category":"Input","extensionNamespace":"","fullName":"Mouse Pointer Lock","gdevelopVersion":">=5.5.222","helpPath":"","iconUrl":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjMsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iSWNvbnMiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMzIgMzIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMyIDMyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KCS5zdDB7ZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDoxMDt9DQo8L3N0eWxlPg0KPHBvbHlsaW5lIGNsYXNzPSJzdDAiIHBvaW50cz0iMTksMTkgMjQsMTkgMjQsMjQgIi8+DQo8cG9seWxpbmUgY2xhc3M9InN0MCIgcG9pbnRzPSI2LDIzIDExLDIzIDExLDE4ICIvPg0KPHBhdGggY2xhc3M9InN0MCIgZD0iTTI0LDE5LjRjLTAuNywwLjgtMS40LDEuNi0yLjIsMi40Yy03LDctMTUuMywxMC4yLTE4LjUsN3MtMC4xLTExLjUsNy0xOC41czE1LjMtMTAuMiwxOC41LTcNCgljMS40LDEuNCwxLjYsMy42LDAuOCw2LjMiLz4NCjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMSwyMi41Yy0wLjMtMC4yLTAuNS0wLjUtMC44LTAuOGMtNy03LTEwLjItMTUuMy03LTE4LjVzMTEuNS0wLjEsMTguNSw3czEwLjIsMTUuMyw3LDE4LjUNCgljLTEuNywxLjctNC44LDEuNi04LjQsMC4xIi8+DQo8L3N2Zz4NCg==","name":"MousePointerLock","previewIconUrl":"https://resources.gdevelop-app.com/assets/Icons/Line Hero Pack/Master/SVG/Virtual Reality/Virtual Reality_360_rotate_vr_movement.svg","shortDescription":"This behavior removes the limit on the distance the mouse can move and hides the cursor.","version":"0.3.0","description":["This behavior removes the limit on the distance the mouse can move and hides the cursor.","","For example, a user can rotate or continue to manipulate an object by moving the mouse endlessly ([open the project online](https://editor.gdevelop.io/?project=example://mouse-pointer-lock)).","Without the pointer lock, the rotation or operation will stop the moment the pointer reaches the edge of the browser or screen.","","Game players don't have to worry about leaving the gameplay area or accidentally clicking on another application that moves the mouse focus away from the game.","","Locking the pointer locks `CursorX()` and `CursorY()` expressions.","Use `MovementX()` and `MovementY()` instead.",""],"origin":{"identifier":"MousePointerLock","name":"gdevelop-extension-store"},"tags":["mouse","lock","cursor","pointer"],"authorIds":["Zu55H5hcb9YmZTltIVOTAFDJQyB2","IWykYNRvhCZBN3vEgKEbBPOR3Oc2"],"dependencies":[],"globalVariables":[],"sceneVariables":[{"name":"TouchId","type":"number","value":-1.0},{"name":"OldX","type":"number","value":0.0},{"name":"OldY","type":"number","value":0.0},{"name":"TouchSpeedFactor","type":"number","value":4.0}],"eventsFunctions":[{"fullName":"","functionType":"Action","name":"onFirstSceneLoaded","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["class PointerLockHandler {","    movementX = 0;","    movementY = 0;","    retried = false;","    /**","     * @type {gdjs.RuntimeGame}","     */","    game;","","    /**","     * @param {gdjs.RuntimeGame} game","     */","    constructor(game) {","        this.game = game;","        const canvas = game.getRenderer().getCanvas();","","        canvas.addEventListener(\"pointermove\", event => {","            if (!!document.pointerLockElement) {","                this.movementX += event.movementX || 0;","                this.movementY += event.movementY || 0;","            }","        }, false);","","        document.addEventListener(\"pointerlockerror\", event => {","            if (!this.retried) {","                canvas.requestPointerLock();","                this.retried = true;","            }","        });","    }","","    requestPointerLock() {","        const canvas = this.game.getRenderer().getCanvas();","        if (canvas.requestPointerLock && !document.pointerLockElement) {","            this.retried = false;","            canvas.requestPointerLock({ unadjustedMovement: true });","        }","    }","","    exitPointerLock() {","        if (document.exitPointerLock) {","            document.exitPointerLock();","        }","    }","","    isPointerLocked() {","        return !!document.pointerLockElement;","    }","","    resetMovement() {","        this.movementX = 0;","        this.movementY = 0;","    }","};","","gdjs._MousePointerLockExtension = { handler: new PointerLockHandler(runtimeScene.getGame()) };",""],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"parameters":[],"objectGroups":[]},{"fullName":"","functionType":"Action","name":"onScenePostEvents","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const { handler } = gdjs._MousePointerLockExtension;\r","\r","handler.resetMovement();\r",""],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"MousePointerLock::isEmulatingPointerLock"},"parameters":["",""]}],"actions":[{"type":{"value":"MousePointerLock::SetMovementX"},"parameters":["","=","(MousePointerLock::TouchX(TouchId) - OldX) * TouchSpeedFactor",""]},{"type":{"value":"MousePointerLock::SetMovementY"},"parameters":["","=","(MousePointerLock::TouchY(TouchId) - OldY) * TouchSpeedFactor",""]},{"type":{"value":"SetNumberVariable"},"parameters":["OldX","=","MousePointerLock::TouchX(TouchId)"]},{"type":{"value":"SetNumberVariable"},"parameters":["OldY","=","MousePointerLock::TouchY(TouchId)"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"HasTouchEnded"},"parameters":["","TouchId"]}],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["TouchId","=","-1"]}]}],"parameters":[],"objectGroups":[]},{"description":"Lock the mouse pointer to hide it.","fullName":"Request Pointer Lock","functionType":"Action","name":"RequestPointerLock","sentence":"Request Pointer Lock","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"HasAnyTouchOrMouseStarted"},"parameters":[""]},{"type":{"value":"NumberVariable"},"parameters":["TouchId","=","-1"]}],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["TouchId","=","StartedTouchOrMouseId(0)"]},{"type":{"value":"SetNumberVariable"},"parameters":["OldX","=","MousePointerLock::TouchX(TouchId)"]},{"type":{"value":"SetNumberVariable"},"parameters":["OldY","=","MousePointerLock::TouchY(TouchId)"]}]},{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const { handler } = gdjs._MousePointerLockExtension;\r","\r","handler.requestPointerLock();\r",""],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"parameters":[],"objectGroups":[]},{"description":"Unlocks the mouse pointer and show it.","fullName":"Exit pointer lock","functionType":"Action","name":"ExitPointerLock","sentence":"Exit pointer lock","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["TouchId","=","-1"]}]},{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["\r","const { handler } = gdjs._MousePointerLockExtension;\r","\r","handler.exitPointerLock();\r",""],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"parameters":[],"objectGroups":[]},{"description":"Check if the mouse pointer is locked.","fullName":"Pointer is locked","functionType":"Condition","name":"isPointerLocked","sentence":"The mouse pointer is locked","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberVariable"},"parameters":["TouchId",">=","0"]}],"actions":[{"type":{"value":"SetReturnBoolean"},"parameters":["True"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberVariable"},"parameters":["TouchId","<","0"]},{"type":{"value":"MousePointerLock::isPointerActuallyLocked"},"parameters":["",""]}],"actions":[{"type":{"value":"SetReturnBoolean"},"parameters":["True"]}]}],"parameters":[],"objectGroups":[]},{"description":"Check if the mouse pointer is actually locked.","fullName":"Pointer is actually locked","functionType":"Condition","name":"isPointerActuallyLocked","private":true,"sentence":"The mouse pointer actually is locked","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["\r","const { handler } = gdjs._MousePointerLockExtension;\r","\r","eventsFunctionContext.returnValue = handler.isPointerLocked();\r",""],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"parameters":[],"objectGroups":[]},{"description":"Check if the mouse pointer lock is emulated.","fullName":"Pointer lock is emulated","functionType":"Condition","name":"isEmulatingPointerLock","private":true,"sentence":"The mouse pointer is lock is emulated","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":true,"value":"MousePointerLock::isPointerActuallyLocked"},"parameters":["",""]},{"type":{"value":"NumberVariable"},"parameters":["TouchId",">=","0"]}],"actions":[{"type":{"value":"SetReturnBoolean"},"parameters":["True"]}]}],"parameters":[],"objectGroups":[]},{"description":"Check if the locked pointer is moving.","fullName":"Locked pointer is moving","functionType":"Condition","name":"IsMoving","sentence":"Locked pointer is moving","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"BuiltinCommonInstructions::Or"},"parameters":[],"subInstructions":[{"type":{"value":"MousePointerLock::MovementX"},"parameters":["","!=","0",""]},{"type":{"value":"MousePointerLock::MovementY"},"parameters":["","!=","0",""]}]}],"actions":[{"type":{"value":"SetReturnBoolean"},"parameters":["True"]}]}],"parameters":[],"objectGroups":[]},{"description":"the movement of the locked pointer on the X axis.","fullName":"Pointer X movement","functionType":"ExpressionAndCondition","name":"MovementX","sentence":"the movement of the locked pointer on the X axis","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["\r","eventsFunctionContext.returnValue = gdjs._MousePointerLockExtension.handler.movementX || 0;\r",""],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[],"objectGroups":[]},{"description":"the movement of the locked pointer on the X axis.","fullName":"Pointer X movement","functionType":"ActionWithOperator","getterName":"MovementX","name":"SetMovementX","private":true,"sentence":"the movement of the locked pointer on the X axis","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["\r","const value = eventsFunctionContext.getArgument(\"Value\");\r","gdjs._MousePointerLockExtension.handler.movementX = value;\r",""],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"parameters":[],"objectGroups":[]},{"description":"the movement of the pointer on the Y axis.","fullName":"Pointer Y movement","functionType":"ExpressionAndCondition","name":"MovementY","sentence":"the movement of the pointer on the Y axis","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["\r","eventsFunctionContext.returnValue = gdjs._MousePointerLockExtension.handler.movementY || 0;\r",""],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[],"objectGroups":[]},{"description":"the movement of the locked pointer on the X axis.","fullName":"Pointer X movement","functionType":"ActionWithOperator","getterName":"MovementY","name":"SetMovementY","private":true,"sentence":"the movement of the locked pointer on the X axis","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["\r","const value = eventsFunctionContext.getArgument(\"Value\");\r","gdjs._MousePointerLockExtension.handler.movementY = value;\r",""],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"parameters":[],"objectGroups":[]},{"description":"Return the X position of a specific touch","fullName":"Touch X position","functionType":"Expression","name":"TouchX","private":true,"sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const touchId = eventsFunctionContext.getArgument(\"NewTouchId\");","eventsFunctionContext.returnValue = runtimeScene.getGame().getInputManager().getTouchX(touchId);",""],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[{"description":"Touch identifier","name":"NewTouchId","type":"expression"}],"objectGroups":[]},{"description":"Return the Y position of a specific touch","fullName":"Touch Y position","functionType":"Expression","name":"TouchY","private":true,"sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const touchId = eventsFunctionContext.getArgument(\"NewTouchId\");","eventsFunctionContext.returnValue = runtimeScene.getGame().getInputManager().getTouchY(touchId);",""],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[{"description":"Touch identifier","name":"NewTouchId","type":"expression"}],"objectGroups":[]},{"description":"the speed factor for touch movement.","fullName":"Speed factor for touch movement","functionType":"ExpressionAndCondition","name":"TouchSpeedFactor","sentence":"the speed factor for touch movement","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["TouchSpeedFactor"]}]}],"expressionType":{"type":"expression"},"parameters":[],"objectGroups":[]},{"fullName":"","functionType":"ActionWithOperator","getterName":"TouchSpeedFactor","name":"SetTouchSpeedFactor","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["TouchSpeedFactor","=","Value"]}]}],"parameters":[],"objectGroups":[]}],"eventsBasedBehaviors":[{"description":"Control camera rotations with a mouse.","fullName":"First person camera mouse mapper","name":"FirstPersonPointerMapper","objectType":"","eventsFunctions":[{"fullName":"","functionType":"Action","name":"doStepPreEvents","sentence":"","events":[{"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"TODO It's probably a bad idea to rotate the object around Y."},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"MousePointerLock::isPointerLocked"},"parameters":["",""]}],"actions":[{"type":{"value":"SetAngle"},"parameters":["Object","+","MousePointerLock::MovementX() * HorizontalSpeed / SceneWindowWidth()"]},{"type":{"value":"Scene3D::Base3DBehavior::SetRotationY"},"parameters":["Object","Object3D","+","MousePointerLock::MovementY() * VerticalSpeed / SceneWindowHeight()"]},{"type":{"value":"Scene3D::Base3DBehavior::SetRotationY"},"parameters":["Object","Object3D","=","clamp(Object.Object3D::RotationY(), VerticalAngleMin, VerticalAngleMax)"]},{"type":{"value":"MousePointerLock::FirstPersonPointerMapper::LookFromObjectEyes"},"parameters":["Object","Behavior",""]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"MouseButtonReleased"},"parameters":["","Left"]},{"type":{"value":"BooleanVariable"},"parameters":["ShouldLock","True",""]},{"type":{"inverted":true,"value":"MousePointerLock::isPointerLocked"},"parameters":["",""]}],"actions":[{"type":{"value":"MousePointerLock::RequestPointerLock"},"parameters":["",""]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"MousePointerLock::FirstPersonPointerMapper","type":"behavior"}],"objectGroups":[]},{"description":"Move the camera to look though _PARAM1_ eyes. The object must look to the right when all its angles are 0 and the top of its head be toward Z+.","fullName":"Look through object eyes","functionType":"Action","group":"Layers and cameras","name":"LookFromObjectEyes","private":true,"sentence":"Move the camera to look though _PARAM0_ eyes","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"CentreCamera"},"parameters":["","Object","","Object.Layer()",""]},{"type":{"value":"Scene3D::SetCameraZ"},"parameters":["","=","Object.Object3D::Z() + Object.Object3D::Depth() + OffsetZ","",""]},{"type":{"value":"Scene3D::SetCameraRotationX"},"parameters":["","=","- Object.Object3D::RotationY() + 90","GetArgumentAsString(\"Layer\")",""]},{"type":{"value":"Scene3D::SetCameraRotationY"},"parameters":["","=","Object.Object3D::RotationX()","GetArgumentAsString(\"Layer\")",""]},{"type":{"value":"SetCameraAngle"},"parameters":["","=","Object.Angle() + 90","Object.Layer()",""]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"MousePointerLock::FirstPersonPointerMapper","type":"behavior"}],"objectGroups":[]},{"description":"the horizontal rotation speed factor of the object.","fullName":"Horizontal rotation speed factor","functionType":"ExpressionAndCondition","group":"First person camera mouse mapper configuration","name":"HorizontalSpeed","sentence":"the horizontal rotation speed factor","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["HorizontalSpeed"]}]}],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"MousePointerLock::FirstPersonPointerMapper","type":"behavior"}],"objectGroups":[]},{"fullName":"","functionType":"ActionWithOperator","getterName":"HorizontalSpeed","name":"SetHorizontalSpeed","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["HorizontalSpeed","=","Value"]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"MousePointerLock::FirstPersonPointerMapper","type":"behavior"}],"objectGroups":[]},{"description":"the vertical rotation speed factor of the object.","fullName":"Vertical rotation speed factor","functionType":"ExpressionAndCondition","group":"First person camera mouse mapper configuration","name":"VerticalSpeed","sentence":"the vertical rotation speed factor","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["VerticalSpeed"]}]}],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"MousePointerLock::FirstPersonPointerMapper","type":"behavior"}],"objectGroups":[]},{"fullName":"","functionType":"ActionWithOperator","getterName":"VerticalSpeed","name":"SetVerticalSpeed","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["VerticalSpeed","=","Value"]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"MousePointerLock::FirstPersonPointerMapper","type":"behavior"}],"objectGroups":[]},{"description":"the minimum vertical camera angle of the object.","fullName":"Minimum vertical camera angle","functionType":"ExpressionAndCondition","group":"First person camera mouse mapper configuration","name":"VerticalAngleMin","sentence":"the minimum vertical camera angle","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["VerticalAngleMin"]}]}],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"MousePointerLock::FirstPersonPointerMapper","type":"behavior"}],"objectGroups":[]},{"fullName":"","functionType":"ActionWithOperator","getterName":"VerticalAngleMin","name":"SetVerticalAngleMin","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["VerticalAngleMin","=","Value"]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"MousePointerLock::FirstPersonPointerMapper","type":"behavior"}],"objectGroups":[]},{"description":"the maximum vertical camera angle of the object.","fullName":"Maximum vertical camera angle","functionType":"ExpressionAndCondition","group":"First person camera mouse mapper configuration","name":"VerticalAngleMax","sentence":"the maximum vertical camera angle","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["VerticalAngleMax"]}]}],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"MousePointerLock::FirstPersonPointerMapper","type":"behavior"}],"objectGroups":[]},{"fullName":"","functionType":"ActionWithOperator","getterName":"VerticalAngleMax","name":"SetVerticalAngleMax","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["VerticalAngleMax","=","Value"]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"MousePointerLock::FirstPersonPointerMapper","type":"behavior"}],"objectGroups":[]},{"description":"the z position offset of the object.","fullName":"Z position offset","functionType":"ExpressionAndCondition","group":"First person camera mouse mapper configuration","name":"OffsetZ","sentence":"the z position offset","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["OffsetZ"]}]}],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"MousePointerLock::FirstPersonPointerMapper","type":"behavior"}],"objectGroups":[]},{"fullName":"","functionType":"ActionWithOperator","getterName":"OffsetZ","name":"SetOffsetZ","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["OffsetZ","=","Value"]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"MousePointerLock::FirstPersonPointerMapper","type":"behavior"}],"objectGroups":[]}],"propertyDescriptors":[{"value":"","type":"Behavior","label":"3D capability","description":"","group":"","extraInformation":["Scene3D::Base3DBehavior"],"name":"Object3D"},{"value":"200","type":"Number","unit":"Dimensionless","label":"Horizontal rotation speed factor","description":"","group":"","extraInformation":[],"name":"HorizontalSpeed"},{"value":"100","type":"Number","unit":"Dimensionless","label":"Vertical rotation speed factor","description":"","group":"","extraInformation":[],"name":"VerticalSpeed"},{"value":"-90","type":"Number","unit":"DegreeAngle","label":"Minimum vertical camera angle","description":"","group":"","extraInformation":[],"name":"VerticalAngleMin"},{"value":"90","type":"Number","unit":"DegreeAngle","label":"Maximum vertical camera angle","description":"","group":"","extraInformation":[],"name":"VerticalAngleMax"},{"value":"0","type":"Number","unit":"Pixel","label":"Z position offset","description":"","group":"","extraInformation":[],"name":"OffsetZ"},{"value":"true","type":"Boolean","label":"Lock the pointer on click","description":"","group":"","extraInformation":[],"name":"ShouldLock"}],"sharedPropertyDescriptors":[]}],"eventsBasedObjects":[]},{"author":"","category":"Visual effect","extensionNamespace":"","fullName":"Advanced 3D tween","gdevelopVersion":">=5.5.222","helpPath":"","iconUrl":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0ibWRpLXRlbm5pcy1iYWxsIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZD0iTTEyLDJDMTQuNSwyIDE2Ljc1LDIuOSAxOC41LDQuNEMxNi4zNiw2LjIzIDE1LDguOTYgMTUsMTJDMTUsMTUuMDQgMTYuMzYsMTcuNzcgMTguNSwxOS42QzE2Ljc1LDIxLjEgMTQuNSwyMiAxMiwyMkM5LjUsMjIgNy4yNSwyMS4xIDUuNSwxOS42QzcuNjQsMTcuNzcgOSwxNS4wNCA5LDEyQzksOC45NiA3LjY0LDYuMjMgNS41LDQuNEM3LjI1LDIuOSA5LjUsMiAxMiwyTTIyLDEyQzIyLDE0LjMyIDIxLjIxLDE2LjQ1IDE5Ljg4LDE4LjE1QzE4LjEyLDE2LjY4IDE3LDE0LjQ3IDE3LDEyQzE3LDkuNTMgMTguMTIsNy4zMiAxOS44OCw1Ljg1QzIxLjIxLDcuNTUgMjIsOS42OCAyMiwxMk0yLDEyQzIsOS42OCAyLjc5LDcuNTUgNC4xMiw1Ljg1QzUuODgsNy4zMiA3LDkuNTMgNywxMkM3LDE0LjQ3IDUuODgsMTYuNjggNC4xMiwxOC4xNUMyLjc5LDE2LjQ1IDIsMTQuMzIgMiwxMloiIC8+PC9zdmc+","name":"Tween3D","previewIconUrl":"https://asset-resources.gdevelop.io/public-resources/Icons/30bc03f9cf5f2f42960246a605352a6937ae6b603f0177396a83193849a4724a_tennis-ball.svg","shortDescription":"Smoothly squash, strentch, tint and wobble 3D models.","version":"0.3.0","description":["Change 3D models proportions over time to make smooth animations like wobbling.","","It's used in this example:","* a 3D Bomberman-like game ([open the project online](https://editor.gdevelop.io/?project=example://3d-bomber-bunny))","","Breaking changes of 0.1.0:","- The Tween behavior is now required by the 3D Tween behavior. Add the Tween behavior on any object that uses the 3D Tween behavior"],"origin":{"identifier":"Tween3D","name":"gdevelop-extension-store"},"tags":["3d","tween","smooth","interpolation","wobble","color"],"authorIds":["IWykYNRvhCZBN3vEgKEbBPOR3Oc2","dt0tRnf2kHWJnjkrpnzTzNj9Yc63"],"dependencies":[],"globalVariables":[],"sceneVariables":[],"eventsFunctions":[{"fullName":"","functionType":"Action","name":"onFirstSceneLoaded","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"Tween3D::DefineHelperClasses"},"parameters":["",""]}]}],"parameters":[],"objectGroups":[]},{"description":"Define helper classes JavaScript code.","fullName":"Define helper classes","functionType":"Action","name":"DefineHelperClasses","private":true,"sentence":"Define helper classes JavaScript code","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["if (gdjs.__tween3DExtension) {","  return;","}","","class Tint {","  /**","   * Materials by material `id`.","   * @type {Map<number, THREE.Material>}","   */","  materials;","  usageCount = 0;","","  /**","   * @param materials {Map<number, THREE.Material>}","   */","  constructor(materials) {","    this.materials = materials;","  }","","  /**","   * @param object {gdjs.RuntimeObject3D}","   */","  applyTo(object) {","    object.get3DRendererObject().traverse((mesh) => {","      if (mesh.material) {","        const material = mesh.material;","        const originalId = material.originalId || material.id;","        const tintedMaterial = this.materials.get(originalId);","        if (tintedMaterial) {","          mesh.material = tintedMaterial;","        }","      }","    });","  }","","  /**","   * @param tintColor {number}","   * @param originalTint {Tint}","   */","  setColor(tintColor, originalTint) {","    const originalMaterials = originalTint.materials;","    for (const [materialId, material] of this.materials) {","      const originalMaterial = originalMaterials.get(materialId);","      if (!originalMaterial) {","        // A new material may have been changed by another extension.","        continue;","      }","      const originalColor = originalMaterial.color;","","      const color = material.color;","      color.setHex(tintColor);","      color.r *= originalColor.r;","      color.g *= originalColor.g;","      color.b *= originalColor.b;","    }","  }","","  dispose() {","    for (const material of this.materials.values()) {","      material.dispose();","    }","  }","}","","class TintManager {","  /**","   * Tints by color hex.","   * @type {Map<integer, Tint>}","   */","  tints = new Map();","  /**","   * Materials by material `id`.","   * @type {Tint}","   */","  originalTint;","  /**","   * @type {Array<THREE.Material>}","   */","  recycledTints = [];","","  /**","   * @param {gdjs.RuntimeObject3D} object","   */","  constructor(object) {","    const materials = new Map();","    object.get3DRendererObject().traverse((mesh) => {","      if (mesh.material && mesh.material.color) {","        const material = mesh.material;","        materials.set(material.id, material);","      }","    });","    this.originalTint = new Tint(materials);","  }","","  /**","   * @param {gdjs.RuntimeObject3D} object","   * @param {number} color","   */","  applyTint(object, color) {","    const previousColor = this.getTint(object);","    if (color === previousColor) {","      return;","    }","    if (previousColor !== 0xffffff) {","      const previousTint = this.tints.get(previousColor);","      previousTint.usageCount--;","      if (previousTint.usageCount === 0) {","        this.tints.delete(previousColor);","        this.recycledTints.push(previousTint);","      }","    }","    let tint = color === 0xffffff ? this.originalTint : this.tints.get(color);","    if (!tint) {","      tint = this.createTint(object, color);","      this.tints.set(color, tint);","    }","    tint.applyTo(object);","    tint.usageCount++;","    object.__tint3DExtension_tint = color;","  }","","  /**","   * @param {gdjs.RuntimeObject3D} object","   * @return {number}","   */","  getTint(object) {","    return object.__tint3DExtension_tint === undefined ? 0xffffff : object.__tint3DExtension_tint;","  }","","  /**","   * @param {gdjs.RuntimeObject3D} object","   * @param {number} color","   */","  createTint(object, color) {","    let tint;","    if (this.recycledTints.length > 0) {","      tint = this.recycledTints.pop();","      tint.usageCount = 0;","    }","    else {","      const materials = new Map();","      for (const [originalId, material] of this.originalTint.materials) {","        const tintedMaterial = material.clone();","        tintedMaterial.originalId = originalId;","        materials.set(originalId, tintedMaterial);","      }","      tint = new Tint(materials);","    }","    tint.setColor(color, this.originalTint);","    return tint;","  }","","  dispose() {","    for (const tint of this.tints.values()) {","      tint.dispose();","    }","    this.tints.clear();","    for (const tint of this.recycledTints) {","      tint.dispose();","    }","    this.recycledTints.length = 0;","  }","}","","gdjs.registerObjectDeletedFromSceneCallback(function (runtimeScene, deletedObject) {","  const extension = runtimeScene.__tween3DExtension;","  if (!extension) {","    return;","  }","  const managers = extension.tintManagers;","  const manager = managers.get(deletedObject.getName());","  if (manager) {","    manager.applyTint(deletedObject, 0xffffff);","  }","});","","","/**"," * @param {number} r"," * @param {number} g"," * @param {number} b"," * @return {number[]}"," */","const rgbToHsl = (r, g, b) => {","  r /= 255;","  g /= 255;","  b /= 255;","  let v = Math.max(r, g, b),","    c = v - Math.min(r, g, b),","    f = 1 - Math.abs(v + v - c - 1);","  let h =","    c &&","    (v === r ? (g - b) / c : v === g ? 2 + (b - r) / c : 4 + (r - g) / c);","  return [","    Math.round(60 * (h < 0 ? h + 6 : h)),","    Math.round((f ? c / f : 0) * 100),","    Math.round(((v + v - c) / 2) * 100),","  ];","};","","/**"," * @param {number} h"," * @param {number} s"," * @param {number} l"," * @return {number[]}"," */","const hslToRgb = (h, s, l) => {","  h = h %= 360;","  if (h < 0) {","    h += 360;","  }","  s = s / 100;","  l = l / 100;","  const a = s * Math.min(l, 1 - l);","  const f = (n = 0, k = (n + h / 30) % 12) =>","    l - a * Math.max(Math.min(k - 3, 9 - k, 1), -1);","  return [","    Math.round(f(0) * 255),","    Math.round(f(8) * 255),","    Math.round(f(4) * 255),","  ];","};","","gdjs.__tween3DExtension = {","  TintManager,","  rgbToHsl,","  hslToRgb,","};",""],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"parameters":[],"objectGroups":[]},{"description":"Change the tint of an object. The default color is white.","fullName":"Tint color","functionType":"Action","group":"Color","name":"SetTint","sentence":"Change tint of _PARAM1_ to _PARAM3_","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const color = gdjs.rgbOrHexStringToNumber(eventsFunctionContext.getArgument(\"Color\") || \"255; 255;255\");","","if (!runtimeScene.__tween3DExtension) {","  runtimeScene.__tween3DExtension = {","    tintManagers: new Map()","  };","}","const { tintManagers } = runtimeScene.__tween3DExtension;","for (const object of objects) {","  let manager = tintManagers.get(object.getName());","  if (!manager) {","    const { TintManager } = gdjs.__tween3DExtension;","    manager = new TintManager(object);","    tintManagers.set(object.getName(), manager);","  }","  manager.applyTint(object, color);","}",""],"parameterObjects":"Object","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"description":"Object","name":"Object","type":"objectList"},{"description":"Object capability","name":"Object3D","supplementaryInformation":"Scene3D::Base3DBehavior","type":"behavior"},{"description":"Color","name":"Color","type":"color"}],"objectGroups":[]},{"description":"Change the tint of an object.","fullName":"Tint color (by number)","functionType":"Action","group":"Color","name":"SetTintNumber","private":true,"sentence":"Change tint of _PARAM1_ to _PARAM3_","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const color = eventsFunctionContext.getArgument(\"Color\");","","if (!runtimeScene.__tween3DExtension) {","  runtimeScene.__tween3DExtension = {","    tintManagers: new Map()","  };","}","const { tintManagers } = runtimeScene.__tween3DExtension;","for (const object of objects) {","  let manager = tintManagers.get(object.getName());","  if (!manager) {","    const { TintManager } = gdjs.__tween3DExtension;","    manager = new TintManager(object);","    tintManagers.set(object.getName(), manager);","  }","  manager.applyTint(object, color);","}",""],"parameterObjects":"Object","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"description":"Object","name":"Object","type":"objectList"},{"description":"Object capability","name":"Object3D","supplementaryInformation":"Scene3D::Base3DBehavior","type":"behavior"},{"description":"Color","name":"Color","type":"expression"}],"objectGroups":[]},{"description":"Blend two RGB colors by applying a weighted mean.","fullName":"Blend RGB colors","functionType":"Expression","name":"RgbMean","private":true,"sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const { rgbToHsl, hslToRgb } = gdjs.__tween3DExtension;","","const [r1, g1, b1] = gdjs.hexNumberToRGBArray(eventsFunctionContext.getArgument(\"Color1\"));","const [r2, g2, b2] = gdjs.hexNumberToRGBArray(eventsFunctionContext.getArgument(\"Color2\"));","const ratio = eventsFunctionContext.getArgument(\"Ratio\");","","const [h1, s1, l1] = rgbToHsl(r1, g1, b1);","const [h2, s2, l2] = rgbToHsl(r2, g2, b2);","","const h = h1 + ratio * (h2 - h1);","const s = s1 + ratio * (s2 - s1);","const l = l1 + ratio * (l2 - l1);","","const [r, g, b] = hslToRgb(h, s, l);","","eventsFunctionContext.returnValue = gdjs.rgbToHexNumber(r, g, b);",""],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"expressionType":{"type":"expression"},"parameters":[{"description":"First RGB color","name":"Color1","type":"expression"},{"description":"Second RGB color","name":"Color2","type":"expression"},{"description":"Ratio","longDescription":"Range: 0 to 1, where 0 gives the first color and 1 gives the second color","name":"Ratio","type":"expression"}],"objectGroups":[]},{"fullName":"RGB to number","functionType":"Expression","name":"RgbToNumber","private":true,"sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["eventsFunctionContext.returnValue = gdjs.rgbOrHexStringToNumber(eventsFunctionContext.getArgument(\"Color\"));",""],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"expressionType":{"type":"expression"},"parameters":[{"description":"Color","name":"Color","type":"string"}],"objectGroups":[]},{"fullName":"","functionType":"Action","name":"onSceneUnloading","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["if (!runtimeScene.__tween3DExtension) {","    return;","}","const { tintManagers } = runtimeScene.__tween3DExtension;","","for (const manager of tintManagers.values()) {","    manager.dispose();","}",""],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"parameters":[],"objectGroups":[]},{"description":"the stretch on Z axis. The object volume is conserved. A stretch of 2 makes the object appear 2 times longer on Z in proportion to the dimensions on X and Y.","fullName":"Stretch on Z axis","functionType":"ExpressionAndCondition","name":"StretchZ","private":true,"sentence":"the stretch on Z axis of _PARAM1_ (it no longer does anything, use the one from 3D tween behavior instead)","events":[],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"objectList"},{"description":"3D capability","name":"Object3D","supplementaryInformation":"Scene3D::Base3DBehavior","type":"behavior"},{"description":"Scalable capacity","name":"Scale","supplementaryInformation":"ScalableCapability::ScalableBehavior","type":"behavior"}],"objectGroups":[]},{"fullName":"Stretch on Z axis","functionType":"ActionWithOperator","getterName":"StretchZ","name":"SetStretchZ","private":true,"sentence":"","events":[],"parameters":[{"description":"Object","name":"Object","type":"objectList"},{"description":"3D capability","name":"Object3D","supplementaryInformation":"Scene3D::Base3DBehavior","type":"behavior"},{"description":"Scalable capacity","name":"Scale","supplementaryInformation":"ScalableCapability::ScalableBehavior","type":"behavior"},{"description":"Stretch ratio","name":"StretchRatio","type":"expression"}],"objectGroups":[]},{"description":"the stretch on Y axis. The object volume is conserved. A stretch of 2 makes the object appear 2 times longer on Y in proportion to the dimensions on X and Z.","fullName":"Stretch on Y axis","functionType":"ExpressionAndCondition","name":"StretchY","private":true,"sentence":"the stretch on Y axis of _PARAM1_ (it no longer does anything, use the one from 3D tween behavior instead)","events":[],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"objectList"},{"description":"3D capability","name":"Object3D","supplementaryInformation":"Scene3D::Base3DBehavior","type":"behavior"},{"description":"Scalable capacity","name":"Scale","supplementaryInformation":"ScalableCapability::ScalableBehavior","type":"behavior"}],"objectGroups":[]},{"fullName":"Stretch on Z axis","functionType":"ActionWithOperator","getterName":"StretchY","name":"SetStretchY","private":true,"sentence":"","events":[],"parameters":[{"description":"Object","name":"Object","type":"objectList"},{"description":"3D capability","name":"Object3D","supplementaryInformation":"Scene3D::Base3DBehavior","type":"behavior"},{"description":"Scalable capacity","name":"Scale","supplementaryInformation":"ScalableCapability::ScalableBehavior","type":"behavior"},{"description":"Stretch ratio","name":"StretchRatio","type":"expression"}],"objectGroups":[]},{"description":"the scale volume.","fullName":"Scale volume","functionType":"ExpressionAndCondition","name":"ScaleVolume","private":true,"sentence":"the scale volume of _PARAM1_ (it no longer does anything, use the one from 3D tween behavior instead)","events":[],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"objectList"},{"description":"3D capability","name":"Object3D","supplementaryInformation":"Scene3D::Base3DBehavior","type":"behavior"},{"description":"Scalable capacity","name":"Scale","supplementaryInformation":"ScalableCapability::ScalableBehavior","type":"behavior"}],"objectGroups":[]},{"fullName":"Stretch on Z axis","functionType":"ActionWithOperator","getterName":"ScaleVolume","name":"SetScaleVolume","private":true,"sentence":"","events":[],"parameters":[{"description":"Object","name":"Object","type":"objectList"},{"description":"3D capability","name":"Object3D","supplementaryInformation":"Scene3D::Base3DBehavior","type":"behavior"},{"description":"Scalable capacity","name":"Scale","supplementaryInformation":"ScalableCapability::ScalableBehavior","type":"behavior"},{"description":"Stretch ratio","name":"StretchRatio","type":"expression"}],"objectGroups":[]},{"description":"Exponentially tween bewteen 2 values  according to an easing function.","fullName":"Ease exponentially","functionType":"Expression","name":"EaseExp","private":true,"sentence":"the exponent-tweened value of tween _PARAM2_","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["exp(Tween::Ease(Easing, log(InitialValue), log(TargetedValue), Weighting))"]}]}],"expressionType":{"type":"expression"},"parameters":[{"description":"Easing","name":"Easing","type":"string"},{"description":"Initial value","name":"InitialValue","type":"expression"},{"description":"Targeted value","name":"TargetedValue","type":"expression"},{"description":"Weighting","name":"Weighting","type":"expression"}],"objectGroups":[]}],"eventsBasedBehaviors":[{"description":"Smoothly squash, strentch and tint 3D models.","fullName":"Advanced 3D tween","name":"Tween3D","objectType":"","eventsFunctions":[{"fullName":"","functionType":"Action","name":"onCreated","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"Tween3D::DefineHelperClasses"},"parameters":["",""]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Tween3D","type":"behavior"}],"objectGroups":[]},{"description":"the stretch on Z axis. The object volume is conserved. A stretch of 2 makes the object appear 2 times longer on Z in proportion to the dimensions on X and Y.","fullName":"Stretch on Z axis","functionType":"ExpressionAndCondition","group":"Size","name":"StretchZ","sentence":"the stretch on Z axis","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["Object.Object3D::ScaleZ() / sqrt(Object.Scale::X() * Object.Scale::Y())"]}]}],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Tween3D","type":"behavior"}],"objectGroups":[]},{"fullName":"Stretch on Z axis","functionType":"ActionWithOperator","getterName":"StretchZ","name":"SetStretchZ","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"CompareArgumentAsNumber"},"parameters":["\"Value\"",">","0"]}],"actions":[{"type":{"value":"ModVarScene"},"parameters":["_Tween3D.Volume","=","Object.Behavior::ScaleVolume()"]},{"type":{"value":"Scene3D::Base3DBehavior::SetScaleZ"},"parameters":["Object","Object3D","=","pow(Variable(_Tween3D.Volume) * Value * Value, 1/3)"]},{"type":{"value":"ModVarScene"},"parameters":["_Tween3D.SurfaceRatio","=","sqrt((Variable(_Tween3D.Volume) / Object.Object3D::ScaleZ()) / (Object.Scale::X() * Object.Scale::Y()))"]},{"type":{"value":"ScalableCapability::ScalableBehavior::SetX"},"parameters":["Object","Scale","*","Variable(_Tween3D.SurfaceRatio)"]},{"type":{"value":"ScalableCapability::ScalableBehavior::SetY"},"parameters":["Object","Scale","*","Variable(_Tween3D.SurfaceRatio)"]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Tween3D","type":"behavior"},{"description":"Scalable capacity","name":"Scale","supplementaryInformation":"ScalableCapability::ScalableBehavior","type":"behavior"},{"description":"Stretch ratio","name":"StretchRatio","type":"expression"}],"objectGroups":[]},{"description":"the stretch on Y axis. The object volume is conserved. A stretch of 2 makes the object appear 2 times longer on Y in proportion to the dimensions on X and Z.","fullName":"Stretch on Y axis","functionType":"ExpressionAndCondition","group":"Size","name":"StretchY","sentence":"the stretch on Y axis","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["Object.Scale::Y() / sqrt(Object.Scale::X() * Object.Object3D::ScaleZ())"]}]}],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Tween3D","type":"behavior"}],"objectGroups":[]},{"fullName":"Stretch on Z axis","functionType":"ActionWithOperator","getterName":"StretchY","name":"SetStretchY","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"CompareArgumentAsNumber"},"parameters":["\"Value\"",">","0"]}],"actions":[{"type":{"value":"ModVarScene"},"parameters":["_Tween3D.Volume","=","Object.Behavior::ScaleVolume()"]},{"type":{"value":"ScalableCapability::ScalableBehavior::SetY"},"parameters":["Object","Scale","=","pow(Variable(_Tween3D.Volume) * Value * Value, 1/3)"]},{"type":{"value":"ModVarScene"},"parameters":["_Tween3D.SurfaceRatio","=","sqrt((Variable(_Tween3D.Volume) / Object.Object3D::ScaleZ()) / (Object.Scale::X() * Object.Scale::Y()))"]},{"type":{"value":"ScalableCapability::ScalableBehavior::SetX"},"parameters":["Object","Scale","*","Variable(_Tween3D.SurfaceRatio)"]},{"type":{"value":"Scene3D::Base3DBehavior::SetScaleZ"},"parameters":["Object","Object3D","*","Variable(_Tween3D.SurfaceRatio)"]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Tween3D","type":"behavior"},{"description":"Scalable capacity","name":"Scale","supplementaryInformation":"ScalableCapability::ScalableBehavior","type":"behavior"},{"description":"Stretch ratio","name":"StretchRatio","type":"expression"}],"objectGroups":[]},{"description":"the scale volume.","fullName":"Scale volume","functionType":"ExpressionAndCondition","group":"Size","name":"ScaleVolume","sentence":"the scale volume","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["Object.Scale::X() * Object.Scale::Y() * Object.Object3D::ScaleZ()"]}]}],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Tween3D","type":"behavior"}],"objectGroups":[]},{"fullName":"Stretch on Z axis","functionType":"ActionWithOperator","getterName":"ScaleVolume","name":"SetScaleVolume","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"CompareArgumentAsNumber"},"parameters":["\"Value\"",">","0"]}],"actions":[{"type":{"value":"ModVarScene"},"parameters":["_Tween3D.Ratio","=","pow(Value / Object.Behavior::ScaleVolume(), 1 / 3)"]},{"type":{"value":"Scene3D::Base3DBehavior::SetScaleZ"},"parameters":["Object","Object3D","*","Variable(_Tween3D.Ratio)"]},{"type":{"value":"ScalableCapability::ScalableBehavior::SetY"},"parameters":["Object","Scale","*","Variable(_Tween3D.Ratio)"]},{"type":{"value":"ScalableCapability::ScalableBehavior::SetX"},"parameters":["Object","Scale","*","Variable(_Tween3D.Ratio)"]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Tween3D","type":"behavior"},{"description":"Scalable capacity","name":"Scale","supplementaryInformation":"ScalableCapability::ScalableBehavior","type":"behavior"},{"description":"Stretch ratio","name":"StretchRatio","type":"expression"}],"objectGroups":[]},{"description":"Return the color of a 3d object.","fullName":"Color of a 3d object","functionType":"Expression","group":"Color","name":"Tint","private":true,"sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["if (!runtimeScene.__tween3DExtension) {","  runtimeScene.__tween3DExtension = {","    tintManagers: new Map()","  };","}","const { tintManagers } = runtimeScene.__tween3DExtension;","if (objects.length === 0) {","  eventsFunctionContext.returnValue = 0xffffff;","}","else {","  const object = objects[0];","  let manager = tintManagers.get(object.getName());","  if (!manager) {","    const { TintManager } = gdjs.__tween3DExtension;","    manager = new TintManager(object);","    tintManagers.set(object.getName(), manager);","  }","  eventsFunctionContext.returnValue = manager.getTint(object);","}",""],"parameterObjects":"Object","useStrict":true,"eventsSheetExpanded":true}],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Tween3D","type":"behavior"}],"objectGroups":[]},{"description":"Tweens an object stretch Z from its current value to a new one. The stretch can never be 0 or less.","fullName":"Tween stretch Z","functionType":"Action","group":"Size","name":"TweenStretchZ","sentence":"Tween the stretch Z of _PARAM0_ to _PARAM3_ over _PARAM4_ seconds with easing _PARAM5_ as _PARAM2_","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"Tween3D::Tween3D::StartTween"},"parameters":["Object","Behavior","TweenIdentifier","TargetedValue","Duration","Easing","\"StretchZ\"",""]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Tween3D","type":"behavior"},{"description":"Tween identifier","name":"TweenIdentifier","supplementaryInformation":"objectTween3D","type":"identifier"},{"description":"Stretch on Z axis","name":"TargetedValue","type":"expression"},{"description":"Duration (in seconds)","name":"Duration","type":"expression"},{"description":"Easing","name":"Easing","supplementaryInformation":"[\"linear\",\"easeInQuad\",\"easeOutQuad\",\"easeInOutQuad\",\"easeInCubic\",\"easeOutCubic\",\"easeInOutCubic\",\"easeInQuart\",\"easeOutQuart\",\"easeInOutQuart\",\"easeInQuint\",\"easeOutQuint\",\"easeInOutQuint\",\"easeInOutSine\",\"easeInExpo\",\"easeOutExpo\",\"easeInOutExpo\",\"easeInCirc\",\"easeOutCirc\",\"easeInOutCirc\",\"easeOutBounce\",\"easeInBack\",\"easeOutBack\",\"easeInOutBack\",\"elastic\",\"swingFromTo\",\"swingFrom\",\"swingTo\",\"bounce\",\"bouncePast\",\"easeFromTo\",\"easeFrom\",\"easeTo\"]","type":"stringWithSelector"}],"objectGroups":[]},{"description":"Tweens an object stretch Y from its current value to a new one. The stretch can never be 0 or less.","fullName":"Tween stretch Y","functionType":"Action","group":"Size","name":"TweenStretchY","sentence":"Tween the stretch Y of _PARAM0_ to _PARAM3_ over _PARAM4_ seconds with easing _PARAM5_ as _PARAM2_","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"Tween3D::Tween3D::StartTween"},"parameters":["Object","Behavior","TweenIdentifier","TargetedValue","Duration","Easing","\"StretchY\"",""]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Tween3D","type":"behavior"},{"description":"Tween identifier","name":"TweenIdentifier","supplementaryInformation":"objectTween3D","type":"identifier"},{"description":"Stretch on Y axis","name":"TargetedValue","type":"expression"},{"description":"Duration (in seconds)","name":"Duration","type":"expression"},{"description":"Easing","name":"Easing","supplementaryInformation":"[\"linear\",\"easeInQuad\",\"easeOutQuad\",\"easeInOutQuad\",\"easeInCubic\",\"easeOutCubic\",\"easeInOutCubic\",\"easeInQuart\",\"easeOutQuart\",\"easeInOutQuart\",\"easeInQuint\",\"easeOutQuint\",\"easeInOutQuint\",\"easeInOutSine\",\"easeInExpo\",\"easeOutExpo\",\"easeInOutExpo\",\"easeInCirc\",\"easeOutCirc\",\"easeInOutCirc\",\"easeOutBounce\",\"easeInBack\",\"easeOutBack\",\"easeInOutBack\",\"elastic\",\"swingFromTo\",\"swingFrom\",\"swingTo\",\"bounce\",\"bouncePast\",\"easeFromTo\",\"easeFrom\",\"easeTo\"]","type":"stringWithSelector"}],"objectGroups":[]},{"description":"Tweens an object scale volume from its current value to a new one. The scale volume can never be 0 or less.","fullName":"Tween scale volume","functionType":"Action","group":"Size","name":"TweenScaleVolume","sentence":"Tween the scale volume of _PARAM0_ to _PARAM3_ over _PARAM4_ seconds with easing _PARAM5_ as _PARAM2_","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"Tween3D::Tween3D::StartTween"},"parameters":["Object","Behavior","TweenIdentifier","TargetedValue","Duration","Easing","\"ScaleVolume\"",""]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Tween3D","type":"behavior"},{"description":"Tween identifier","name":"TweenIdentifier","supplementaryInformation":"objectTween3D","type":"identifier"},{"description":"Scale volume","name":"TargetedValue","type":"expression"},{"description":"Duration (in seconds)","name":"Duration","type":"expression"},{"description":"Easing","name":"Easing","supplementaryInformation":"[\"linear\",\"easeInQuad\",\"easeOutQuad\",\"easeInOutQuad\",\"easeInCubic\",\"easeOutCubic\",\"easeInOutCubic\",\"easeInQuart\",\"easeOutQuart\",\"easeInOutQuart\",\"easeInQuint\",\"easeOutQuint\",\"easeInOutQuint\",\"easeInOutSine\",\"easeInExpo\",\"easeOutExpo\",\"easeInOutExpo\",\"easeInCirc\",\"easeOutCirc\",\"easeInOutCirc\",\"easeOutBounce\",\"easeInBack\",\"easeOutBack\",\"easeInOutBack\",\"elastic\",\"swingFromTo\",\"swingFrom\",\"swingTo\",\"bounce\",\"bouncePast\",\"easeFromTo\",\"easeFrom\",\"easeTo\"]","type":"stringWithSelector"}],"objectGroups":[]},{"description":"Tweens the object color from its current value to a new one.","fullName":"Tween object color","functionType":"Action","group":"Color","name":"TweenTint","sentence":"Tween the color of _PARAM0_ to _PARAM3_ over _PARAM4_ seconds with easing _PARAM5_ as _PARAM2_","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"Tween3D::Tween3D::StartTween"},"parameters":["Object","Behavior","TweenIdentifier","Tween3D::RgbToNumber(TargetedValue)","Duration","Easing","\"Tint\"",""]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Tween3D","type":"behavior"},{"description":"Tween identifier","name":"TweenIdentifier","supplementaryInformation":"objectTween3D","type":"identifier"},{"description":"Color","name":"TargetedValue","type":"color"},{"description":"Duration (in seconds)","name":"Duration","type":"expression"},{"description":"Easing","name":"Easing","supplementaryInformation":"[\"linear\",\"easeInQuad\",\"easeOutQuad\",\"easeInOutQuad\",\"easeInCubic\",\"easeOutCubic\",\"easeInOutCubic\",\"easeInQuart\",\"easeOutQuart\",\"easeInOutQuart\",\"easeInQuint\",\"easeOutQuint\",\"easeInOutQuint\",\"easeInOutSine\",\"easeInExpo\",\"easeOutExpo\",\"easeInOutExpo\",\"easeInCirc\",\"easeOutCirc\",\"easeInOutCirc\",\"easeOutBounce\",\"easeInBack\",\"easeOutBack\",\"easeInOutBack\",\"elastic\",\"swingFromTo\",\"swingFrom\",\"swingTo\",\"bounce\",\"bouncePast\",\"easeFromTo\",\"easeFrom\",\"easeTo\"]","type":"stringWithSelector"}],"objectGroups":[]},{"description":"Tweens an object Z position from its current value to a new one.","fullName":"Tween Z position (deprecated)","functionType":"Action","group":"Position","name":"TweenPositionZ","private":true,"sentence":"Tween the Z position of object _PARAM0_ to _PARAM3_ over _PARAM4_ seconds with easing _PARAM5_ as _PARAM2_","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"Tween::AddObjectPositionZTween2"},"parameters":["Object","Tween","Object3D","TweenIdentifier","TargetedValue","Easing","Duration",""]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Tween3D","type":"behavior"},{"description":"Tween identifier","name":"TweenIdentifier","supplementaryInformation":"objectTween3D","type":"identifier"},{"description":"Rotation X in degree","name":"TargetedValue","type":"expression"},{"description":"Duration (in seconds)","name":"Duration","type":"expression"},{"description":"Easing","name":"Easing","supplementaryInformation":"[\"linear\",\"easeInQuad\",\"easeOutQuad\",\"easeInOutQuad\",\"easeInCubic\",\"easeOutCubic\",\"easeInOutCubic\",\"easeInQuart\",\"easeOutQuart\",\"easeInOutQuart\",\"easeInQuint\",\"easeOutQuint\",\"easeInOutQuint\",\"easeInOutSine\",\"easeInExpo\",\"easeOutExpo\",\"easeInOutExpo\",\"easeInCirc\",\"easeOutCirc\",\"easeInOutCirc\",\"easeOutBounce\",\"easeInBack\",\"easeOutBack\",\"easeInOutBack\",\"elastic\",\"swingFromTo\",\"swingFrom\",\"swingTo\",\"bounce\",\"bouncePast\",\"easeFromTo\",\"easeFrom\",\"easeTo\"]","type":"stringWithSelector"}],"objectGroups":[]},{"description":"Tweens an object depth from its current value to a new one.","fullName":"Tween depth (Z size) (deprecated)","functionType":"Action","group":"Position","name":"TweenDepth","private":true,"sentence":"Tween the depth of object _PARAM0_ to _PARAM3_ over _PARAM4_ seconds with easing _PARAM5_ as _PARAM2_","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"Tween::AddObjectDepthTween2"},"parameters":["Object","Tween","Object3D","TweenIdentifier","TargetedValue","Easing","Duration",""]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Tween3D","type":"behavior"},{"description":"Tween identifier","name":"TweenIdentifier","supplementaryInformation":"objectTween3D","type":"identifier"},{"description":"Rotation X in degree","name":"TargetedValue","type":"expression"},{"description":"Duration (in seconds)","name":"Duration","type":"expression"},{"description":"Easing","name":"Easing","supplementaryInformation":"[\"linear\",\"easeInQuad\",\"easeOutQuad\",\"easeInOutQuad\",\"easeInCubic\",\"easeOutCubic\",\"easeInOutCubic\",\"easeInQuart\",\"easeOutQuart\",\"easeInOutQuart\",\"easeInQuint\",\"easeOutQuint\",\"easeInOutQuint\",\"easeInOutSine\",\"easeInExpo\",\"easeOutExpo\",\"easeInOutExpo\",\"easeInCirc\",\"easeOutCirc\",\"easeInOutCirc\",\"easeOutBounce\",\"easeInBack\",\"easeOutBack\",\"easeInOutBack\",\"elastic\",\"swingFromTo\",\"swingFrom\",\"swingTo\",\"bounce\",\"bouncePast\",\"easeFromTo\",\"easeFrom\",\"easeTo\"]","type":"stringWithSelector"}],"objectGroups":[]},{"description":"Tweens an object X rotation from its current value to a new one.","fullName":"Tween X rotation (deprecated)","functionType":"Action","group":"Angle","name":"TweenRotationX","private":true,"sentence":"Tween the X rotation of object _PARAM0_ to _PARAM3_ over _PARAM4_ seconds with easing _PARAM5_ as _PARAM2_","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"Tween::TweenBehavior::AddObjectRotationXTween"},"parameters":["Object","Tween","Object3D","TweenIdentifier","TargetedValue","Easing","Duration",""]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Tween3D","type":"behavior"},{"description":"Tween identifier","name":"TweenIdentifier","supplementaryInformation":"objectTween3D","type":"identifier"},{"description":"Rotation X in degree","name":"TargetedValue","type":"expression"},{"description":"Duration (in seconds)","name":"Duration","type":"expression"},{"description":"Easing","name":"Easing","supplementaryInformation":"[\"linear\",\"easeInQuad\",\"easeOutQuad\",\"easeInOutQuad\",\"easeInCubic\",\"easeOutCubic\",\"easeInOutCubic\",\"easeInQuart\",\"easeOutQuart\",\"easeInOutQuart\",\"easeInQuint\",\"easeOutQuint\",\"easeInOutQuint\",\"easeInOutSine\",\"easeInExpo\",\"easeOutExpo\",\"easeInOutExpo\",\"easeInCirc\",\"easeOutCirc\",\"easeInOutCirc\",\"easeOutBounce\",\"easeInBack\",\"easeOutBack\",\"easeInOutBack\",\"elastic\",\"swingFromTo\",\"swingFrom\",\"swingTo\",\"bounce\",\"bouncePast\",\"easeFromTo\",\"easeFrom\",\"easeTo\"]","type":"stringWithSelector"}],"objectGroups":[]},{"description":"Tweens an object Y rotation from its current value to a new one.","fullName":"Tween rotation Y (deprecated)","functionType":"Action","group":"Angle","name":"TweenRotationY","private":true,"sentence":"Tween the Y rotation of object _PARAM0_ to _PARAM3_ over _PARAM4_ seconds with easing _PARAM5_ as _PARAM2_","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"Tween::TweenBehavior::AddObjectRotationYTween"},"parameters":["Object","Tween","Object3D","TweenIdentifier","TargetedValue","Easing","Duration",""]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Tween3D","type":"behavior"},{"description":"Tween identifier","name":"TweenIdentifier","supplementaryInformation":"objectTween3D","type":"identifier"},{"description":"Rotation Y in degree","name":"TargetedValue","type":"expression"},{"description":"Duration (in seconds)","name":"Duration","type":"expression"},{"description":"Easing","name":"Easing","supplementaryInformation":"[\"linear\",\"easeInQuad\",\"easeOutQuad\",\"easeInOutQuad\",\"easeInCubic\",\"easeOutCubic\",\"easeInOutCubic\",\"easeInQuart\",\"easeOutQuart\",\"easeInOutQuart\",\"easeInQuint\",\"easeOutQuint\",\"easeInOutQuint\",\"easeInOutSine\",\"easeInExpo\",\"easeOutExpo\",\"easeInOutExpo\",\"easeInCirc\",\"easeOutCirc\",\"easeInOutCirc\",\"easeOutBounce\",\"easeInBack\",\"easeOutBack\",\"easeInOutBack\",\"elastic\",\"swingFromTo\",\"swingFrom\",\"swingTo\",\"bounce\",\"bouncePast\",\"easeFromTo\",\"easeFrom\",\"easeTo\"]","type":"stringWithSelector"}],"objectGroups":[]},{"fullName":"","functionType":"Action","name":"doStepPreEvents","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"ModVarScene"},"parameters":["_Tween3D.Index","=","0"]}]},{"type":"BuiltinCommonInstructions::Repeat","repeatExpression":"Object.VariableChildCount(_Tween3D.Tweens)","conditions":[],"actions":[{"type":{"value":"ModVarSceneTxt"},"parameters":["_Tween3D.Identifier","=","Object.Behavior::TweenIdentifier(Variable(_Tween3D.Index))"]}],"events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Tween3D::Tween3D::IsPlaying"},"parameters":["Object","Behavior","VariableString(_Tween3D.Identifier)",""]}],"actions":[{"type":{"value":"Tween3D::Tween3D::SetTime"},"parameters":["Object","Behavior","=","min(Object.Behavior::Time(VariableString(_Tween3D.Identifier)) + TimeDelta() * LayerTimeScale(Object.Layer()), Object.Behavior::Duration(VariableString(_Tween3D.Identifier)))","VariableString(_Tween3D.Identifier)",""]}],"events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Tween3D::Tween3D::Type"},"parameters":["Object","Behavior","=","\"StretchZ\"","VariableString(_Tween3D.Identifier)",""]}],"actions":[{"type":{"value":"Tween3D::Tween3D::SetStretchZ"},"parameters":["Object","Behavior","=","Object.Behavior::ExponentTweenedValue(VariableString(_Tween3D.Identifier))","Object3D"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Tween3D::Tween3D::Type"},"parameters":["Object","Behavior","=","\"StretchY\"","VariableString(_Tween3D.Identifier)",""]}],"actions":[{"type":{"value":"Tween3D::Tween3D::SetStretchY"},"parameters":["Object","Behavior","=","Object.Behavior::ExponentTweenedValue(VariableString(_Tween3D.Identifier))","Object3D"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Tween3D::Tween3D::Type"},"parameters":["Object","Behavior","=","\"ScaleVolume\"","VariableString(_Tween3D.Identifier)",""]}],"actions":[{"type":{"value":"Tween3D::Tween3D::SetScaleVolume"},"parameters":["Object","Behavior","=","Object.Behavior::ExponentTweenedValue(VariableString(_Tween3D.Identifier))","Object3D"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Tween3D::Tween3D::Type"},"parameters":["Object","Behavior","=","\"Tint\"","VariableString(_Tween3D.Identifier)",""]}],"actions":[{"type":{"value":"Tween3D::SetTintNumber"},"parameters":["Object","Object","Object3D","Object.Behavior::TweenedColor(VariableString(_Tween3D.Identifier))",""]}]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"ModVarScene"},"parameters":["_Tween3D.Index","+","1"]}]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Tween3D","type":"behavior"}],"objectGroups":[]},{"description":"the tweened value","fullName":"Tweened value","functionType":"ExpressionAndCondition","name":"TweenedValue","private":true,"sentence":"the value of tween _PARAM2_","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["Tween::Ease(Object.Behavior::Easing(VariableString(_Tween3D.Identifier)), Object.Behavior::InitialValue(VariableString(_Tween3D.Identifier)), Object.Behavior::TargetedValue(VariableString(_Tween3D.Identifier)), Object.Behavior::Progress(VariableString(_Tween3D.Identifier)))"]}]}],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Tween3D","type":"behavior"},{"description":"Tween identifier","name":"TweenIdentifier","supplementaryInformation":"objectTween3D","type":"identifier"}],"objectGroups":[]},{"description":"the tweened color","fullName":"Tweened color","functionType":"ExpressionAndCondition","name":"TweenedColor","private":true,"sentence":"the color value of tween _PARAM2_","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["Tween3D::RgbMean(Object.Behavior::InitialValue(VariableString(_Tween3D.Identifier)), Object.Behavior::TargetedValue(VariableString(_Tween3D.Identifier)), \nTween::Ease(Object.Behavior::Easing(VariableString(_Tween3D.Identifier)), 0, 1, Object.Behavior::Progress(VariableString(_Tween3D.Identifier))))\n\n"]}]}],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Tween3D","type":"behavior"},{"description":"Tween identifier","name":"TweenIdentifier","supplementaryInformation":"objectTween3D","type":"identifier"}],"objectGroups":[]},{"description":"the exponent-tweened value","fullName":"Tweened value (exponent)","functionType":"ExpressionAndCondition","name":"ExponentTweenedValue","private":true,"sentence":"the exponent-tweened value of tween _PARAM2_","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["Tween3D::EaseExp(Object.Behavior::Easing(VariableString(_Tween3D.Identifier)), Object.Behavior::InitialValue(VariableString(_Tween3D.Identifier)), Object.Behavior::TargetedValue(VariableString(_Tween3D.Identifier)), Object.Behavior::Progress(VariableString(_Tween3D.Identifier)))"]}]}],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Tween3D","type":"behavior"},{"description":"Tween identifier","name":"TweenIdentifier","supplementaryInformation":"objectTween3D","type":"identifier"}],"objectGroups":[]},{"fullName":"Start tween","functionType":"Action","name":"StartTween","private":true,"sentence":"Tween the _PARAM6_ of object _PARAM0_ to _PARAM3_ over _PARAM4_ seconds with _PARAM5_ easing as _PARAM2_","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":true,"value":"Tween3D::Tween3D::Exists"},"parameters":["Object","Behavior","TweenIdentifier",""]}],"actions":[{"type":{"value":"Tween3D::Tween3D::InvalidateTweenIdentifiers"},"parameters":["Object","Behavior",""]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"Tween3D::Tween3D::SetTime"},"parameters":["Object","Behavior","=","0","TweenIdentifier",""]},{"type":{"value":"Tween3D::Tween3D::SetType"},"parameters":["Object","Behavior","=","Type","TweenIdentifier",""]},{"type":{"value":"Tween3D::Tween3D::SetDuration"},"parameters":["Object","Behavior","=","Duration","TweenIdentifier",""]},{"type":{"value":"Tween3D::Tween3D::SetEasing"},"parameters":["Object","Behavior","=","Easing","TweenIdentifier",""]},{"type":{"value":"Tween3D::Tween3D::SetTargetedValue"},"parameters":["Object","Behavior","=","TargetedValue","TweenIdentifier",""]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"StringVariable"},"parameters":["Type","=","\"StretchZ\""]}],"actions":[{"type":{"value":"Tween3D::Tween3D::SetInitialValue"},"parameters":["Object","Behavior","=","Object.Behavior::StretchZ()","TweenIdentifier",""]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"StringVariable"},"parameters":["Type","=","\"StretchY\""]}],"actions":[{"type":{"value":"Tween3D::Tween3D::SetInitialValue"},"parameters":["Object","Behavior","=","Object.Behavior::StretchY()","TweenIdentifier",""]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"StringVariable"},"parameters":["Type","=","\"ScaleVolume\""]}],"actions":[{"type":{"value":"Tween3D::Tween3D::SetInitialValue"},"parameters":["Object","Behavior","=","Object.Behavior::ScaleVolume()","TweenIdentifier",""]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"StringVariable"},"parameters":["Type","=","\"Tint\""]}],"actions":[{"type":{"value":"Tween3D::Tween3D::SetInitialValue"},"parameters":["Object","Behavior","=","Object.Behavior::Tint()","TweenIdentifier",""]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Tween3D","type":"behavior"},{"description":"Tween identifier","name":"TweenIdentifier","supplementaryInformation":"objectTween3D","type":"identifier"},{"description":"Stretch","name":"TargetedValue","type":"expression"},{"description":"Duration (in seconds)","name":"Duration","type":"expression"},{"description":"Easing","name":"Easing","supplementaryInformation":"[\"linear\",\"easeInQuad\",\"easeOutQuad\",\"easeInOutQuad\",\"easeInCubic\",\"easeOutCubic\",\"easeInOutCubic\",\"easeInQuart\",\"easeOutQuart\",\"easeInOutQuart\",\"easeInQuint\",\"easeOutQuint\",\"easeInOutQuint\",\"easeInOutSine\",\"easeInExpo\",\"easeOutExpo\",\"easeInOutExpo\",\"easeInCirc\",\"easeOutCirc\",\"easeInOutCirc\",\"easeOutBounce\",\"easeInBack\",\"easeOutBack\",\"easeInOutBack\",\"elastic\",\"swingFromTo\",\"swingFrom\",\"swingTo\",\"bounce\",\"bouncePast\",\"easeFromTo\",\"easeFrom\",\"easeTo\"]","type":"stringWithSelector"},{"description":"Type","name":"Type","type":"string"}],"objectGroups":[]},{"description":"the tween type","fullName":"Type","functionType":"ExpressionAndCondition","name":"Type","private":true,"sentence":"the type of tween _PARAM2_","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnString"},"parameters":["Object.VariableString(_Tween3D.Tweens[TweenIdentifier].Type)"]}]}],"expressionType":{"type":"string"},"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Tween3D","type":"behavior"},{"description":"Tween identifier","name":"TweenIdentifier","supplementaryInformation":"objectTween3D","type":"identifier"}],"objectGroups":[]},{"fullName":"","functionType":"ActionWithOperator","getterName":"Type","name":"SetType","private":true,"sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"ModVarObjetTxt"},"parameters":["Object","_Tween3D.Tweens[TweenIdentifier].Type","=","Value"]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Tween3D","type":"behavior"},{"description":"Tween identifier","name":"TweenIdentifier","supplementaryInformation":"objectTween3D","type":"identifier"}],"objectGroups":[]},{"description":"the elapsed time","fullName":"Time","functionType":"ExpressionAndCondition","name":"Time","private":true,"sentence":"the elapsed time of tween _PARAM2_","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["Object.Variable(_Tween3D.Tweens[TweenIdentifier].Time)"]}]}],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Tween3D","type":"behavior"},{"description":"Tween identifier","name":"TweenIdentifier","supplementaryInformation":"objectTween3D","type":"identifier"}],"objectGroups":[]},{"fullName":"","functionType":"ActionWithOperator","getterName":"Time","name":"SetTime","private":true,"sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"ModVarObjet"},"parameters":["Object","_Tween3D.Tweens[TweenIdentifier].Time","=","Value"]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Tween3D","type":"behavior"},{"description":"Tween identifier","name":"TweenIdentifier","supplementaryInformation":"objectTween3D","type":"identifier"}],"objectGroups":[]},{"description":"the tween duration","fullName":"Duration","functionType":"ExpressionAndCondition","name":"Duration","private":true,"sentence":"the duration of tween _PARAM2_","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["Object.Variable(_Tween3D.Tweens[TweenIdentifier].Duration)"]}]}],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Tween3D","type":"behavior"},{"description":"Tween identifier","name":"TweenIdentifier","supplementaryInformation":"objectTween3D","type":"identifier"}],"objectGroups":[]},{"fullName":"","functionType":"ActionWithOperator","getterName":"Duration","name":"SetDuration","private":true,"sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"ModVarObjet"},"parameters":["Object","_Tween3D.Tweens[TweenIdentifier].Duration","=","Value"]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Tween3D","type":"behavior"},{"description":"Tween identifier","name":"TweenIdentifier","supplementaryInformation":"objectTween3D","type":"identifier"}],"objectGroups":[]},{"description":"the tween easing","fullName":"Easing","functionType":"ExpressionAndCondition","name":"Easing","private":true,"sentence":"the easing of tween _PARAM2_","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnString"},"parameters":["Object.VariableString(_Tween3D.Tweens[TweenIdentifier].Easing)"]}]}],"expressionType":{"type":"string"},"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Tween3D","type":"behavior"},{"description":"Tween identifier","name":"TweenIdentifier","supplementaryInformation":"objectTween3D","type":"identifier"}],"objectGroups":[]},{"fullName":"","functionType":"ActionWithOperator","getterName":"Easing","name":"SetEasing","private":true,"sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"ModVarObjetTxt"},"parameters":["Object","_Tween3D.Tweens[TweenIdentifier].Easing","=","Value"]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Tween3D","type":"behavior"},{"description":"Tween identifier","name":"TweenIdentifier","supplementaryInformation":"objectTween3D","type":"identifier"}],"objectGroups":[]},{"description":"the tween initial value","fullName":"Initial value","functionType":"ExpressionAndCondition","name":"InitialValue","private":true,"sentence":"the initial value of tween _PARAM2_","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["Object.Variable(_Tween3D.Tweens[TweenIdentifier].InitialValue)"]}]}],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Tween3D","type":"behavior"},{"description":"Tween identifier","name":"TweenIdentifier","supplementaryInformation":"objectTween3D","type":"identifier"}],"objectGroups":[]},{"fullName":"","functionType":"ActionWithOperator","getterName":"InitialValue","name":"SetInitialValue","private":true,"sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"ModVarObjet"},"parameters":["Object","_Tween3D.Tweens[TweenIdentifier].InitialValue","=","Value"]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Tween3D","type":"behavior"},{"description":"Tween identifier","name":"TweenIdentifier","supplementaryInformation":"objectTween3D","type":"identifier"}],"objectGroups":[]},{"description":"the tween targeted value","fullName":"Targeted value","functionType":"ExpressionAndCondition","name":"TargetedValue","private":true,"sentence":"the targeted value of tween _PARAM2_","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["Object.Variable(_Tween3D.Tweens[TweenIdentifier].TargetedValue)"]}]}],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Tween3D","type":"behavior"},{"description":"Tween identifier","name":"TweenIdentifier","supplementaryInformation":"objectTween3D","type":"identifier"}],"objectGroups":[]},{"fullName":"","functionType":"ActionWithOperator","getterName":"TargetedValue","name":"SetTargetedValue","private":true,"sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"ModVarObjet"},"parameters":["Object","_Tween3D.Tweens[TweenIdentifier].TargetedValue","=","Value"]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Tween3D","type":"behavior"},{"description":"Tween identifier","name":"TweenIdentifier","supplementaryInformation":"objectTween3D","type":"identifier"}],"objectGroups":[]},{"description":"Check if the tween is paused","fullName":"Paused","functionType":"Condition","name":"IsPaused","private":true,"sentence":"The tween _PARAM2_ of _PARAM0_ is paused","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"ObjectVariableAsBoolean"},"parameters":["Object","_Tween3D.Tweens[TweenIdentifier].IsPaused","True"]}],"actions":[{"type":{"value":"SetReturnBoolean"},"parameters":["True"]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Tween3D","type":"behavior"},{"description":"Tween identifier","name":"TweenIdentifier","supplementaryInformation":"objectTween3D","type":"identifier"}],"objectGroups":[]},{"description":"Change if the tween is paused","fullName":"Paused","functionType":"Action","name":"SetPaused","private":true,"sentence":"The tween _PARAM2_ of _PARAM0_ is paused: _PARAM3_","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"BooleanVariable"},"parameters":["IsPaused","True",""]}],"actions":[{"type":{"value":"SetObjectVariableAsBoolean"},"parameters":["Object","_Tween3D.Tweens[TweenIdentifier].IsPaused","True"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":true,"value":"BooleanVariable"},"parameters":["IsPaused","True",""]}],"actions":[{"type":{"value":"SetObjectVariableAsBoolean"},"parameters":["Object","_Tween3D.Tweens[TweenIdentifier].IsPaused","False"]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Tween3D","type":"behavior"},{"description":"Tween identifier","name":"TweenIdentifier","supplementaryInformation":"objectTween3D","type":"identifier"},{"description":"Paused","name":"IsPaused","type":"yesorno"}],"objectGroups":[]},{"description":"Stop the running tween animation.","fullName":"Stop a tween","functionType":"Action","name":"StopTween","sentence":"Stop the tween _PARAM2_ on _PARAM0_","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Tween3D::Tween3D::Exists"},"parameters":["Object","Behavior","TweenIdentifier",""]}],"actions":[{"type":{"value":"Tween3D::Tween3D::SetTime"},"parameters":["Object","Behavior","=","Object.Behavior::Duration(TweenIdentifier)","TweenIdentifier",""]}],"events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"BooleanVariable"},"parameters":["JumpToEnd","True",""]}],"actions":[]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Tween3D","type":"behavior"},{"description":"Tween identifier","name":"TweenIdentifier","supplementaryInformation":"objectTween3D","type":"identifier"},{"description":"Jump to end","name":"JumpToEnd","type":"yesorno"}],"objectGroups":[]},{"description":"Pause the running tween animation.","fullName":"Pause a tween","functionType":"Action","name":"PauseTween","sentence":"Pause the tween _PARAM2_ on _PARAM0_","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Tween3D::Tween3D::Exists"},"parameters":["Object","Behavior","TweenIdentifier",""]}],"actions":[{"type":{"value":"Tween3D::Tween3D::SetPaused"},"parameters":["Object","Behavior","TweenIdentifier","yes",""]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Tween3D","type":"behavior"},{"description":"Tween identifier","name":"TweenIdentifier","supplementaryInformation":"objectTween3D","type":"identifier"}],"objectGroups":[]},{"description":"Resume the tween animation.","fullName":"Resume a tween","functionType":"Action","name":"ResumeTween","sentence":"Resume the tween _PARAM2_ on _PARAM0_","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Tween3D::Tween3D::Exists"},"parameters":["Object","Behavior","TweenIdentifier",""]}],"actions":[{"type":{"value":"Tween3D::Tween3D::SetPaused"},"parameters":["Object","Behavior","TweenIdentifier","no",""]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Tween3D","type":"behavior"},{"description":"Tween identifier","name":"TweenIdentifier","supplementaryInformation":"objectTween3D","type":"identifier"}],"objectGroups":[]},{"description":"Remove the tween animation from the object.","fullName":"Remove a tween","functionType":"Action","name":"RemoveTween","sentence":"Remove the tween _PARAM2_ from _PARAM0_","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Tween3D::Tween3D::Exists"},"parameters":["Object","Behavior","TweenIdentifier",""]}],"actions":[{"type":{"value":"ObjectVariableRemoveChild"},"parameters":["Object","_Tween3D.Tweens","TweenIdentifier"]},{"type":{"value":"Tween3D::Tween3D::InvalidateTweenIdentifiers"},"parameters":["Object","Behavior",""]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Tween3D","type":"behavior"},{"description":"Tween identifier","name":"TweenIdentifier","supplementaryInformation":"objectTween3D","type":"identifier"}],"objectGroups":[]},{"description":"Check if the tween animation exists.","fullName":"Tween exists","functionType":"Condition","name":"Exists","sentence":"Tween _PARAM2_ on _PARAM0_ exists","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"ObjectVariableChildExists"},"parameters":["Object","_Tween3D.Tweens","TweenIdentifier"]}],"actions":[{"type":{"value":"SetReturnBoolean"},"parameters":["True"]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Tween3D","type":"behavior"},{"description":"Tween identifier","name":"TweenIdentifier","supplementaryInformation":"objectTween3D","type":"identifier"}],"objectGroups":[]},{"description":"Check if the tween animation is currently playing.","fullName":"Tween is playing","functionType":"Condition","name":"IsPlaying","sentence":"Tween _PARAM2_ on _PARAM0_ is playing","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Tween3D::Tween3D::Exists"},"parameters":["Object","Behavior","TweenIdentifier",""]},{"type":{"inverted":true,"value":"Tween3D::Tween3D::HasFinished"},"parameters":["Object","Behavior","TweenIdentifier",""]},{"type":{"inverted":true,"value":"Tween3D::Tween3D::IsPaused"},"parameters":["Object","Behavior","TweenIdentifier",""]}],"actions":[{"type":{"value":"SetReturnBoolean"},"parameters":["True"]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Tween3D","type":"behavior"},{"description":"Tween identifier","name":"TweenIdentifier","supplementaryInformation":"objectTween3D","type":"identifier"}],"objectGroups":[]},{"description":"Check if the tween animation has finished playing.","fullName":"Tween finished playing","functionType":"Condition","name":"HasFinished","sentence":"Tween _PARAM2_ on _PARAM0_ has finished playing","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Tween3D::Tween3D::Progress"},"parameters":["Object","Behavior",">=","1","TweenIdentifier",""]}],"actions":[{"type":{"value":"SetReturnBoolean"},"parameters":["True"]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Tween3D","type":"behavior"},{"description":"Tween identifier","name":"TweenIdentifier","supplementaryInformation":"objectTween3D","type":"identifier"}],"objectGroups":[]},{"description":"the progress of a tween (between 0.0 and 1.0).","fullName":"Progress of a tween","functionType":"ExpressionAndCondition","name":"Progress","sentence":"the progress of tween _PARAM2_","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Tween3D::Tween3D::Exists"},"parameters":["Object","Behavior","TweenIdentifier",""]}],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["Object.Behavior::Time(TweenIdentifier) / Object.Behavior::Duration(TweenIdentifier)"]}]}],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Tween3D","type":"behavior"},{"description":"Tween identifier","name":"TweenIdentifier","supplementaryInformation":"objectTween3D","type":"identifier"}],"objectGroups":[]},{"description":"Return the tween identifier for a given index.","fullName":"Tween identifier","functionType":"StringExpression","name":"TweenIdentifier","private":true,"sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const object = objects[0];","","const childIndex = eventsFunctionContext.getArgument(\"ChildIndex\");","","object.__Tween3D = object.__Tween3D || {};","object.__Tween3D.variableIdentifiers =","    object.__Tween3D.variableIdentifiers","    || Object.keys(object.getVariables().get(\"_Tween3D\").getChild(\"Tweens\").getAllChildren());","","eventsFunctionContext.returnValue = object.__Tween3D.variableIdentifiers[childIndex];",""],"parameterObjects":"Object","useStrict":true,"eventsSheetExpanded":true}],"expressionType":{"type":"string"},"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Tween3D","type":"behavior"},{"description":"Child index","name":"ChildIndex","type":"expression"}],"objectGroups":[]},{"description":"Invalidate tween identifiers.","fullName":"Invalidate tween identifiers","functionType":"Action","name":"InvalidateTweenIdentifiers","private":true,"sentence":"Invalidate tween identifiers of _PARAM0_","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const object = objects[0];","","object.__Tween3D = object.__Tween3D || {};","object.__Tween3D.variableIdentifiers = null;",""],"parameterObjects":"Object","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Tween3D","type":"behavior"}],"objectGroups":[]}],"propertyDescriptors":[{"value":"","type":"Behavior","label":"3D capability","description":"","group":"","extraInformation":["Scene3D::Base3DBehavior"],"name":"Object3D"},{"value":"","type":"Behavior","label":"Scalable capacity","description":"","group":"","extraInformation":["ScalableCapability::ScalableBehavior"],"name":"Scale"},{"value":"","type":"Behavior","label":"Tween","description":"","group":"","extraInformation":["Tween::TweenBehavior"],"name":"Tween"}],"sharedPropertyDescriptors":[]},{"description":"Squash and stretch a 3D model in loop.","fullName":"3D wobble","name":"Wobble","objectType":"","eventsFunctions":[{"fullName":"","functionType":"Action","name":"onCreated","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"Tween3D::Wobble::UpdateScaleVolume"},"parameters":["Object","Behavior",""]},{"type":{"value":"Tween3D::Wobble::UpdateStretch"},"parameters":["Object","Behavior",""]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Wobble","type":"behavior"}],"objectGroups":[]},{"fullName":"","functionType":"Action","name":"doStepPreEvents","sentence":"","events":[{"colorB":228,"colorG":176,"colorR":74,"creationTime":0,"name":"Tween","source":"","type":"BuiltinCommonInstructions::Group","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberVariable"},"parameters":["ScaleMinTweenTime","<","ScaleMinTweenDuration"]}],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["ScaleMinTweenTime","+","Object.Behavior::TimeDelta()"]},{"type":{"value":"SetNumberVariable"},"parameters":["ScaleMin","=","Tween3D::EaseExp(ScaleMinTweenEasing, ScaleMinTweenInitialValue, ScaleMinTweenTarget, ScaleMinTweenTime / ScaleMinTweenDuration)"]}],"events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberVariable"},"parameters":["ScaleMinTweenTime",">=","ScaleMinTweenDuration"]}],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["ScaleMin","=","ScaleMinTweenTarget"]}]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberVariable"},"parameters":["ScaleMaxTweenTime","<","ScaleMaxTweenDuration"]}],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["ScaleMaxTweenTime","+","Object.Behavior::TimeDelta()"]},{"type":{"value":"SetNumberVariable"},"parameters":["ScaleMax","=","Tween3D::EaseExp(ScaleMaxTweenEasing, ScaleMaxTweenInitialValue, ScaleMaxTweenTarget, ScaleMaxTweenTime / ScaleMaxTweenDuration)"]}],"events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberVariable"},"parameters":["ScaleMaxTweenTime",">=","ScaleMaxTweenDuration"]}],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["ScaleMin","=","ScaleMinTweenTarget"]}]}]}],"parameters":[]},{"colorB":228,"colorG":176,"colorR":74,"creationTime":0,"name":"Wobble","source":"","type":"BuiltinCommonInstructions::Group","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"Tween3D::Wobble::UpdateScaleVolume"},"parameters":["Object","Behavior",""]},{"type":{"value":"Tween3D::Wobble::UpdateStretch"},"parameters":["Object","Behavior",""]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["Angle","+","mod(Object.Behavior::TimeDelta() *  2 * Pi()\n / PeriodDuration, 2 * Pi())"]}]}],"parameters":[]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Wobble","type":"behavior"}],"objectGroups":[]},{"description":"the minimum scale volume of the object.","fullName":"Minimum scale volume","functionType":"ExpressionAndCondition","group":"3D wobble scale configuration","name":"ScaleMin","sentence":"the minimum scale volume","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["ScaleMin"]}]}],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Wobble","type":"behavior"}],"objectGroups":[]},{"fullName":"","functionType":"ActionWithOperator","getterName":"ScaleMin","name":"SetScaleMin","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["ScaleMin","=","Value"]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Wobble","type":"behavior"}],"objectGroups":[]},{"description":"the maximum scale volume of the object.","fullName":"Maximum scale volume","functionType":"ExpressionAndCondition","group":"3D wobble scale configuration","name":"ScaleMax","sentence":"the maximum scale volume","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["ScaleMax"]}]}],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Wobble","type":"behavior"}],"objectGroups":[]},{"fullName":"","functionType":"ActionWithOperator","getterName":"ScaleMax","name":"SetScaleMax","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["ScaleMax","=","Value"]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Wobble","type":"behavior"}],"objectGroups":[]},{"description":"Tweens the minimum scale volume from its current value to a new one. The scale volume can never be 0 or less.","fullName":"Tween minimum scale volume","functionType":"Action","group":"3D wobble scale configuration","name":"TweenScaleMin","sentence":"Tween the minimum scale volume of object _PARAM0_ to _PARAM2_ over _PARAM3_ seconds with _PARAM4_ easing","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["ScaleMinTweenInitialValue","=","Object.Behavior::ScaleMin()"]},{"type":{"value":"SetNumberVariable"},"parameters":["ScaleMinTweenTime","=","0"]},{"type":{"value":"SetNumberVariable"},"parameters":["ScaleMinTweenTarget","=","TargetedValue"]},{"type":{"value":"SetNumberVariable"},"parameters":["ScaleMinTweenDuration","=","Duration"]},{"type":{"value":"SetStringVariable"},"parameters":["ScaleMinTweenEasing","=","Easing"]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Wobble","type":"behavior"},{"description":"Minimum scale volume","name":"TargetedValue","type":"expression"},{"description":"Duration (in seconds)","name":"Duration","type":"expression"},{"description":"Easing","name":"Easing","supplementaryInformation":"[\"linear\",\"easeInQuad\",\"easeOutQuad\",\"easeInOutQuad\",\"easeInCubic\",\"easeOutCubic\",\"easeInOutCubic\",\"easeInQuart\",\"easeOutQuart\",\"easeInOutQuart\",\"easeInQuint\",\"easeOutQuint\",\"easeInOutQuint\",\"easeInOutSine\",\"easeInExpo\",\"easeOutExpo\",\"easeInOutExpo\",\"easeInCirc\",\"easeOutCirc\",\"easeInOutCirc\",\"easeOutBounce\",\"easeInBack\",\"easeOutBack\",\"easeInOutBack\",\"elastic\",\"swingFromTo\",\"swingFrom\",\"swingTo\",\"bounce\",\"bouncePast\",\"easeFromTo\",\"easeFrom\",\"easeTo\"]","type":"stringWithSelector"}],"objectGroups":[]},{"description":"Tweens the maximum scale volume from its current value to a new one. The scale volume can never be 0 or less.","fullName":"Tween maximum scale volume","functionType":"Action","group":"3D wobble scale configuration","name":"TweenScaleMax","sentence":"Tween the maximum scale volume of object _PARAM0_ to _PARAM2_ over _PARAM3_ seconds with _PARAM4_ easing","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["ScaleMaxTweenInitialValue","=","Object.Behavior::ScaleMax()"]},{"type":{"value":"SetNumberVariable"},"parameters":["ScaleMaxTweenTime","=","0"]},{"type":{"value":"SetNumberVariable"},"parameters":["ScaleMaxTweenTarget","=","TargetedValue"]},{"type":{"value":"SetNumberVariable"},"parameters":["ScaleMaxTweenDuration","=","Duration"]},{"type":{"value":"SetStringVariable"},"parameters":["ScaleMaxTweenEasing","=","Easing"]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Wobble","type":"behavior"},{"description":"Maximum scale volume","name":"TargetedValue","type":"expression"},{"description":"Duration (in seconds)","name":"Duration","type":"expression"},{"description":"Easing","name":"Easing","supplementaryInformation":"[\"linear\",\"easeInQuad\",\"easeOutQuad\",\"easeInOutQuad\",\"easeInCubic\",\"easeOutCubic\",\"easeInOutCubic\",\"easeInQuart\",\"easeOutQuart\",\"easeInOutQuart\",\"easeInQuint\",\"easeOutQuint\",\"easeInOutQuint\",\"easeInOutSine\",\"easeInExpo\",\"easeOutExpo\",\"easeInOutExpo\",\"easeInCirc\",\"easeOutCirc\",\"easeInOutCirc\",\"easeOutBounce\",\"easeInBack\",\"easeOutBack\",\"easeInOutBack\",\"elastic\",\"swingFromTo\",\"swingFrom\",\"swingTo\",\"bounce\",\"bouncePast\",\"easeFromTo\",\"easeFrom\",\"easeTo\"]","type":"stringWithSelector"}],"objectGroups":[]},{"fullName":"Time delta","functionType":"Expression","name":"TimeDelta","private":true,"sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["TimeDelta() * LayerTimeScale(Object.Layer())"]}]}],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Wobble","type":"behavior"}],"objectGroups":[]},{"fullName":"Update scale volume","functionType":"Action","name":"UpdateScaleVolume","private":true,"sentence":"Update scale volume of _PARAM0_","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"Tween3D::Tween3D::SetScaleVolume"},"parameters":["Object","Tween3D","=","exp(log(ScaleMin) + (log(ScaleMax) - log(ScaleMin)) * sin(Angle + ScalePeriodOffset / PeriodDuration * 2 * Pi()))","Object3D"]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Wobble","type":"behavior"}],"objectGroups":[]},{"fullName":"Update stretch","functionType":"Action","name":"UpdateStretch","private":true,"sentence":"Update stretch of _PARAM0_","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"StringVariable"},"parameters":["Top","=","\"Z+\""]}],"actions":[{"type":{"value":"Tween3D::Tween3D::SetStretchZ"},"parameters":["Object","Tween3D","=","exp(log(StretchMin) + (log(StretchMax) - log(StretchMin)) * sin(Angle + StretchPeriodOffset / PeriodDuration * 2 * Pi()))","Object3D"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"StringVariable"},"parameters":["Top","=","\"Y-\""]}],"actions":[{"type":{"value":"Tween3D::Tween3D::SetStretchY"},"parameters":["Object","Tween3D","=","exp(log(StretchMin) + (log(StretchMax) - log(StretchMin)) * sin(Angle + StretchPeriodOffset / PeriodDuration * 2 * Pi()))","Object3D"]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Wobble","type":"behavior"}],"objectGroups":[]},{"description":"the cycle duration of the object.","fullName":"Cycle duration","functionType":"ExpressionAndCondition","group":"3D wobble configuration","name":"PeriodDuration","sentence":"the cycle duration","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["PeriodDuration"]}]}],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Wobble","type":"behavior"}],"objectGroups":[]},{"fullName":"","functionType":"ActionWithOperator","getterName":"PeriodDuration","name":"SetPeriodDuration","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["PeriodDuration","=","Value"]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Wobble","type":"behavior"}],"objectGroups":[]},{"description":"the scale cycle offset of the object.","fullName":"Scale cycle offset","functionType":"ExpressionAndCondition","group":"3D wobble scale configuration","name":"ScalePeriodOffset","sentence":"the scale cycle offset","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["ScalePeriodOffset"]}]}],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Wobble","type":"behavior"}],"objectGroups":[]},{"fullName":"","functionType":"ActionWithOperator","getterName":"ScalePeriodOffset","name":"SetScalePeriodOffset","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["ScalePeriodOffset","=","Value"]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Wobble","type":"behavior"}],"objectGroups":[]},{"description":"the minimum stretch of the object.","fullName":"Minimum stretch","functionType":"ExpressionAndCondition","group":"3D wobble stretch configuration","name":"StretchMin","sentence":"the minimum stretch","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["StretchMin"]}]}],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Wobble","type":"behavior"}],"objectGroups":[]},{"fullName":"","functionType":"ActionWithOperator","getterName":"StretchMin","name":"SetStretchMin","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["StretchMin","=","Value"]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Wobble","type":"behavior"}],"objectGroups":[]},{"description":"the maximum stretch of the object.","fullName":"Maximum stretch","functionType":"ExpressionAndCondition","group":"3D wobble stretch configuration","name":"StretchMax","sentence":"the maximum stretch","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["StretchMax"]}]}],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Wobble","type":"behavior"}],"objectGroups":[]},{"fullName":"","functionType":"ActionWithOperator","getterName":"StretchMax","name":"SetStretchMax","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["StretchMax","=","Value"]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Wobble","type":"behavior"}],"objectGroups":[]},{"description":"the stretch cycle offset of the object.","fullName":"Stretch cycle offset","functionType":"ExpressionAndCondition","group":"3D wobble stretch configuration","name":"StretchPeriodOffset","sentence":"the stretch cycle offset","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["StretchPeriodOffset"]}]}],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Wobble","type":"behavior"}],"objectGroups":[]},{"fullName":"","functionType":"ActionWithOperator","getterName":"StretchPeriodOffset","name":"SetStretchPeriodOffset","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["StretchPeriodOffset","=","Value"]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"Tween3D::Wobble","type":"behavior"}],"objectGroups":[]}],"propertyDescriptors":[{"value":"0.75","type":"Number","unit":"Dimensionless","label":"Minimum scale volume","description":"","group":"Scale","extraInformation":[],"name":"ScaleMin"},{"value":"1","type":"Number","unit":"Dimensionless","label":"Maximum scale volume","description":"","group":"Scale","extraInformation":[],"name":"ScaleMax"},{"value":"1","type":"Number","unit":"Second","label":"Cycle duration","description":"","group":"","extraInformation":[],"name":"PeriodDuration"},{"value":"0","type":"Number","unit":"Second","label":"Scale cycle offset","description":"","group":"Scale","extraInformation":[],"name":"ScalePeriodOffset"},{"value":"1","type":"Number","unit":"Dimensionless","label":"Minimum stretch","description":"","group":"Stretch","extraInformation":[],"name":"StretchMin"},{"value":"1.25","type":"Number","unit":"Dimensionless","label":"Maximum stretch","description":"","group":"Stretch","extraInformation":[],"name":"StretchMax"},{"value":"-0.25","type":"Number","unit":"Second","label":"Stretch cycle offset","description":"","group":"Stretch","extraInformation":[],"name":"StretchPeriodOffset"},{"value":"0","type":"Number","unit":"DegreeAngle","label":"","description":"","group":"","extraInformation":[],"hidden":true,"name":"Angle"},{"value":"0","type":"Number","unit":"Dimensionless","label":"","description":"","group":"","extraInformation":[],"hidden":true,"name":"ScaleMinTweenTarget"},{"value":"0","type":"Number","unit":"Second","label":"","description":"","group":"","extraInformation":[],"hidden":true,"name":"ScaleMinTweenDuration"},{"value":"","type":"String","label":"","description":"","group":"","extraInformation":[],"hidden":true,"name":"ScaleMinTweenEasing"},{"value":"0","type":"Number","unit":"Dimensionless","label":"","description":"","group":"","extraInformation":[],"hidden":true,"name":"ScaleMaxTweenTarget"},{"value":"0","type":"Number","unit":"Second","label":"","description":"","group":"","extraInformation":[],"hidden":true,"name":"ScaleMaxTweenDuration"},{"value":"","type":"String","label":"","description":"","group":"","extraInformation":[],"hidden":true,"name":"ScaleMaxTweenEasing"},{"value":"0","type":"Number","unit":"Second","label":"","description":"","group":"","extraInformation":[],"hidden":true,"name":"ScaleMinTweenTime"},{"value":"0","type":"Number","unit":"Second","label":"","description":"","group":"","extraInformation":[],"hidden":true,"name":"ScaleMaxTweenTime"},{"value":"0","type":"Number","label":"","description":"","group":"","extraInformation":[],"hidden":true,"name":"ScaleMinTweenInitialValue"},{"value":"0","type":"Number","label":"","description":"","group":"","extraInformation":[],"hidden":true,"name":"ScaleMaxTweenInitialValue"},{"value":"Z+","type":"Choice","label":"Top orientation","description":"","group":"","extraInformation":["Z+","Y-"],"name":"Top"},{"value":"","type":"Behavior","label":"3D tween","description":"","group":"","extraInformation":["Tween3D::Tween3D"],"name":"Tween3D"}],"sharedPropertyDescriptors":[]}],"eventsBasedObjects":[]}],"externalLayouts":[{"associatedLayout":"MainScene","name":"UI","instances":[{"angle":0.0,"customSize":true,"depth":1.0,"height":64.0,"keepRatio":true,"layer":"UI","name":"TestPrint","persistentUuid":"e7cb25a4-6e12-47ca-bd41-caac2e2aa12e","width":491.0,"x":1361.0,"y":789.0,"zOrder":1,"numberProperties":[],"stringProperties":[],"initialVariables":[{"name":"ID","type":"number","value":2.0}]},{"angle":0.0,"customSize":true,"depth":1.0,"height":64.0,"keepRatio":true,"layer":"UI","name":"TestPrint","persistentUuid":"6044e998-3a09-4664-9549-3d2bbd877669","width":487.0,"x":1359.0,"y":986.0,"zOrder":1,"numberProperties":[],"stringProperties":[],"initialVariables":[{"name":"ID","type":"number","value":1.0}]},{"angle":0.0,"customSize":true,"depth":1.0,"height":64.0,"keepRatio":true,"layer":"UI","name":"TestPrint","persistentUuid":"4dbe9650-6076-40be-a7b1-e1d1ebdabce2","width":491.0,"x":1360.0,"y":886.0,"zOrder":1,"numberProperties":[],"stringProperties":[],"initialVariables":[]}],"editionSettings":{"grid":false,"gridType":"rectangular","gridWidth":32.0,"gridHeight":32.0,"gridOffsetX":0.0,"gridOffsetY":0.0,"gridColor":10401023.0,"gridAlpha":0.8,"snap":false,"zoomFactor":0.36458333333333339,"windowMask":false}}]}