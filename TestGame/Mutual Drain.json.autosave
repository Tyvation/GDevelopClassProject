{"firstLayout":"","gdVersion":{"build":228,"major":5,"minor":5,"revision":0},"properties":{"adaptGameResolutionAtRuntime":true,"antialiasingMode":"MSAA","antialisingEnabledOnMobile":false,"folderProject":false,"orientation":"default","packageName":"com.example.gamename","pixelsRounding":false,"projectUuid":"0d91894e-ce23-4eee-b7c2-6cfe3deb0459","scaleMode":"linear","sizeOnStartupMode":"adaptWidth","templateSlug":"","version":"1.0.0","name":"Mutual Drain","description":"","author":"","windowWidth":1920,"windowHeight":1080,"latestCompilationDirectory":"","maxFPS":0,"minFPS":20,"verticalSync":false,"platformSpecificAssets":{"android-icon-144":"","android-icon-192":"","android-icon-36":"","android-icon-48":"","android-icon-72":"","android-icon-96":"","android-windowSplashScreenAnimatedIcon":"","desktop-icon-512":"","ios-icon-100":"","ios-icon-1024":"","ios-icon-114":"","ios-icon-120":"","ios-icon-144":"","ios-icon-152":"","ios-icon-167":"","ios-icon-180":"","ios-icon-20":"","ios-icon-29":"","ios-icon-40":"","ios-icon-50":"","ios-icon-57":"","ios-icon-58":"","ios-icon-60":"","ios-icon-72":"","ios-icon-76":"","ios-icon-80":"","ios-icon-87":""},"loadingScreen":{"backgroundColor":0,"backgroundFadeInDuration":0.2,"backgroundImageResourceName":"","gdevelopLogoStyle":"light","logoAndProgressFadeInDuration":0.2,"logoAndProgressLogoFadeInDelay":0.2,"minDuration":1.5,"progressBarColor":16777215,"progressBarHeight":20.0,"progressBarMaxWidth":200.0,"progressBarMinWidth":40.0,"progressBarWidthPercent":30.0,"showGDevelopSplash":true,"showProgressBar":true},"watermark":{"placement":"bottom-left","showWatermark":true},"authorIds":[],"authorUsernames":[],"categories":[],"playableDevices":[],"extensionProperties":[],"platforms":[{"name":"GDevelop JS platform"}],"currentPlatform":"GDevelop JS platform"},"resources":{"resources":[{"file":"assets/Femal Adventurer.glb","kind":"model3D","metadata":"","name":"Femal Adventurer.glb","userAdded":false,"origin":{"identifier":"https://asset-resources.gdevelop.io/public-resources/3D Animated Characters/9c7e9a8d2e68f8e0a31fb7956a6c35b41572e2b04b051cb87e396c33f48d85a1_Femal Adventurer.glb","name":"Femal Adventurer.glb"}},{"file":"assets/Leela.glb","kind":"model3D","metadata":"","name":"Leela.glb","userAdded":false,"origin":{"identifier":"https://asset-resources.gdevelop.io/public-resources/3D Animated Robots/b800d4aba45b55e5e6863f4e0ce07459bc0ccc5b427ea9612afb2018c3b5d86e_Leela.glb","name":"Leela.glb"}},{"file":"assets/blockLarge.glb","kind":"model3D","metadata":"","name":"blockLarge.glb","userAdded":false,"origin":{"identifier":"https://asset-resources.gdevelop.io/public-resources/3D Platformer Kit/ground/8e259e29aa7864cf3b88279f078dc061b8788bb97be490f7f2e378f7286b26af_blockLarge.glb","name":"blockLarge.glb"}},{"file":"assets/Crate.glb","kind":"model3D","metadata":"","name":"Crate.glb","userAdded":false,"origin":{"identifier":"https://asset-resources.gdevelop.io/public-resources/3D Fantasy RTS/78b40130d1da2ccf7669a2ac8309dea45e153b96f2c4c9172291b66482c90e20_Crate.glb","name":"Crate.glb"}},{"file":"assets/New3DBox2_Front.png","kind":"image","metadata":"{\"extension\":\".png\",\"pskl\":{}}","name":"New3DBox2_Front","smoothed":true,"userAdded":false},{"file":"assets/New3DBox2_Front2.png","kind":"image","metadata":"{\"extension\":\".png\",\"pskl\":{}}","name":"New3DBox2_Front2","smoothed":true,"userAdded":false},{"file":"TrainStation.glb","kind":"model3D","metadata":"","name":"TrainStation.glb","userAdded":false},{"file":"Train.glb","kind":"model3D","metadata":"","name":"Train.glb","userAdded":false},{"file":"assets/Light_Source_Top.png","kind":"image","metadata":"{\"extension\":\".png\",\"pskl\":{}}","name":"Light_Source_Top","smoothed":true,"userAdded":false},{"file":"assets/New3DBox_Front.png","kind":"image","metadata":"{\"extension\":\".png\",\"pskl\":{}}","name":"New3DBox_Front","smoothed":true,"userAdded":false}],"resourceFolders":[]},"objects":[],"objectsFolderStructure":{"folderName":"__ROOT"},"objectsGroups":[],"variables":[{"folded":true,"name":"PlayerWalkSpeed","type":"number","value":200.0},{"folded":true,"name":"PlayerSprintSpeed","type":"number","value":250.0},{"name":"InputX","type":"number","value":0.0},{"name":"InputY","type":"number","value":0.0},{"name":"Attacking","type":"number","value":0.0},{"name":"CurrentLevel","type":"number","value":1.0},{"name":"CurrentRotation","type":"number","value":0.0}],"layouts":[{"b":209,"disableInputWhenNotFocused":true,"mangledName":"Main_32Scene","name":"Main Scene","r":209,"standardSortMethod":true,"stopSoundsOnStartup":true,"title":"Resident Not Evil","v":209,"uiSettings":{"grid":false,"gridType":"rectangular","gridWidth":32.0,"gridHeight":32.0,"gridOffsetX":0.0,"gridOffsetY":0.0,"gridColor":10401023.0,"gridAlpha":0.8,"snap":false,"zoomFactor":0.263222312574066,"windowMask":false},"objectsGroups":[],"variables":[],"instances":[{"angle":0.0,"customSize":false,"height":3.582087761438109,"keepRatio":true,"layer":"","name":"Player","persistentUuid":"b3308c36-34b2-47a7-bb68-a238a39ec8dc","width":1.0,"x":872.0,"y":268.0,"z":12.0,"zOrder":7,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":false,"height":0.0,"keepRatio":true,"layer":"Game UI","name":"NewBBText2","persistentUuid":"7210aa4c-e7bc-4466-a99c-7880ef13e71c","width":0.0,"x":1671.0,"y":946.0,"zOrder":8,"numberProperties":[],"stringProperties":[],"initialVariables":[]}],"objects":[{"assetStoreId":"04a98cd20ab3872167a6dadc5617c4bca0b7678c431f69ecf4bab3ccd13d91d4","name":"Player","type":"Scene3D::Model3DObject","variables":[],"effects":[],"behaviors":[{"isFolded":true,"name":"A3I","type":"A3F::A3I","Capability3d":"Object3D","AxesHelper":false,"Blend":"Keep model blend mode","Opacity":255.0,"CastShadow":true,"ReceiveShadow":false},{"isFolded":true,"name":"Physics3D","type":"Physics3D::Physics3DBehavior","object3D":"Object3D","bodyType":"Dynamic","bullet":false,"fixedRotation":false,"shape":"Capsule","shapeOrientation":"Z","shapeDimensionA":0.0,"shapeDimensionB":0.0,"shapeDimensionC":0.0,"density":1.0,"friction":0.3,"restitution":0.1,"linearDamping":0.1,"angularDamping":0.1,"gravityScale":1.0,"layers":17.0,"masks":17.0},{"isFolded":true,"name":"PhysicsCharacter3D","type":"Physics3D::PhysicsCharacter3D","physics3D":"Physics3D","jumpHeight":100.0,"jumpSustainTime":0.2,"gravity":1000.0,"fallingSpeedMax":700.0,"forwardAcceleration":1800.0,"forwardDeceleration":1800.0,"forwardSpeedMax":200.0,"sidewaysAcceleration":800.0,"sidewaysDeceleration":800.0,"sidewaysSpeedMax":400.0,"slopeMaxAngle":50.0,"stairHeightMax":20.0,"shouldBindObjectAndForwardAngle":true,"canBePushed":true}],"content":{"centerLocation":"ModelOrigin","crossfadeDuration":0.2,"depth":141.0,"height":141.0,"keepAspectRatio":true,"materialType":"KeepOriginal","modelResourceName":"Femal Adventurer.glb","originLocation":"ModelOrigin","rotationX":90.0,"rotationY":0.0,"rotationZ":90.0,"width":141.0,"animations":[{"loop":true,"name":"Idle","source":"Idle"},{"loop":true,"name":"Walk","source":"Walk"},{"loop":true,"name":"Run","source":"Run"},{"loop":false,"name":"Death","source":"Death"},{"loop":false,"name":"GunShoot","source":"Gun_Shoot"},{"loop":false,"name":"HitRecieve2","source":"HitRecieve_2"},{"loop":false,"name":"HitRecieve","source":"HitRecieve"},{"loop":true,"name":"IdleGun","source":"Idle_Gun"},{"loop":true,"name":"IdleGunPointing","source":"Idle_Gun_Pointing"},{"loop":false,"name":"IdleGunShoot","source":"Idle_Gun_Shoot"},{"loop":true,"name":"IdleNeutral","source":"Idle_Neutral"},{"loop":true,"name":"IdleSword","source":"Idle_Sword"},{"loop":false,"name":"Interact","source":"Interact"},{"loop":false,"name":"KickLeft","source":"Kick_Left"},{"loop":false,"name":"KickRight","source":"Kick_Right"},{"loop":false,"name":"PunchLeft","source":"Punch_Left"},{"loop":false,"name":"PunchRight","source":"Punch_Right"},{"loop":false,"name":"Roll","source":"Roll"},{"loop":true,"name":"RunBack","source":"Run_Back"},{"loop":true,"name":"RunLeft","source":"Run_Left"},{"loop":true,"name":"RunRight","source":"Run_Right"},{"loop":false,"name":"RunShoot","source":"Run_Shoot"},{"loop":false,"name":"SwordSlash","source":"Sword_Slash"},{"loop":false,"name":"Wave","source":"Wave"}]}},{"assetStoreId":"","name":"Camera","type":"Scene3D::Cube3DObject","variables":[],"effects":[],"behaviors":[],"content":{"width":100.0,"height":100.0,"depth":100.0,"enableTextureTransparency":false,"facesOrientation":"Y","frontFaceResourceName":"New3DBox2_Front2","backFaceResourceName":"New3DBox2_Front","backFaceUpThroughWhichAxisRotation":"X","leftFaceResourceName":"New3DBox2_Front","rightFaceResourceName":"New3DBox2_Front","topFaceResourceName":"New3DBox2_Front","bottomFaceResourceName":"New3DBox2_Front","frontFaceVisible":true,"backFaceVisible":false,"leftFaceVisible":true,"rightFaceVisible":true,"topFaceVisible":true,"bottomFaceVisible":true,"frontFaceResourceRepeat":false,"backFaceResourceRepeat":false,"leftFaceResourceRepeat":false,"rightFaceResourceRepeat":false,"topFaceResourceRepeat":false,"bottomFaceResourceRepeat":false,"materialType":"Basic"}},{"assetStoreId":"","name":"NewBBText2","type":"BBText::BBText","variables":[],"effects":[],"behaviors":[],"content":{"text":"What : ","opacity":255.0,"fontSize":20.0,"visible":true,"color":"0;0;0","fontFamily":"Arial","align":"left","wordWrap":true}},{"assetStoreId":"","name":"Invisible_Wall","type":"Scene3D::Cube3DObject","variables":[],"effects":[],"behaviors":[{"name":"Physics3D","type":"Physics3D::Physics3DBehavior","object3D":"Object3D","bodyType":"Static","bullet":false,"fixedRotation":false,"shape":"Box","shapeOrientation":"Z","shapeDimensionA":0.0,"shapeDimensionB":0.0,"shapeDimensionC":0.0,"density":1.0,"friction":0.3,"restitution":0.1,"linearDamping":0.1,"angularDamping":0.1,"gravityScale":1.0,"layers":17.0,"masks":17.0}],"content":{"width":100.0,"height":100.0,"depth":100.0,"enableTextureTransparency":false,"facesOrientation":"Y","frontFaceResourceName":"","backFaceResourceName":"","backFaceUpThroughWhichAxisRotation":"X","leftFaceResourceName":"","rightFaceResourceName":"","topFaceResourceName":"","bottomFaceResourceName":"","frontFaceVisible":true,"backFaceVisible":true,"leftFaceVisible":true,"rightFaceVisible":true,"topFaceVisible":true,"bottomFaceVisible":true,"frontFaceResourceRepeat":false,"backFaceResourceRepeat":false,"leftFaceResourceRepeat":false,"rightFaceResourceRepeat":false,"topFaceResourceRepeat":false,"bottomFaceResourceRepeat":false,"materialType":"Basic","tint":"255;255;255"}},{"assetStoreId":"","name":"TrainStation_0","type":"Scene3D::Model3DObject","variables":[],"effects":[],"behaviors":[{"name":"A3I","type":"A3F::A3I","Capability3d":"Object3D","AxesHelper":false,"Blend":"Keep model blend mode","Opacity":255.0,"CastShadow":false,"ReceiveShadow":true}],"content":{"centerLocation":"ModelOrigin","crossfadeDuration":0.10000000149011612,"depth":1000.0,"height":1000.0,"keepAspectRatio":true,"materialType":"StandardWithoutMetalness","modelResourceName":"TrainStation.glb","originLocation":"ModelOrigin","rotationX":90.0,"rotationY":0.0,"rotationZ":0.0,"width":1000.0,"animations":[]}},{"assetStoreId":"","name":"Train","type":"Scene3D::Model3DObject","variables":[],"effects":[],"behaviors":[{"name":"A3I","type":"A3F::A3I","Capability3d":"Object3D","AxesHelper":false,"Blend":"Keep model blend mode","Opacity":255.0,"CastShadow":false,"ReceiveShadow":true}],"content":{"centerLocation":"ModelOrigin","crossfadeDuration":0.10000000149011612,"depth":1000.0,"height":1000.0,"keepAspectRatio":true,"materialType":"StandardWithoutMetalness","modelResourceName":"Train.glb","originLocation":"ModelOrigin","rotationX":90.0,"rotationY":0.0,"rotationZ":0.0,"width":1000.0,"animations":[]}},{"assetStoreId":"","name":"Light_Source","type":"Scene3D::Cube3DObject","variables":[],"effects":[],"behaviors":[{"name":"A3L","type":"A3F::A3L","Capability3d":"Object3D","Type":"Spot Light","Color":"255;255;255","Intensity":1.0,"Distance":2000.0,"SpotAngle":90.0,"SpotPenumbra":0.7,"CastShadow":true,"ShadowMapSize":"512px","ShadowRange":256.0,"ShadowDepthBias":0.0,"ShadowNormalBias":0.0,"LightHelper":false,"ShadowHelper":false}],"content":{"width":10.0,"height":10.0,"depth":10.0,"enableTextureTransparency":true,"facesOrientation":"Y","frontFaceResourceName":"Light_Source_Top","backFaceResourceName":"Light_Source_Top","backFaceUpThroughWhichAxisRotation":"X","leftFaceResourceName":"Light_Source_Top","rightFaceResourceName":"New3DBox2_Front","topFaceResourceName":"Light_Source_Top","bottomFaceResourceName":"Light_Source_Top","frontFaceVisible":true,"backFaceVisible":false,"leftFaceVisible":true,"rightFaceVisible":true,"topFaceVisible":true,"bottomFaceVisible":true,"frontFaceResourceRepeat":false,"backFaceResourceRepeat":false,"leftFaceResourceRepeat":false,"rightFaceResourceRepeat":false,"topFaceResourceRepeat":false,"bottomFaceResourceRepeat":false,"materialType":"StandardWithoutMetalness","tint":"255;255;255"}},{"assetStoreId":"","name":"Trigger_Box","type":"Scene3D::Cube3DObject","variables":[{"name":"Level","type":"number","value":1.0}],"effects":[],"behaviors":[],"content":{"width":100.0,"height":100.0,"depth":100.0,"enableTextureTransparency":true,"facesOrientation":"Y","frontFaceResourceName":"","backFaceResourceName":"","backFaceUpThroughWhichAxisRotation":"X","leftFaceResourceName":"","rightFaceResourceName":"","topFaceResourceName":"","bottomFaceResourceName":"","frontFaceVisible":true,"backFaceVisible":true,"leftFaceVisible":true,"rightFaceVisible":true,"topFaceVisible":true,"bottomFaceVisible":true,"frontFaceResourceRepeat":false,"backFaceResourceRepeat":false,"leftFaceResourceRepeat":false,"rightFaceResourceRepeat":false,"topFaceResourceRepeat":false,"bottomFaceResourceRepeat":false,"materialType":"Basic","tint":"255;255;255"}},{"assetStoreId":"","name":"StartPos","type":"Scene3D::Cube3DObject","variables":[],"effects":[],"behaviors":[],"content":{"width":30.0,"height":30.0,"depth":30.0,"enableTextureTransparency":false,"facesOrientation":"Y","frontFaceResourceName":"","backFaceResourceName":"","backFaceUpThroughWhichAxisRotation":"X","leftFaceResourceName":"","rightFaceResourceName":"","topFaceResourceName":"","bottomFaceResourceName":"","frontFaceVisible":true,"backFaceVisible":false,"leftFaceVisible":true,"rightFaceVisible":true,"topFaceVisible":true,"bottomFaceVisible":true,"frontFaceResourceRepeat":false,"backFaceResourceRepeat":false,"leftFaceResourceRepeat":false,"rightFaceResourceRepeat":false,"topFaceResourceRepeat":false,"bottomFaceResourceRepeat":false,"materialType":"Basic","tint":"255;255;255"}},{"assetStoreId":"","name":"Black_Box","type":"Scene3D::Cube3DObject","variables":[],"effects":[],"behaviors":[],"content":{"width":100.0,"height":100.0,"depth":100.0,"enableTextureTransparency":false,"facesOrientation":"Y","frontFaceResourceName":"New3DBox_Front","backFaceResourceName":"New3DBox_Front","backFaceUpThroughWhichAxisRotation":"X","leftFaceResourceName":"New3DBox_Front","rightFaceResourceName":"New3DBox_Front","topFaceResourceName":"New3DBox_Front","bottomFaceResourceName":"New3DBox_Front","frontFaceVisible":true,"backFaceVisible":true,"leftFaceVisible":true,"rightFaceVisible":true,"topFaceVisible":true,"bottomFaceVisible":true,"frontFaceResourceRepeat":false,"backFaceResourceRepeat":false,"leftFaceResourceRepeat":false,"rightFaceResourceRepeat":false,"topFaceResourceRepeat":false,"bottomFaceResourceRepeat":false,"materialType":"StandardWithoutMetalness","tint":"255;255;255"}},{"assetStoreId":"","name":"Camera_Trigger","type":"Scene3D::Cube3DObject","variables":[],"effects":[],"behaviors":[],"content":{"width":100.0,"height":100.0,"depth":100.0,"enableTextureTransparency":false,"facesOrientation":"Y","frontFaceResourceName":"","backFaceResourceName":"","backFaceUpThroughWhichAxisRotation":"X","leftFaceResourceName":"","rightFaceResourceName":"","topFaceResourceName":"","bottomFaceResourceName":"","frontFaceVisible":true,"backFaceVisible":false,"leftFaceVisible":true,"rightFaceVisible":true,"topFaceVisible":true,"bottomFaceVisible":true,"frontFaceResourceRepeat":false,"backFaceResourceRepeat":false,"leftFaceResourceRepeat":false,"rightFaceResourceRepeat":false,"topFaceResourceRepeat":false,"bottomFaceResourceRepeat":false,"materialType":"Basic","tint":"255;255;255"}}],"objectsFolderStructure":{"folderName":"__ROOT","children":[{"folderName":"UI","children":[{"objectName":"NewBBText2"}]},{"folderName":"Background","children":[{"objectName":"Train"},{"objectName":"TrainStation_0"},{"objectName":"Black_Box"}]},{"folderName":"Actors","children":[{"objectName":"Camera"},{"objectName":"Light_Source"},{"objectName":"Player"}]},{"folderName":"Interact","children":[{"objectName":"Camera_Trigger"},{"objectName":"Invisible_Wall"},{"objectName":"StartPos"},{"objectName":"Trigger_Box"}]}]},"events":[{"colorB":228,"colorG":176,"colorR":74,"creationTime":0,"name":"Initial State","source":"","type":"BuiltinCommonInstructions::Group","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"DepartScene"},"parameters":[""]}],"actions":[{"type":{"value":"BuiltinExternalLayouts::CreateObjectsFromExternalLayout"},"parameters":["","\"Station\"+ToString(CurrentLevel)","","",""]}],"events":[{"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Hide Collisions"},{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"Cache"},"parameters":["Camera"]},{"type":{"value":"Cache"},"parameters":["Invisible_Wall"]},{"type":{"value":"Cache"},"parameters":["Trigger_Box"]},{"type":{"value":"Cache"},"parameters":["StartPos"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"MettreXY"},"parameters":["Player","=","StartPos.X()","=","StartPos.Y()"]},{"type":{"value":"Scene3D::Base3DBehavior::SetCenterZ"},"parameters":["Player","Object3D","=","StartPos.Object3D::Z()"]},{"type":{"value":"SetAngle"},"parameters":["Player","=","CurrentRotation"]}]}]}],"parameters":[]},{"disabled":true,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Raycaster3D::RaycastBetweenPosition"},"parameters":["Player","TrainStation_0","Player.CenterY()","Player.CenterX()","Player.Object3D::Z()","Player.CenterX()","Player.Y()","Player.Object3D::Z()",""]},{"type":{"value":"Collision3D::AreInCollision"},"parameters":["Player","Player","Object3D","TrainStation_0","Object3D","",""]}],"actions":[{"type":{"value":"Scene3D::Base3DBehavior::SetCenterZ"},"parameters":["Player","Object3D","=","Raycaster3D::IntersectionZ() + 16"]}]},{"disabled":true,"folded":true,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Raycaster3D::RaycastWithAngle"},"parameters":["Player","TrainStation_0","Player.CenterX()","Player.CenterY()","Player.Object3D::Z()","0","-90","9999",""]},{"type":{"value":"Collision3D::AreInCollision"},"parameters":["Player","Player","Object3D","TrainStation_0","Object3D","",""]}],"actions":[],"events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"Scene3D::Base3DBehavior::SetCenterZ"},"parameters":["Player","Object3D","=","Raycaster3D::IntersectionZ() + 16"]}]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Collision3D::AreInCollision"},"parameters":["","Trigger_Box","Object3D","Player","Object3D","",""]}],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["CurrentRotation","=","Player.Angle()"]},{"type":{"value":"SetNumberVariable"},"parameters":["CurrentLevel","=","Trigger_Box.Level"]},{"type":{"value":"Scene"},"parameters":["","\"Main Scene\"",""]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Collision3D::AreInCollision"},"parameters":["","Camera_Trigger","Object3D","Player","Object3D","",""]}],"actions":[]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Scene3D::Base3DBehavior::Z"},"parameters":["Player","Object3D","<","-100"]}],"actions":[{"type":{"value":"MettreXY"},"parameters":["Player","=","StartPos.X()","=","StartPos.Y()"]},{"type":{"value":"ScalableCapability::ScalableBehavior::SetValue"},"parameters":["Player","Scale","=","StartPos.Object3D::Z()"]}]},{"type":"BuiltinCommonInstructions::Link","include":{"includeConfig":0},"target":"PlayerMovement/Camera"}],"layers":[{"ambientLightColorB":200,"ambientLightColorG":200,"ambientLightColorR":200,"camera3DFarPlaneDistance":10000.0,"camera3DFieldOfView":45.0,"camera3DNearPlaneDistance":3.0,"cameraType":"","followBaseLayerCamera":false,"isLightingLayer":false,"isLocked":false,"name":"","renderingType":"","visibility":true,"cameras":[{"defaultSize":true,"defaultViewport":true,"height":0.0,"viewportBottom":1.0,"viewportLeft":0.0,"viewportRight":1.0,"viewportTop":0.0,"width":0.0}],"effects":[{"effectType":"Scene3D::HemisphereLight","name":"3D Light","doubleParameters":{"elevation":90.0,"intensity":0.2,"rotation":0.0},"stringParameters":{"groundColor":"127;127;127","skyColor":"255;255;255","top":"Y-"},"booleanParameters":{}}]},{"ambientLightColorB":200,"ambientLightColorG":200,"ambientLightColorR":200,"camera3DFarPlaneDistance":10000.0,"camera3DFieldOfView":45.0,"camera3DNearPlaneDistance":3.0,"cameraType":"","followBaseLayerCamera":false,"isLightingLayer":false,"isLocked":false,"name":"Game UI","renderingType":"","visibility":true,"cameras":[],"effects":[{"effectType":"Scene3D::HemisphereLight","name":"3D Light","doubleParameters":{"elevation":45.0,"intensity":1.0,"rotation":0.0},"stringParameters":{"groundColor":"64;64;64","skyColor":"255;255;255","top":"Y-"},"booleanParameters":{}}]}],"behaviorsSharedData":[{"name":"A3I","type":"A3F::A3I"},{"name":"A3L","type":"A3F::A3L"},{"name":"Animation","type":"AnimatableCapability::AnimatableBehavior"},{"name":"Effect","type":"EffectCapability::EffectBehavior"},{"name":"Flippable","type":"FlippableCapability::FlippableBehavior"},{"name":"Object3D","type":"Scene3D::Base3DBehavior"},{"name":"Opacity","type":"OpacityCapability::OpacityBehavior"},{"name":"Physics3D","type":"Physics3D::Physics3DBehavior","gravityX":0.0,"gravityY":0.0,"gravityZ":-9.8,"worldScale":100.0},{"name":"PhysicsCharacter3D","type":"Physics3D::PhysicsCharacter3D"},{"name":"Resizable","type":"ResizableCapability::ResizableBehavior"},{"name":"Scale","type":"ScalableCapability::ScalableBehavior"}]}],"externalEvents":[{"associatedLayout":"Main Scene","name":"PlayerMovement/Camera","events":[{"colorB":228,"colorG":176,"colorR":74,"creationTime":0,"folded":true,"name":"Camera","source":"","type":"BuiltinCommonInstructions::Group","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"FirstPersonCamera::LookFromObjectEyes"},"parameters":["","Camera","",""]},{"type":{"value":"Scene3D::TurnCameraTowardPosition"},"parameters":["","Player.X()","Player.Y()","Player.Z() + 50","","",""]}]}],"parameters":[]},{"colorB":228,"colorG":176,"colorR":74,"creationTime":0,"name":"Movement","source":"","type":"BuiltinCommonInstructions::Group","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["InputX","=","0"]},{"type":{"value":"SetNumberVariable"},"parameters":["InputY","=","0"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"KeyPressed"},"parameters":["","w"]}],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["InputY","=","1"]},{"type":{"value":"Physics3D::PhysicsCharacter3D::SimulateForwardKey"},"parameters":["Player","PhysicsCharacter3D"]},{"type":{"value":"AnimatableCapability::AnimatableBehavior::SetName"},"parameters":["Player","Animation","=","\"Run\""]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"KeyPressed"},"parameters":["","s"]}],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["InputY","=","-1"]},{"type":{"value":"Physics3D::PhysicsCharacter3D::SimulateBackwardKey"},"parameters":["Player","PhysicsCharacter3D"]},{"type":{"value":"AnimatableCapability::AnimatableBehavior::SetName"},"parameters":["Player","Animation","=","\"RunBack\""]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"KeyPressed"},"parameters":["","d"]}],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["InputX","=","1"]},{"type":{"value":"Rotate"},"parameters":["Player","InputX * 300",""]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"KeyPressed"},"parameters":["","a"]}],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["InputX","=","-1"]},{"type":{"value":"Rotate"},"parameters":["Player","InputX * 300",""]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"MouseButtonFromTextPressed"},"parameters":["","\"Left\""]}],"actions":[{"type":{"value":"AnimatableCapability::AnimatableBehavior::SetName"},"parameters":["Player","Animation","=","\"SwordSlash\""]},{"type":{"value":"SetNumberVariable"},"parameters":["Attacking","=","1"]},{"type":{"value":"Wait"},"parameters":["2"]},{"type":{"value":"SetNumberVariable"},"parameters":["Attacking","=","0"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"KeyFromTextPressed"},"parameters":["","\"Space\""]}],"actions":[{"type":{"value":"Physics3D::PhysicsCharacter3D::SimulateJumpKey"},"parameters":["Player","PhysicsCharacter3D"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"KeyFromTextPressed"},"parameters":["","\"e\""]}],"actions":[]},{"disabled":true,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Physics3D::PhysicsCharacter3D::IsMovingEvenALittle"},"parameters":["Player","PhysicsCharacter3D"]}],"actions":[{"type":{"value":"AnimatableCapability::AnimatableBehavior::SetName"},"parameters":["Player","Animation","=","\"Run\""]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":true,"value":"Physics3D::PhysicsCharacter3D::IsMovingEvenALittle"},"parameters":["Player","PhysicsCharacter3D"]},{"type":{"value":"NumberVariable"},"parameters":["InputY","=","0"]}],"actions":[],"events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberVariable"},"parameters":["Attacking","=","0"]}],"actions":[{"type":{"value":"AnimatableCapability::AnimatableBehavior::SetName"},"parameters":["Player","Animation","=","\"Idle\""]}]}]},{"disabled":true,"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"BBText::SetBBText"},"parameters":["NewBBText2","=","\"Transform : \n\"+ToString(roundTo(Player.X(), 1))+\n\", \"+ToString(roundTo(Player.Y(), 1))+\n\", \"+ToString(roundTo(Player.Z(), 1))"]}]}],"parameters":[]}]}],"eventsFunctionsExtensions":[{"author":"","category":"Camera","extensionNamespace":"","fullName":"First person 3D camera","gdevelopVersion":"","helpPath":"","iconUrl":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjMsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iSWNvbnMiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMzIgMzIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMyIDMyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KCS5zdDB7ZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDoxMDt9DQoJLnN0MXtmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjEwO30NCjwvc3R5bGU+DQo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMjcsMTZjMCwwLTQuOSw3LTExLDdTNSwxNiw1LDE2czQuOS03LDExLTdTMjcsMTYsMjcsMTZ6Ii8+DQo8Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSIxNiIgY3k9IjE2IiByPSIzIi8+DQo8cG9seWxpbmUgY2xhc3M9InN0MCIgcG9pbnRzPSIzLDkgMywzIDksMyAiLz4NCjxwb2x5bGluZSBjbGFzcz0ic3QwIiBwb2ludHM9IjksMjkgMywyOSAzLDIzICIvPg0KPHBvbHlsaW5lIGNsYXNzPSJzdDAiIHBvaW50cz0iMjksMjMgMjksMjkgMjMsMjkgIi8+DQo8cG9seWxpbmUgY2xhc3M9InN0MCIgcG9pbnRzPSIyMywzIDI5LDMgMjksOSAiLz4NCjwvc3ZnPg0K","name":"FirstPersonCamera","previewIconUrl":"https://asset-resources.gdevelop.io/public-resources/Icons/Line Hero Pack/Master/SVG/Security and Protection/e8248ffd504c314e6a9d9d560c3a0fdad3398a5f125ae6a4c0654d4e68c86376_Security and Protection_security_protection_eye_scan_lock.svg","shortDescription":"Move the camera to look though objects eyes.","version":"1.0.2","description":["Move the camera to look though objects eyes.","","This extension can be used with the \"Mouse pointer lock\" or \"Gamepad\" extension to build a first person camera."],"origin":{"identifier":"FirstPersonCamera","name":"gdevelop-extension-store"},"tags":["3d","camera","fps"],"authorIds":["IWykYNRvhCZBN3vEgKEbBPOR3Oc2"],"dependencies":[],"globalVariables":[],"sceneVariables":[],"eventsFunctions":[{"description":"Move the camera to look though _PARAM1_ eyes. The object must look to the right when all its angles are 0 and the top of its head be toward Z+.","fullName":"Look through object eyes","functionType":"Action","group":"Layers and cameras","name":"LookFromObjectEyes","sentence":"Move the camera of _PARAM2_ to look though _PARAM1_ eyes","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"CentreCamera"},"parameters":["","Object","","Layer",""]},{"type":{"value":"Scene3D::SetCameraZ"},"parameters":["","=","Object.Z()","Layer",""]},{"type":{"value":"Scene3D::SetCameraZ"},"parameters":["","=","Object.Z()","Layer",""]},{"type":{"value":"Scene3D::SetCameraRotationX"},"parameters":["","=","- Object.RotationY() + 90","Layer",""]},{"type":{"value":"Scene3D::SetCameraRotationY"},"parameters":["","=","Object.RotationX()","Layer",""]},{"type":{"value":"SetCameraAngle"},"parameters":["","=","Object.Angle() + 90","Layer",""]}]}],"parameters":[{"description":"Object","name":"Object","supplementaryInformation":"Scene3D::Cube3DObject","type":"objectList"},{"description":"Layer","name":"Layer","type":"layer"}],"objectGroups":[]}],"eventsBasedBehaviors":[],"eventsBasedObjects":[]},{"author":"PANDAKO-GitHub","category":"Input","extensionNamespace":"","fullName":"Mouse Pointer Lock","gdevelopVersion":"","helpPath":"","iconUrl":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjMsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iSWNvbnMiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMzIgMzIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMyIDMyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KCS5zdDB7ZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDoxMDt9DQo8L3N0eWxlPg0KPHBvbHlsaW5lIGNsYXNzPSJzdDAiIHBvaW50cz0iMTksMTkgMjQsMTkgMjQsMjQgIi8+DQo8cG9seWxpbmUgY2xhc3M9InN0MCIgcG9pbnRzPSI2LDIzIDExLDIzIDExLDE4ICIvPg0KPHBhdGggY2xhc3M9InN0MCIgZD0iTTI0LDE5LjRjLTAuNywwLjgtMS40LDEuNi0yLjIsMi40Yy03LDctMTUuMywxMC4yLTE4LjUsN3MtMC4xLTExLjUsNy0xOC41czE1LjMtMTAuMiwxOC41LTcNCgljMS40LDEuNCwxLjYsMy42LDAuOCw2LjMiLz4NCjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMSwyMi41Yy0wLjMtMC4yLTAuNS0wLjUtMC44LTAuOGMtNy03LTEwLjItMTUuMy03LTE4LjVzMTEuNS0wLjEsMTguNSw3czEwLjIsMTUuMyw3LDE4LjUNCgljLTEuNywxLjctNC44LDEuNi04LjQsMC4xIi8+DQo8L3N2Zz4NCg==","name":"MousePointerLock","previewIconUrl":"https://resources.gdevelop-app.com/assets/Icons/Line Hero Pack/Master/SVG/Virtual Reality/Virtual Reality_360_rotate_vr_movement.svg","shortDescription":"This behavior removes the limit on the distance the mouse can move and hides the cursor.","version":"0.2.1","description":["This behavior removes the limit on the distance the mouse can move and hides the cursor.","","For example, a user can rotate or continue to manipulate an object by moving the mouse endlessly ([open the project online](https://editor.gdevelop.io/?project=example://mouse-pointer-lock)).","Without the pointer lock, the rotation or operation will stop the moment the pointer reaches the edge of the browser or screen.","","Game players don't have to worry about leaving the gameplay area or accidentally clicking on another application that moves the mouse focus away from the game.","","Locking the pointer locks `CursorX()` and `CursorY()` expressions.","Use `MovementX()` and `MovementY()` instead.",""],"origin":{"identifier":"MousePointerLock","name":"gdevelop-extension-store"},"tags":["mouse","lock","cursor","pointer"],"authorIds":["Zu55H5hcb9YmZTltIVOTAFDJQyB2","IWykYNRvhCZBN3vEgKEbBPOR3Oc2"],"dependencies":[],"globalVariables":[],"sceneVariables":[],"eventsFunctions":[{"fullName":"","functionType":"Action","name":"onFirstSceneLoaded","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["class PointerLockHandler {","    movementX = 0;","    movementY = 0;","    retried = false;","    /**","     * @type {gdjs.RuntimeGame}","     */","    game;","","    /**","     * @param {gdjs.RuntimeGame} game","     */","    constructor(game) {","        this.game = game;","        const canvas = game.getRenderer().getCanvas();","","        canvas.addEventListener(\"pointermove\", event => {","            if (!!document.pointerLockElement) {","                this.movementX += event.movementX || 0;","                this.movementY += event.movementY || 0;","            }","        }, false);","","        document.addEventListener(\"pointerlockerror\", event => {","            if (!this.retried) {","                canvas.requestPointerLock();","                this.retried = true;","            }","        });","    }","","    requestPointerLock() {","        const canvas = this.game.getRenderer().getCanvas();","        if (canvas.requestPointerLock && !document.pointerLockElement) {","            this.retried = false;","            canvas.requestPointerLock({ unadjustedMovement: true });","        }","    }","","    exitPointerLock() {","        if (document.exitPointerLock) {","            document.exitPointerLock();","        }","    }","","    isPointerLocked() {","        return !!document.pointerLockElement;","    }","","    resetMovement() {","        this.movementX = 0;","        this.movementY = 0;","    }","};","","gdjs._MousePointerLockExtension = { handler: new PointerLockHandler(runtimeScene.getGame()) };",""],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"parameters":[],"objectGroups":[]},{"fullName":"","functionType":"Action","name":"onScenePostEvents","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const { handler } = gdjs._MousePointerLockExtension;\r","\r","handler.resetMovement();\r",""],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"MousePointerLock::isEmulatingPointerLock"},"parameters":["",""]}],"actions":[{"type":{"value":"MousePointerLock::SetMovementX"},"parameters":["","=","(MousePointerLock::TouchX(TouchId) - OldX) * TouchSpeedFactor",""]},{"type":{"value":"MousePointerLock::SetMovementY"},"parameters":["","=","(MousePointerLock::TouchY(TouchId) - OldY) * TouchSpeedFactor",""]},{"type":{"value":"SetNumberVariable"},"parameters":["OldX","=","MousePointerLock::TouchX(TouchId)"]},{"type":{"value":"SetNumberVariable"},"parameters":["OldY","=","MousePointerLock::TouchY(TouchId)"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"HasTouchEnded"},"parameters":["","TouchId"]}],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["TouchId","=","-1"]}]}],"parameters":[],"objectGroups":[]},{"description":"Lock the mouse pointer to hide it.","fullName":"Request Pointer Lock","functionType":"Action","name":"RequestPointerLock","sentence":"Request Pointer Lock","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"HasAnyTouchOrMouseStarted"},"parameters":[""]},{"type":{"value":"NumberVariable"},"parameters":["TouchId","=","-1"]}],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["TouchId","=","StartedTouchOrMouseId(0)"]},{"type":{"value":"SetNumberVariable"},"parameters":["OldX","=","MousePointerLock::TouchX(TouchId)"]},{"type":{"value":"SetNumberVariable"},"parameters":["OldY","=","MousePointerLock::TouchY(TouchId)"]}]},{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const { handler } = gdjs._MousePointerLockExtension;\r","\r","handler.requestPointerLock();\r",""],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"parameters":[],"objectGroups":[]},{"description":"Unlocks the mouse pointer and show it.","fullName":"Exit pointer lock","functionType":"Action","name":"ExitPointerLock","sentence":"Exit pointer lock","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["TouchId","=","-1"]}]},{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["\r","const { handler } = gdjs._MousePointerLockExtension;\r","\r","handler.exitPointerLock();\r",""],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"parameters":[],"objectGroups":[]},{"description":"Check if the mouse pointer is locked.","fullName":"Pointer is locked","functionType":"Condition","name":"isPointerLocked","sentence":"The mouse pointer is locked","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberVariable"},"parameters":["TouchId",">=","0"]}],"actions":[{"type":{"value":"SetReturnBoolean"},"parameters":["True"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberVariable"},"parameters":["TouchId","<","0"]},{"type":{"value":"MousePointerLock::isPointerActuallyLocked"},"parameters":["",""]}],"actions":[{"type":{"value":"SetReturnBoolean"},"parameters":["True"]}]}],"parameters":[],"objectGroups":[]},{"description":"Check if the mouse pointer is actually locked.","fullName":"Pointer is actually locked","functionType":"Condition","name":"isPointerActuallyLocked","private":true,"sentence":"The mouse pointer actually is locked","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["\r","const { handler } = gdjs._MousePointerLockExtension;\r","\r","eventsFunctionContext.returnValue = handler.isPointerLocked();\r",""],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"parameters":[],"objectGroups":[]},{"description":"Check if the mouse pointer lock is emulated.","fullName":"Pointer lock is emulated","functionType":"Condition","name":"isEmulatingPointerLock","private":true,"sentence":"The mouse pointer is lock is emulated","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":true,"value":"MousePointerLock::isPointerActuallyLocked"},"parameters":["",""]},{"type":{"value":"NumberVariable"},"parameters":["TouchId",">=","0"]}],"actions":[{"type":{"value":"SetReturnBoolean"},"parameters":["True"]}]}],"parameters":[],"objectGroups":[]},{"description":"Check if the locked pointer is moving.","fullName":"Locked pointer is moving","functionType":"Condition","name":"IsMoving","sentence":"Locked pointer is moving","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"BuiltinCommonInstructions::Or"},"parameters":[],"subInstructions":[{"type":{"value":"MousePointerLock::MovementX"},"parameters":["","!=","0",""]},{"type":{"value":"MousePointerLock::MovementY"},"parameters":["","!=","0",""]}]}],"actions":[{"type":{"value":"SetReturnBoolean"},"parameters":["True"]}]}],"parameters":[],"objectGroups":[]},{"description":"the movement of the locked pointer on the X axis.","fullName":"Pointer X movement","functionType":"ExpressionAndCondition","name":"MovementX","sentence":"the movement of the locked pointer on the X axis","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["\r","eventsFunctionContext.returnValue = gdjs._MousePointerLockExtension.handler.movementX || 0;\r",""],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[],"objectGroups":[]},{"description":"the movement of the locked pointer on the X axis.","fullName":"Pointer X movement","functionType":"ActionWithOperator","getterName":"MovementX","name":"SetMovementX","private":true,"sentence":"the movement of the locked pointer on the X axis","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["\r","const value = eventsFunctionContext.getArgument(\"Value\");\r","gdjs._MousePointerLockExtension.handler.movementX = value;\r",""],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"parameters":[],"objectGroups":[]},{"description":"the movement of the pointer on the Y axis.","fullName":"Pointer Y movement","functionType":"ExpressionAndCondition","name":"MovementY","sentence":"the movement of the pointer on the Y axis","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["\r","eventsFunctionContext.returnValue = gdjs._MousePointerLockExtension.handler.movementY || 0;\r",""],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[],"objectGroups":[]},{"description":"the movement of the locked pointer on the X axis.","fullName":"Pointer X movement","functionType":"ActionWithOperator","getterName":"MovementY","name":"SetMovementY","private":true,"sentence":"the movement of the locked pointer on the X axis","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["\r","const value = eventsFunctionContext.getArgument(\"Value\");\r","gdjs._MousePointerLockExtension.handler.movementY = value;\r",""],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"parameters":[],"objectGroups":[]},{"description":"Return the X position of a specific touch","fullName":"Touch X position","functionType":"Expression","name":"TouchX","private":true,"sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const touchId = eventsFunctionContext.getArgument(\"NewTouchId\");","eventsFunctionContext.returnValue = runtimeScene.getGame().getInputManager().getTouchX(touchId);",""],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[{"description":"Touch identifier","name":"NewTouchId","type":"expression"}],"objectGroups":[]},{"description":"Return the Y position of a specific touch","fullName":"Touch Y position","functionType":"Expression","name":"TouchY","private":true,"sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const touchId = eventsFunctionContext.getArgument(\"NewTouchId\");","eventsFunctionContext.returnValue = runtimeScene.getGame().getInputManager().getTouchY(touchId);",""],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[{"description":"Touch identifier","name":"NewTouchId","type":"expression"}],"objectGroups":[]},{"description":"the speed factor for touch movement.","fullName":"Speed factor for touch movement","functionType":"ExpressionAndCondition","name":"TouchSpeedFactor","sentence":"the speed factor for touch movement","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["TouchSpeedFactor"]}]}],"expressionType":{"type":"expression"},"parameters":[],"objectGroups":[]},{"fullName":"","functionType":"ActionWithOperator","getterName":"TouchSpeedFactor","name":"SetTouchSpeedFactor","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["TouchSpeedFactor","=","Value"]}]}],"parameters":[],"objectGroups":[]}],"eventsBasedBehaviors":[{"description":"Control camera rotations with a mouse.","fullName":"First person camera mouse mapper","name":"FirstPersonPointerMapper","objectType":"","eventsFunctions":[{"fullName":"","functionType":"Action","name":"doStepPreEvents","sentence":"","events":[{"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"TODO It's probably a bad idea to rotate the object around Y."},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"MousePointerLock::isPointerLocked"},"parameters":["",""]}],"actions":[{"type":{"value":"SetAngle"},"parameters":["Object","+","MousePointerLock::MovementX() * HorizontalSpeed / SceneWindowWidth()"]},{"type":{"value":"Scene3D::Base3DBehavior::SetRotationY"},"parameters":["Object","Object3D","+","MousePointerLock::MovementY() * VerticalSpeed / SceneWindowHeight()"]},{"type":{"value":"Scene3D::Base3DBehavior::SetRotationY"},"parameters":["Object","Object3D","=","clamp(Object.Object3D::RotationY(), VerticalAngleMin, VerticalAngleMax)"]},{"type":{"value":"MousePointerLock::FirstPersonPointerMapper::LookFromObjectEyes"},"parameters":["Object","Behavior",""]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"MouseButtonReleased"},"parameters":["","Left"]},{"type":{"value":"MousePointerLock::FirstPersonPointerMapper::PropertyShouldLock"},"parameters":["Object","Behavior"]},{"type":{"inverted":true,"value":"MousePointerLock::isPointerLocked"},"parameters":["",""]}],"actions":[{"type":{"value":"MousePointerLock::RequestPointerLock"},"parameters":["",""]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"MousePointerLock::FirstPersonPointerMapper","type":"behavior"}],"objectGroups":[]},{"description":"Move the camera to look though _PARAM1_ eyes. The object must look to the right when all its angles are 0 and the top of its head be toward Z+.","fullName":"Look through object eyes","functionType":"Action","group":"Layers and cameras","name":"LookFromObjectEyes","private":true,"sentence":"Move the camera to look though _PARAM0_ eyes","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"CentreCamera"},"parameters":["","Object","","Object.Layer()",""]},{"type":{"value":"Scene3D::SetCameraZ"},"parameters":["","=","Object.Object3D::Z() + Object.Object3D::Depth() + OffsetZ","",""]},{"type":{"value":"Scene3D::SetCameraRotationX"},"parameters":["","=","- Object.Object3D::RotationY() + 90","GetArgumentAsString(\"Layer\")",""]},{"type":{"value":"Scene3D::SetCameraRotationY"},"parameters":["","=","Object.Object3D::RotationX()","GetArgumentAsString(\"Layer\")",""]},{"type":{"value":"SetCameraAngle"},"parameters":["","=","Object.Angle() + 90","Object.Layer()",""]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"MousePointerLock::FirstPersonPointerMapper","type":"behavior"}],"objectGroups":[]},{"description":"the horizontal rotation speed factor of the object.","fullName":"Horizontal rotation speed factor","functionType":"ExpressionAndCondition","group":"First person camera mouse mapper configuration","name":"HorizontalSpeed","sentence":"the horizontal rotation speed factor","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["HorizontalSpeed"]}]}],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"MousePointerLock::FirstPersonPointerMapper","type":"behavior"}],"objectGroups":[]},{"fullName":"","functionType":"ActionWithOperator","getterName":"HorizontalSpeed","name":"SetHorizontalSpeed","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"MousePointerLock::FirstPersonPointerMapper::SetPropertyHorizontalSpeed"},"parameters":["Object","Behavior","=","Value"]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"MousePointerLock::FirstPersonPointerMapper","type":"behavior"}],"objectGroups":[]},{"description":"the vertical rotation speed factor of the object.","fullName":"Vertical rotation speed factor","functionType":"ExpressionAndCondition","group":"First person camera mouse mapper configuration","name":"VerticalSpeed","sentence":"the vertical rotation speed factor","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["VerticalSpeed"]}]}],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"MousePointerLock::FirstPersonPointerMapper","type":"behavior"}],"objectGroups":[]},{"fullName":"","functionType":"ActionWithOperator","getterName":"VerticalSpeed","name":"SetVerticalSpeed","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"MousePointerLock::FirstPersonPointerMapper::SetPropertyVerticalSpeed"},"parameters":["Object","Behavior","=","Value"]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"MousePointerLock::FirstPersonPointerMapper","type":"behavior"}],"objectGroups":[]},{"description":"the minimum vertical camera angle of the object.","fullName":"Minimum vertical camera angle","functionType":"ExpressionAndCondition","group":"First person camera mouse mapper configuration","name":"VerticalAngleMin","sentence":"the minimum vertical camera angle","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["VerticalAngleMin"]}]}],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"MousePointerLock::FirstPersonPointerMapper","type":"behavior"}],"objectGroups":[]},{"fullName":"","functionType":"ActionWithOperator","getterName":"VerticalAngleMin","name":"SetVerticalAngleMin","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"MousePointerLock::FirstPersonPointerMapper::SetPropertyVerticalAngleMin"},"parameters":["Object","Behavior","=","Value"]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"MousePointerLock::FirstPersonPointerMapper","type":"behavior"}],"objectGroups":[]},{"description":"the maximum vertical camera angle of the object.","fullName":"Maximum vertical camera angle","functionType":"ExpressionAndCondition","group":"First person camera mouse mapper configuration","name":"VerticalAngleMax","sentence":"the maximum vertical camera angle","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["VerticalAngleMax"]}]}],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"MousePointerLock::FirstPersonPointerMapper","type":"behavior"}],"objectGroups":[]},{"fullName":"","functionType":"ActionWithOperator","getterName":"VerticalAngleMax","name":"SetVerticalAngleMax","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"MousePointerLock::FirstPersonPointerMapper::SetPropertyVerticalAngleMax"},"parameters":["Object","Behavior","=","Value"]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"MousePointerLock::FirstPersonPointerMapper","type":"behavior"}],"objectGroups":[]},{"description":"the z position offset of the object.","fullName":"Z position offset","functionType":"ExpressionAndCondition","group":"First person camera mouse mapper configuration","name":"OffsetZ","sentence":"the z position offset","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["OffsetZ"]}]}],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"MousePointerLock::FirstPersonPointerMapper","type":"behavior"}],"objectGroups":[]},{"fullName":"","functionType":"ActionWithOperator","getterName":"OffsetZ","name":"SetOffsetZ","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"MousePointerLock::FirstPersonPointerMapper::SetPropertyOffsetZ"},"parameters":["Object","Behavior","=","Value"]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"MousePointerLock::FirstPersonPointerMapper","type":"behavior"}],"objectGroups":[]}],"propertyDescriptors":[{"value":"","type":"Behavior","label":"3D capability","description":"","group":"","extraInformation":["Scene3D::Base3DBehavior"],"name":"Object3D"},{"value":"200","type":"Number","unit":"Dimensionless","label":"Horizontal rotation speed factor","description":"","group":"","extraInformation":[],"name":"HorizontalSpeed"},{"value":"100","type":"Number","unit":"Dimensionless","label":"Vertical rotation speed factor","description":"","group":"","extraInformation":[],"name":"VerticalSpeed"},{"value":"-90","type":"Number","unit":"DegreeAngle","label":"Minimum vertical camera angle","description":"","group":"","extraInformation":[],"name":"VerticalAngleMin"},{"value":"90","type":"Number","unit":"DegreeAngle","label":"Maximum vertical camera angle","description":"","group":"","extraInformation":[],"name":"VerticalAngleMax"},{"value":"0","type":"Number","unit":"Pixel","label":"Z position offset","description":"","group":"","extraInformation":[],"name":"OffsetZ"},{"value":"true","type":"Boolean","label":"Lock the pointer on click","description":"","group":"","extraInformation":[],"name":"ShouldLock"}],"sharedPropertyDescriptors":[]}],"eventsBasedObjects":[]},{"author":"add_, @Jurfix","category":"Advanced","extensionNamespace":"","fullName":"Extended math support","gdevelopVersion":"","helpPath":"","iconUrl":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0ibWRpLWZ1bmN0aW9uLXZhcmlhbnQiIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTIuNDIsNS4yOUMxMS4zMiw1LjE5IDEwLjM1LDYgMTAuMjUsNy4xMUwxMCwxMEgxMi44MlYxMkg5LjgyTDkuMzgsMTcuMDdDOS4xOCwxOS4yNyA3LjI0LDIwLjkgNS4wNCwyMC43QzMuNzksMjAuNTkgMi42NiwxOS45IDIsMTguODNMMy41LDE3LjMzQzMuODMsMTguMzggNC45NiwxOC45NyA2LDE4LjYzQzYuNzgsMTguMzkgNy4zMywxNy43IDcuNCwxNi44OUw3LjgyLDEySDQuODJWMTBIOEw4LjI3LDYuOTNDOC40Niw0LjczIDEwLjM5LDMuMSAxMi42LDMuMjhDMTMuODYsMy4zOSAxNSw0LjA5IDE1LjY2LDUuMTdMMTQuMTYsNi42N0MxMy45MSw1LjkgMTMuMjMsNS4zNiAxMi40Miw1LjI5TTIyLDEzLjY1TDIwLjU5LDEyLjI0TDE3Ljc2LDE1LjA3TDE0LjkzLDEyLjI0TDEzLjUsMTMuNjVMMTYuMzUsMTYuNUwxMy41LDE5LjMxTDE0LjkzLDIwLjcyTDE3Ljc2LDE3Ljg5TDIwLjU5LDIwLjcyTDIyLDE5LjMxTDE5LjE3LDE2LjVMMjIsMTMuNjVaIiAvPjwvc3ZnPg==","name":"ExtendedMath","previewIconUrl":"https://resources.gdevelop-app.com/assets/Icons/function-variant.svg","shortDescription":"Additional math functions and constants as expressions and conditions.","version":"1.1.1","description":["Expressions:"," - Mathematical constants"," - Greatest common factor/Lowest common multiple"," - Factorial"," - Coordinates conversion for polar and isometric systems"," - ToFixedString: Formats a number into a string with the specified number of decimal places"," - ToFixed: (Deprecated) Formats a number to use the specified number of decimal places","","Conditions:","- IsEven: Check if the number is even (divisible by 2)","","Release Notes:","","Version 1.0.7","- Added ToFixedString()","- Deprecated ToFixed() because it does not show any trailing zeros for whole numbers. Prefer using ToFixedString() to set values in text objects.",""],"origin":{"identifier":"ExtendedMath","name":"gdevelop-extension-store"},"tags":["math","constants","conversion","coordinates","convert","format","modulus"],"authorIds":["AlZ3D1xkH0QDao7T37VZZUeYNpn1","dt0tRnf2kHWJnjkrpnzTzNj9Yc63"],"dependencies":[],"globalVariables":[],"sceneVariables":[],"eventsFunctions":[{"description":"Returns a term from the Fibonacci sequence.","fullName":"Fibonacci numbers","functionType":"Expression","name":"Fibonacci","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["function fibonacci(n) {","    let initial = 0;","    let final = 1;","    let sum = 0;","","    let i = 0;","    for(i = 2; i <= n; i++) {","        sum = initial + final;","","        initial = final;","        final = sum;","    }","    return n ? final : initial;","}","","const n = eventsFunctionContext.getArgument(\"n\");","","eventsFunctionContext.returnValue = fibonacci(n);"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[{"description":"The desired term in the sequence","name":"n","type":"expression"}],"objectGroups":[]},{"description":"Calculates the steepness of a line between two points.","fullName":"Slope","functionType":"Expression","name":"Slope","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const x1 = eventsFunctionContext.getArgument(\"x1\");\r","const y1 = eventsFunctionContext.getArgument(\"y1\");\r","const x2 = eventsFunctionContext.getArgument(\"x2\");\r","const y2 = eventsFunctionContext.getArgument(\"y2\");\r","\r","eventsFunctionContext.returnValue = (y2 - y1) / (x2 - x1);"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[{"description":"X value of the first point","name":"x1","type":"expression"},{"description":"Y value of the first point","name":"y1","type":"expression"},{"description":"X value of the second point","name":"x2","type":"expression"},{"description":"Y value of the second point","name":"y2","type":"expression"}],"objectGroups":[]},{"description":"Converts a number of one range e.g. 0-1 to another 0-255.","fullName":"Map","functionType":"Expression","name":"Map","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const n = eventsFunctionContext.getArgument(\"n\");","const min1 = eventsFunctionContext.getArgument(\"min1\");","const max1 = eventsFunctionContext.getArgument(\"max1\");","const min2 = eventsFunctionContext.getArgument(\"min2\");","const max2 = eventsFunctionContext.getArgument(\"max2\");","","eventsFunctionContext.returnValue = (n - min1) * (max2 - min2) / (max1 - min1) + min2;"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[{"description":"The value to convert","name":"n","type":"expression"},{"description":"The lowest value of the first range","name":"min1","type":"expression"},{"description":"The highest value of the first range","name":"max1","type":"expression"},{"description":"The lowest value of the second range","name":"min2","type":"expression"},{"description":"The highest value of the second range","name":"max2","type":"expression"}],"objectGroups":[]},{"description":"Returns the value of the length of the hypotenuse.","fullName":"Hypotenuse length","functionType":"Expression","name":"Hypot","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const a = eventsFunctionContext.getArgument(\"a\");\r","const b = eventsFunctionContext.getArgument(\"b\");\r","\r","eventsFunctionContext.returnValue = Math.sqrt(Math.pow(a, 2) + Math.pow(b, 2));"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[{"description":"First side of the triangle","name":"a","type":"expression"},{"description":"Second side of the triangle","name":"b","type":"expression"}],"objectGroups":[]},{"description":"Returns the greatest common factor of two numbers.","fullName":"Greatest common factor (gcf)","functionType":"Expression","name":"Gcf","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["//uses Euclid's algorithm","function gcf(a, b) {","    while (a != b) {","        if (a > b) {","            a = a - b;","        } else {","            b = b - a;","        }","    }","    return a;","}","","const a = eventsFunctionContext.getArgument(\"a\");","const b = eventsFunctionContext.getArgument(\"b\");","","if (Number.isInteger(a) === false || Number.isInteger(b) === false) {","    eventsFunctionContext.returnValue = 0;","} ","else if (a === 0) {","    eventsFunctionContext.returnValue = b;","} ","else if (b === 0) {","    eventsFunctionContext.returnValue = a;","} else {","    eventsFunctionContext.returnValue = gcf(a, b);","}"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[{"description":"Any integer","name":"a","type":"expression"},{"description":"Any integer","name":"b","type":"expression"}],"objectGroups":[]},{"description":"Returns the lowest common multiple of two numbers.","fullName":"Lowest common multiple (lcm)","functionType":"Expression","name":"Lcm","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["function gcf(a, b) {\r","    while (a != b) {\r","        if (a > b) {\r","            a = a - b;\r","        } else {\r","            b = b - a;\r","        }\r","    }\r","    return a;\r","}\r","\r","function lcm(a, b) {\r","    return Math.abs(a * b) / gcf(a, b);\r","}\r","\r","const a = eventsFunctionContext.getArgument(\"a\");\r","const b = eventsFunctionContext.getArgument(\"b\");\r","\r","if (Number.isInteger(a) === false || Number.isInteger(b) === false) {\r","    eventsFunctionContext.returnValue = 0;\r","} \r","else if (a === 0) {\r","    eventsFunctionContext.returnValue = b;\r","} \r","else if (b === 0) {\r","    eventsFunctionContext.returnValue = a;\r","} else {\r","    eventsFunctionContext.returnValue = lcm(a, b);\r","}"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[{"description":"Any integer","name":"a","type":"expression"},{"description":"Any integer","name":"b","type":"expression"}],"objectGroups":[]},{"description":"Returns the input multiplied by all the previous whole numbers.","fullName":"Factorial","functionType":"Expression","name":"Factorial","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["function factorial(n) {\r","    let result = 1;\r","\r","    let i = 1;\r","    for (i = 1; i <= n; i++) {\r","        result *= i;\r","    }\r","\r","    return result;\r","}\r","\r","const n = eventsFunctionContext.getArgument(\"n\");\r","\r","eventsFunctionContext.returnValue = factorial(n);"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[{"description":"Any positive integer","name":"n","type":"expression"}],"objectGroups":[]},{"description":"Converts a polar coordinate into the Cartesian x value.","fullName":"Polar coordinate to Cartesian X value","functionType":"Expression","name":"PolarToCartesianX","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const r = eventsFunctionContext.getArgument(\"r\");","const theta = eventsFunctionContext.getArgument(\"theta\");","","eventsFunctionContext.returnValue = r * Math.cos(theta);"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[{"description":"Radius","name":"r","type":"expression"},{"description":"Angle or theta in radians","name":"theta","type":"expression"}],"objectGroups":[]},{"description":"Converts a polar coordinate into the Cartesian y value.","fullName":"Polar coordinate to Cartesian Y value","functionType":"Expression","name":"PolarToCartesianY","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const r = eventsFunctionContext.getArgument(\"r\");","const theta = eventsFunctionContext.getArgument(\"theta\");","","eventsFunctionContext.returnValue = r * Math.sin(theta);"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[{"description":"Radius ","name":"r","type":"expression"},{"description":"Angle or theta in radians","name":"theta","type":"expression"}],"objectGroups":[]},{"description":"Converts a isometric coordinate into the Cartesian x value.","fullName":"Isometric coordinate to Cartesian X value","functionType":"Expression","name":"IsoToCartesianX","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const x = eventsFunctionContext.getArgument(\"x\");","const y = eventsFunctionContext.getArgument(\"y\");","","eventsFunctionContext.returnValue = (2 * y + x) * 0.5;"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[{"description":"Position on the x axis","name":"x","type":"expression"},{"description":"Position on the y axis","name":"y","type":"expression"}],"objectGroups":[]},{"description":"Converts a isometric coordinate into the Cartesian y value.","fullName":"Isometric coordinate to Cartesian Y value","functionType":"Expression","name":"IisoToCartesianY","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const x = eventsFunctionContext.getArgument(\"x\");","const y = eventsFunctionContext.getArgument(\"y\");","","eventsFunctionContext.returnValue = (2 * y - x) * 0.5;"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[{"description":"Position on the x axis","name":"x","type":"expression"},{"description":"Position on the y axis","name":"y","type":"expression"}],"objectGroups":[]},{"description":"Returns the golden ratio.","fullName":"Golden ratio","functionType":"Expression","name":"GoldenRatio","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["1.618033988749894"]}]}],"expressionType":{"type":"expression"},"parameters":[],"objectGroups":[]},{"description":"Returns Pi (π).","fullName":"Pi (π)","functionType":"Expression","name":"Pi","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":"eventsFunctionContext.returnValue = Math.PI;","parameterObjects":"","useStrict":true,"eventsSheetExpanded":false},{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[]}],"expressionType":{"type":"expression"},"parameters":[],"objectGroups":[]},{"description":"Returns half Pi.","fullName":"Half Pi","functionType":"Expression","name":"HalfPi","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":"eventsFunctionContext.returnValue = Math.PI / 2;","parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[],"objectGroups":[]},{"description":"Returns the natural logarithm of e. (Euler's number).","fullName":"Natural logarithm of e","functionType":"Expression","name":"E","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":"eventsFunctionContext.returnValue = Math.E;","parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[],"objectGroups":[]},{"description":"Returns the natural logarithm of 2.","fullName":"Natural logarithm of 2","functionType":"Expression","name":"Ln2","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":"eventsFunctionContext.returnValue = Math.LN2;","parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[],"objectGroups":[]},{"description":"Returns the natural logarithm of 10.","fullName":"Natural logarithm of 10","functionType":"Expression","name":"Ln10","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":"eventsFunctionContext.returnValue = Math.LN10;","parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[],"objectGroups":[]},{"description":"Returns the base 2 logarithm of e. (Euler's number).","fullName":"Base 2 logarithm of e","functionType":"Expression","name":"Log2e","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":"eventsFunctionContext.returnValue = Math.LOG10E;","parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[],"objectGroups":[]},{"description":"Returns the base 10 logarithm of e. (Euler's number).","fullName":"Base 10 logarithm of e","functionType":"Expression","name":"Log10e","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":"eventsFunctionContext.returnValue = Math.LOG10E;","parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[],"objectGroups":[]},{"description":"Returns square root of 2.","fullName":"Square root of 2","functionType":"Expression","name":"Sqrt2","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":"eventsFunctionContext.returnValue = Math.SQRT2;","parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[],"objectGroups":[]},{"description":"Returns square root of 1/2.","fullName":"Square root of 1/2","functionType":"Expression","name":"Sqrt1_2","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":"eventsFunctionContext.returnValue = Math.SQRT1_2;","parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[],"objectGroups":[]},{"description":"Returns quarter Pi.","fullName":"Quarter Pi","functionType":"Expression","name":"QuarterPi","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":"eventsFunctionContext.returnValue = Math.PI / 4;","parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[],"objectGroups":[]},{"description":"Formats a number to use the specified number of decimal places (Deprecated).","fullName":"ToFixed","functionType":"Expression","name":"ToFixed","private":true,"sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[]},{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const valueToBeRounded = eventsFunctionContext.getArgument(\"ValueToBeRounded\");","const numberOfDecimalPlaces = eventsFunctionContext.getArgument(\"NumberOfDecimalPlaces\");","eventsFunctionContext.returnValue = Number(valueToBeRounded.toFixed(numberOfDecimalPlaces));"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[{"description":"The value to be rounded","name":"ValueToBeRounded","type":"expression"},{"description":"Number of decimal places","name":"NumberOfDecimalPlaces","type":"expression"}],"objectGroups":[]},{"description":"Formats a number to a string with the specified number of decimal places.","fullName":"ToFixed","functionType":"StringExpression","name":"ToFixedString","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[]},{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const valueToBeRounded = eventsFunctionContext.getArgument(\"ValueToBeRounded\");","const numberOfDecimalPlaces = eventsFunctionContext.getArgument(\"NumberOfDecimalPlaces\");","eventsFunctionContext.returnValue = valueToBeRounded.toFixed(numberOfDecimalPlaces);"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"string"},"parameters":[{"description":"The value to be rounded","name":"ValueToBeRounded","type":"expression"},{"description":"Number of decimal places","name":"NumberOfDecimalPlaces","type":"expression"}],"objectGroups":[]},{"description":"Check if the number is even (divisible by 2).  To check for odd numbers, invert this condition.","fullName":"Is even?","functionType":"Condition","name":"IsEven","sentence":"_PARAM1_ is even","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"Egal"},"parameters":["mod(Value,2)","=","0"]}],"actions":[{"type":{"value":"SetReturnBoolean"},"parameters":["True"]}]}],"parameters":[{"description":"Value","name":"Value","type":"expression"}],"objectGroups":[]}],"eventsBasedBehaviors":[],"eventsBasedObjects":[]},{"author":"","category":"General","extensionNamespace":"","fullName":"3D collision","gdevelopVersion":"","helpPath":"","iconUrl":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0ibWRpLXZlY3Rvci1pbnRlcnNlY3Rpb24iIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMy4xNCwxQTIuMTQsMi4xNCAwIDAsMCAxLDMuMTRWNUgzVjNINVYxSDMuMTRNNywxVjNIMTBWMUg3TTEyLDFWM0gxNFY1SDE2VjMuMTRDMTYsMS45NiAxNS4wNCwxIDEzLjg2LDFIMTJNMSw3VjEwSDNWN0gxTTksN0M3Ljg5LDcgNyw3Ljg5IDcsOUM3LDExLjMzIDcsMTYgNywxNkM3LDE2IDExLjU3LDE2IDEzLjg2LDE2QTIuMTQsMi4xNCAwIDAsMCAxNiwxMy44NkMxNiwxMS41NyAxNiw3IDE2LDdDMTYsNyAxMS4zMyw3IDksN00xOCw3VjlIMjBWMTFIMjJWOUMyMiw3Ljg5IDIxLjExLDcgMjAsN0gxOE05LDlIMTRWMTRIOVY5TTEsMTJWMTMuODZDMSwxNS4wNCAxLjk2LDE2IDMuMTQsMTZINVYxNEgzVjEySDFNMjAsMTNWMTZIMjJWMTNIMjBNNywxOFYyMEM3LDIxLjExIDcuODksMjIgOSwyMkgxMVYyMEg5VjE4SDdNMjAsMThWMjBIMThWMjJIMjBDMjEuMTEsMjIgMjIsMjEuMTEgMjIsMjBWMThIMjBNMTMsMjBWMjJIMTZWMjBIMTNaIiAvPjwvc3ZnPg==","name":"Collision3D","previewIconUrl":"https://asset-resources.gdevelop.io/public-resources/Icons/7a5696a515bf40813692e118147568392a854f65f5b50750c9b9aaa967aba7df_vector-intersection.svg","shortDescription":"Check collision and distance between 3D objects.","version":"0.2.0","description":"Check collision and distance between 3D objects and separate them from each other.","origin":{"identifier":"Collision3D","name":"gdevelop-extension-store"},"tags":["3d","collision"],"authorIds":["IWykYNRvhCZBN3vEgKEbBPOR3Oc2","PEzPAaWHgYgk5UwIPppsL6f2ugp2"],"dependencies":[],"globalVariables":[],"sceneVariables":[],"eventsFunctions":[{"description":"Define helper classes JavaScript code.","fullName":"Define helper classes","functionType":"Action","name":"DefineHelperClasses","private":true,"sentence":"Define helper classes JavaScript code","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["if (gdjs._collision3DExtension) {","    return;","}","","/**"," * @param {gdjs.RuntimeObject} object"," * @param {boolean} shouldUseCustomCenter"," * @return {number}"," */","const getCenterX = (object, shouldUseCustomCenter) =>","    shouldUseCustomCenter ?","        object.getCenterXInScene() :","        object.getDrawableX() + object.getWidth() / 2","","/**"," * @param {gdjs.RuntimeObject} object"," * @param {boolean} shouldUseCustomCenter"," * @return {number}"," */","const getCenterY = (object, shouldUseCustomCenter) =>","    shouldUseCustomCenter ?","        object.getCenterYInScene() :","        object.getDrawableY() + object.getHeight() / 2","","/**"," * @param {gdjs.RuntimeObject3D} object"," * @param {boolean} shouldUseCustomCenter"," * @return {number}"," */","const getCenterZ = (object, shouldUseCustomCenter) =>","    !object.getCenterZInScene ? 0 :","    shouldUseCustomCenter ?","        object.getCenterZInScene() :","        object.getDrawableZ() + object.getDepth() / 2","","/**"," * @param {gdjs.RuntimeObject} object"," * @param {float} x"," * @param {float} y"," * @param {float} z"," * @param {boolean} shouldUseCustomCenter"," * @return {number}"," */","const getSqDistanceToPosition = (object, x, y, z, shouldUseCustomCenter = true) => {","    const deltaX = getCenterX(object, shouldUseCustomCenter) - x;","    const deltaY = getCenterY(object, shouldUseCustomCenter) - y;","    const deltaZ = getCenterZ(object, shouldUseCustomCenter) - z;","    return deltaX * deltaX + deltaY * deltaY + deltaZ * deltaZ;","};","","/**"," * @param {gdjs.RuntimeObject} object"," * @param {float} x"," * @param {float} y"," * @param {float} z"," * @return {number}"," */","const getDistanceToPosition = (object, x, y, z) => Math.sqrt(getSqDistanceToPosition(object, x, y, z));","","/**"," * @param {gdjs.RuntimeObject} object"," * @param {gdjs.RuntimeObject} otherObject"," * @param {boolean} shouldUseCustomCenter"," * @return {number}"," */","const getSqDistanceToObject = (object, otherObject, shouldUseCustomCenter = true) => {","    return getSqDistanceToPosition(","        object,","        getCenterX(otherObject, shouldUseCustomCenter),","        getCenterY(otherObject, shouldUseCustomCenter),","        getCenterZ(otherObject, shouldUseCustomCenter)","    );","};","","/**"," * @param {gdjs.RuntimeObject} object"," * @param {gdjs.RuntimeObject} otherObject"," * @return {number}"," */","const getDistanceToObject = (object, otherObject) => Math.sqrt(getSqDistanceToObject(object, otherObject));","","/**"," * @param {gdjs.RuntimeObject} object"," * @param {gdjs.RuntimeObject} otherObject"," * @param {{distanceSq: number, shouldUseCustomCenter: boolean}} distanceSettings"," * @return {boolean}"," */","const areObjectsWithinDistance = (object, otherObject, distanceSettings) => {","    return getSqDistanceToObject(","        object, otherObject, distanceSettings.shouldUseCustomCenter) <= distanceSettings.distanceSq;","};","","const distanceSettings = {distanceSq: 0, shouldUseCustomCenter: true};","","/**"," * @param {Hashtable<gdjs.RuntimeObject[]>} objectsLists1"," * @param {Hashtable<gdjs.RuntimeObject[]>} objectsLists2"," * @param {number} distance"," * @param {boolean} shouldUseCustomCenter"," * @param {boolean} inverted"," * @return {boolean}"," */","const pickObjectsWithinDistance = (objectsLists1, objectsLists2, distance, shouldUseCustomCenter, inverted) => {","    distanceSettings.distanceSq = distance * distance;","    distanceSettings.shouldUseCustomCenter = shouldUseCustomCenter;","    return gdjs.evtTools.object.twoListsTest(","        areObjectsWithinDistance,","        objectsLists1,","        objectsLists2,","        inverted,","        distanceSettings","    );","}","","/**"," * @param {Hashtable<gdjs.RuntimeObject[]>} objectsLists"," * @param {number} x"," * @param {number} y"," * @param {number} z"," * @param {boolean} inverted"," * @return {boolean}"," */","const pickNearestObject = function (objectsLists, x, y, z, inverted) {","    let bestObject = null;","    let best = 0;","    let first = true;","    const lists = gdjs.staticArray(gdjs._collision3DExtension.pickNearestObject);","    objectsLists.values(lists);","    for (let i = 0, len = lists.length; i < len; ++i) {","        const list = lists[i];","        for (let j = 0; j < list.length; ++j) {","            const object = list[j];","            const distance = getSqDistanceToPosition(object, x, y, z);","            // @ts-ignore","            if (first || (distance < best) ^ inverted) {","                best = distance;","                bestObject = object;","            }","            first = false;","        }","    }","    if (bestObject) {","        gdjs.evtTools.object.pickOnly(objectsLists, bestObject);","    }","    return !!bestObject;","}","","/**"," * @param {gdjs.RuntimeObject} object"," * @return {float}"," */","const getObjectMinZ = (object) =>","    object.getDrawableZ ? object.getDrawableZ() : 0","","/**"," * @param {gdjs.RuntimeObject} object"," * @return {float}"," */","const getObjectMaxZ = (object) =>","    object.getDrawableZ ? object.getDrawableZ() + object.getDepth() : 0;","","/**"," * @param {gdjs.RuntimeObject} object1"," * @param {gdjs.RuntimeObject} object2"," * @param {boolean} ignoreTouchingEdges If true, then edges that are touching each other, without the hitbox polygons actually overlapping, won't be considered in collision."," * @return {boolean}"," */","const areObjectsInCollision = (","    object1,","    object2,","    ignoreTouchingEdges,",") => {","    const object1MinZ = getObjectMinZ(object1);","    const object1MaxZ = getObjectMaxZ(object1);","    const object2MinZ = getObjectMinZ(object2);","    const object2MaxZ = getObjectMaxZ(object2);","","    const canObjectsOverlapOnZ = ignoreTouchingEdges ?","        (object1MinZ < object2MaxZ && object1MaxZ > object2MinZ) :","        (object1MinZ <= object2MaxZ && object1MaxZ >= object2MinZ);","","    return canObjectsOverlapOnZ &&","        gdjs.RuntimeObject.collisionTest(","            object1,","            object2,","            ignoreTouchingEdges","        );","}","","/**"," * @param {Hashtable<gdjs.RuntimeObject[]>} objectsLists1"," * @param {Hashtable<gdjs.RuntimeObject[]>} objectsLists2"," * @param {boolean} inverted"," * @return {boolean}"," */","const pickObjectsInCollision = (","    objectsLists1,","    objectsLists2,","    inverted,",") => {","    return gdjs.evtTools.object.twoListsTest(","        areObjectsInCollision,","        objectsLists1,","        objectsLists2,","        inverted,","        false","    );","}","","/**"," * @param {gdjs.RuntimeObject} movingObject"," * @param {gdjs.RuntimeObject} object"," * @return {float}"," */","const getSeparationDeltaZ = (","    movingObject,","    object,",") => {","    const movingObjectMinZ = getObjectMinZ(movingObject);","    const movingObjectMaxZ = getObjectMaxZ(movingObject);","    const objectMinZ = getObjectMinZ(object);","    const objectMaxZ = getObjectMaxZ(object);","","    const downwardDeltaZ = Math.min(0, objectMinZ - movingObjectMaxZ);","    const upwardDeltaZ = Math.max(0, objectMaxZ - movingObjectMinZ);","","    return -downwardDeltaZ < upwardDeltaZ ? downwardDeltaZ : upwardDeltaZ","}","","// This function is an exact copy from GDJS/Runtime/runtimeobject.ts","/**"," * Move the object using the results from collisionTest call."," * This moves the object according to the direction of the longest vector,"," * and projects the others on the orthogonal vector."," *"," * See {@link RuntimeObject.separateFromObjects}"," *"," * @param {gdjs.RuntimeObject} object The object to move."," * @param {float[]} moveXArray The X coordinates of the vectors to move the object."," * @param {float[]} moveYArray The Y coordinates of the vectors to move the object."," * @return {boolean} true if the object was moved."," */","const moveFollowingSeparatingVectors = (","    object,","    moveXArray,","    moveYArray",") => {","    if (moveXArray.length === 0) {","        moveXArray.length = 0;","        moveYArray.length = 0;","        return false;","    }","    if (moveXArray.length === 1) {","        // Move according to the results returned by the collision algorithm.","        object.setPosition(","            object.getX() + moveXArray[0],","            object.getY() + moveYArray[0]","        );","        moveXArray.length = 0;","        moveYArray.length = 0;","        return true;","    }","","    // Find the longest vector","    let squaredDistanceMax = 0;","    let distanceMaxIndex = 0;","    for (let index = 0; index < moveXArray.length; index++) {","        const moveX = moveXArray[index];","        const moveY = moveYArray[index];","","        const squaredDistance = moveX * moveX + moveY * moveY;","        if (squaredDistance > squaredDistanceMax) {","            squaredDistanceMax = squaredDistance;","            distanceMaxIndex = index;","        }","    }","","    const distanceMax = Math.sqrt(squaredDistanceMax);","    // unit vector of the longest vector","    const uX = moveXArray[distanceMaxIndex] / distanceMax;","    const uY = moveYArray[distanceMaxIndex] / distanceMax;","","    // normal vector of the longest vector","    const vX = -uY;","    const vY = uX;","","    // Project other vectors on the normal","    let scalarProductMin = 0;","    let scalarProductMax = 0;","    for (let index = 0; index < moveXArray.length; index++) {","        const moveX = moveXArray[index];","        const moveY = moveYArray[index];","","        const scalarProduct = moveX * vX + moveY * vY;","        scalarProductMin = Math.min(scalarProductMin, scalarProduct);","        scalarProductMax = Math.max(scalarProductMax, scalarProduct);","    }","","    // Apply the longest vector","    let deltaX = moveXArray[distanceMaxIndex];","    let deltaY = moveYArray[distanceMaxIndex];","","    // Apply the longest projected vector if they all are in the same direction","    // Some projections could have rounding errors,","    // they are considered negligible under a 1 for 1,000,000 ratio.","    const scalarProductMinIsNegligible =","        -scalarProductMin < scalarProductMax / 1048576;","    const scalarProductMaxIsNegligible =","        scalarProductMax < -scalarProductMin / 1048576;","    if (scalarProductMinIsNegligible !== scalarProductMaxIsNegligible) {","        if (scalarProductMaxIsNegligible) {","            deltaX += scalarProductMin * vX;","            deltaY += scalarProductMin * vY;","        } else {","            deltaX += scalarProductMax * vX;","            deltaY += scalarProductMax * vY;","        }","    }","    object.setPosition(object.getX() + deltaX, object.getY() + deltaY);","    moveXArray.length = 0;","    moveYArray.length = 0;","    return true;","};","","/**"," * Arrays and data structure that are (re)used by"," * {@link separateFromObjects} to avoid any allocation."," * @type {{moveXArray: float[], moveYArray: float[], moveZArray: float[]}}"," */","const separateFromObjectsStatics = {","    moveXArray: [],","    moveYArray: [],","    moveZArray: [],","};","","/**"," * Separate the object from others objects, using their hitboxes."," * @param {gdjs.RuntimeObject} object The object that moves."," * @param {gdjs.RuntimeObject[]} objects The objects that stay still."," * @return {boolean} true if the object was moved"," */","const separateFromObjects = (","    object,","    objects",") => {","    const moveXArray = separateFromObjectsStatics.moveXArray;","    const moveYArray = separateFromObjectsStatics.moveYArray;","    moveXArray.length = 0;","    moveYArray.length = 0;","    let moveZMax = 0;","","    // We can assume that the moving object is not grid based,","    // so there is no need for optimization:","    // getHitBoxes can be called directly.","    const hitBoxes = object.getHitBoxes();","    /** @type {gdjs.AABB | null} */","    let aabb = null;","","    // Check if there is a collision with each object","    for (const otherObject of objects) {","        if (otherObject.id === object.id) {","            continue;","        }","        const moveZ = getSeparationDeltaZ(object, otherObject);","        if (moveZ === 0) {","            continue;","        }","        const moveZSq = moveZ * moveZ;","","        let otherHitBoxesArray = otherObject.getHitBoxes();","        /** @type {Iterable<gdjs.Polygon>} */","        let otherHitBoxes = otherHitBoxesArray;","        if (otherHitBoxesArray.length > 4) {","            // The other object has a lot of hit boxes.","            // Try to reduce the amount of hitboxes to check.","            if (!aabb) {","                aabb = object.getAABB();","            }","            otherHitBoxes = otherObject.getHitBoxesAround(","                aabb.min[0],","                aabb.min[1],","                aabb.max[0],","                aabb.max[1]","            );","        }","        for (const hitBox of hitBoxes) {","            for (const otherHitBox of otherHitBoxes) {","                const result = gdjs.Polygon.collisionTest(","                    hitBox,","                    otherHitBox,","                    true","                );","                if (result.collision) {","                    const moveX = result.move_axis[0];","                    const moveY = result.move_axis[1];","                    if (moveZSq < moveX * moveX + moveY * moveY) {","                        if (Math.abs(moveZ) > Math.abs(moveZMax)) {","                            moveZMax = moveZ;","                        }","                    }","                    else {","                        moveXArray.push(moveX);","                        moveYArray.push(moveY);","                    }","                }","            }","        }","    }","    const hasObjectMovedOnZ = moveZMax !== 0;","    if (hasObjectMovedOnZ) {","        object.setZ(object.getZ() + moveZMax);","    }","    const hasObjectMovedOnXY = moveFollowingSeparatingVectors(object, moveXArray, moveYArray);","    return hasObjectMovedOnXY || hasObjectMovedOnZ;","}","","gdjs._collision3DExtension = {","    getSqDistanceToPosition,","    getDistanceToPosition,","    getSqDistanceToObject,","    getDistanceToObject,","    pickObjectsWithinDistance,","    pickNearestObject,","    pickObjectsInCollision,","    separateFromObjects","}"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"parameters":[],"objectGroups":[]},{"fullName":"","functionType":"Action","name":"onFirstSceneLoaded","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"Collision3D::DefineHelperClasses"},"parameters":["",""]}]}],"parameters":[],"objectGroups":[]},{"description":"Compare the distance between two objects in 3D.","fullName":"Distance between two objects in 3D","functionType":"Condition","group":"Position","name":"AreWithinDistance","sentence":"_PARAM1_ distance to _PARAM2_ is below _PARAM3_ pixels","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["// TODO If condition is inverted, only objects that have a distance greater than specified to any other object will be picked.\r","const inverted = false;\r","\r","eventsFunctionContext.returnValue = gdjs._collision3DExtension.pickObjectsWithinDistance(\r","    eventsFunctionContext.getObjectsLists(\"Object\"),\r","    eventsFunctionContext.getObjectsLists(\"OtherObject\"),\r","    eventsFunctionContext.getArgument(\"Distance\"),\r","    eventsFunctionContext.getArgument(\"ShouldUseCustomCenter\"),\r","    inverted\r",");\r",""],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"description":"Object","name":"Object","type":"objectList"},{"description":"Other object","name":"OtherObject","type":"objectList"},{"description":"Distance","name":"Distance","type":"expression"},{"defaultValue":"yes","description":"Use custom center","name":"ShouldUseCustomCenter","optional":true,"type":"yesorno"}],"objectGroups":[]},{"description":"Distance between two objects in 3D.","fullName":"Distance between two objects in 3D","functionType":"Expression","group":"Position","name":"Distance","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["\r","const otherObjects = eventsFunctionContext.getObjectsLists(\"OtherObject\");\r","\r","if (objects.length > 0 && otherObjects.length > 0) {\r","    eventsFunctionContext.returnValue = gdjs._collision3DExtension.getDistanceToObject(\r","        objects[0],\r","        otherObjects[0]\r","    );\r","}\r",""],"parameterObjects":"Object","useStrict":true,"eventsSheetExpanded":true}],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"objectList"},{"description":"Other object","name":"OtherObject","type":"objectList"}],"objectGroups":[]},{"description":"Square distance between two objects in 3D.","fullName":"Square distance between two objects","functionType":"Expression","group":"Position","name":"SqDistance","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["\r","const otherObjects = eventsFunctionContext.getObjectsLists(\"OtherObject\");\r","\r","if (objects.length > 0 && otherObjects.length > 0) {\r","    eventsFunctionContext.returnValue = gdjs._collision3DExtension.getSqDistanceToObject(\r","        objects[0],\r","        otherObjects[0]\r","    );\r","}\r",""],"parameterObjects":"Object","useStrict":true,"eventsSheetExpanded":true}],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"objectList"},{"description":"Other object","name":"OtherObject","type":"objectList"}],"objectGroups":[]},{"description":"Distance between an object and a position in 3D.","fullName":"Distance between an object and a position","functionType":"Expression","group":"Position","name":"DistanceToPosition","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["\r","if (objects.length > 0) {\r","    eventsFunctionContext.returnValue = gdjs._collision3DExtension.getDistanceToPosition(\r","        objects[0],\r","        eventsFunctionContext.getArgument(\"PositionX\"),\r","        eventsFunctionContext.getArgument(\"PositionY\"),\r","        eventsFunctionContext.getArgument(\"PositionZ\"),\r","    );\r","}\r",""],"parameterObjects":"Object","useStrict":true,"eventsSheetExpanded":true}],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"objectList"},{"description":"X position","name":"PositionX","type":"expression"},{"description":"Y position","name":"PositionY","type":"expression"},{"description":"Z position","name":"PositionZ","type":"expression"}],"objectGroups":[]},{"description":"Square distance between an object and a position in 3D.","fullName":"Square distance between an object and a position","functionType":"Expression","group":"Position","name":"SqDistanceToPosition","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["\r","if (objects.length > 0) {\r","    eventsFunctionContext.returnValue = gdjs._collision3DExtension.getSqDistanceToPosition(\r","        objects[0],\r","        eventsFunctionContext.getArgument(\"PositionX\"),\r","        eventsFunctionContext.getArgument(\"PositionY\"),\r","        eventsFunctionContext.getArgument(\"PositionZ\"),\r","    );\r","}\r",""],"parameterObjects":"Object","useStrict":true,"eventsSheetExpanded":true}],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"objectList"},{"description":"X position","name":"PositionX","type":"expression"},{"description":"Y position","name":"PositionY","type":"expression"},{"description":"Z position","name":"PositionZ","type":"expression"}],"objectGroups":[]},{"description":"Pick the object of this type that is nearest to the specified position in 3D.","fullName":"Pick nearest object in 3D","functionType":"Condition","group":"Objects","name":"PickNearest","sentence":"Pick the _PARAM1_ that is nearest to _PARAM2_ ; _PARAM3_ ; _PARAM4_","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["// TODO If the condition is inverted, the object farthest from the specified position is picked instead.\r","const inverted = false;\r","\r","eventsFunctionContext.returnValue = gdjs._collision3DExtension.pickNearestObject(\r","    eventsFunctionContext.getObjectsLists(\"Object\"),\r","    eventsFunctionContext.getArgument(\"PositionX\"),\r","    eventsFunctionContext.getArgument(\"PositionY\"),\r","    eventsFunctionContext.getArgument(\"PositionZ\"),\r","    inverted\r",");"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"description":"Object","name":"Object","type":"objectList"},{"description":"X position","name":"PositionX","type":"expression"},{"description":"Y position","name":"PositionY","type":"expression"},{"description":"Z position","name":"PositionZ","type":"expression"}],"objectGroups":[]},{"description":"Check the collision between two objects using their collision masks. Object rotation around X and Y axes are ignored.","fullName":"Collision in 3D","functionType":"Condition","group":"Collision","name":"AreInCollision","sentence":"_PARAM1_ is in collision with _PARAM3_","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["// TODO If the condition is inverted, the object farthest from the specified position is picked instead.\r","const inverted = false;\r","\r","eventsFunctionContext.returnValue = gdjs._collision3DExtension.pickObjectsInCollision(\r","    eventsFunctionContext.getObjectsLists(\"Object\"),\r","    eventsFunctionContext.getObjectsLists(\"OtherObject\"),\r","    eventsFunctionContext.getArgument(\"IgnoreEdges\"),\r","    inverted\r",");"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"description":"Object","name":"Object","type":"objectList"},{"description":"3D capability","name":"Object3D","supplementaryInformation":"Scene3D::Base3DBehavior","type":"behavior"},{"description":"Other object","name":"OtherObject","type":"objectList"},{"description":"3D capability","name":"OtherObjectCapability","supplementaryInformation":"Scene3D::Base3DBehavior","type":"behavior"},{"description":"Ignore objects that are touching each other on their edges, but are not overlapping (default: no)","name":"IgnoreEdges","type":"yesorno"}],"objectGroups":[]},{"description":"Move an object away from another using their collision masks. Object rotation around X and Y axes are ignored.\nBe sure to call this action on a reasonable number of objects to avoid slowing down the game.","fullName":"Separate objects in 3D","functionType":"Action","group":"Position","name":"SeparateFromObjects","sentence":"Move _PARAM1_ away from _PARAM3_ (only _PARAM1_ will move)","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["\r","const otherObjects = eventsFunctionContext.getObjects(\"OtherObject\");\r","\r","for (const object of objects) {\r","    gdjs._collision3DExtension.separateFromObjects(\r","        object,\r","        otherObjects,\r","    );\r","}"],"parameterObjects":"Object","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"description":"Object","name":"Object","type":"objectList"},{"description":"3D capability","name":"Object3D","supplementaryInformation":"Scene3D::Base3DBehavior","type":"behavior"},{"description":"Objects (won't move)","name":"OtherObject","type":"objectList"},{"description":"3D capability","name":"OtherObject3D","supplementaryInformation":"Scene3D::Base3DBehavior","type":"behavior"}],"objectGroups":[]}],"eventsBasedBehaviors":[],"eventsBasedObjects":[]},{"author":"","category":"Visual effect","extensionNamespace":"","fullName":"3D object shake","gdevelopVersion":"","helpPath":"","iconUrl":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0ibWRpLXZlY3Rvci1kaWZmZXJlbmNlLWFiIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZD0iTTMsMUMxLjg5LDEgMSwxLjg5IDEsM1Y1SDNWM0g1VjFIM003LDFWM0gxMFYxSDdNMTIsMVYzSDE0VjVIMTZWM0MxNiwxLjg5IDE1LjExLDEgMTQsMUgxMk0xLDdWMTBIM1Y3SDFNMTQsN0MxNCw3IDE0LDExLjY3IDE0LDE0QzExLjY3LDE0IDcsMTQgNywxNEM3LDE0IDcsMTggNywyMEM3LDIxLjExIDcuODksMjIgOSwyMkgyMEMyMS4xMSwyMiAyMiwyMS4xMSAyMiwyMFY5QzIyLDcuODkgMjEuMTEsNyAyMCw3QzE4LDcgMTQsNyAxNCw3TTE2LDlIMjBWMjBIOVYxNkgxNEMxNS4xMSwxNiAxNiwxNS4xMSAxNiwxNFY5TTEsMTJWMTRDMSwxNS4xMSAxLjg5LDE2IDMsMTZINVYxNEgzVjEySDFaIiAvPjwvc3ZnPg==","name":"ShakeObject3D","previewIconUrl":"https://resources.gdevelop-app.com/assets/Icons/vector-difference-ab.svg","shortDescription":"Shake 3D objects.","version":"2.1.0","description":["Shake 3D objects with translation and rotation.","","The 3D racing game example uses this extension ([open the project online](https://editor.gdevelop.io/?project=example://3d-racing-game)).","","Breaking changes from 2.0.0","- The behavior for 3D box has been removed. The other behavior can be used for both models and boxes."],"origin":{"identifier":"ShakeObject3D","name":"gdevelop-extension-store"},"tags":["3d","shaking","effect","shake","translate","rotate"],"authorIds":["IWykYNRvhCZBN3vEgKEbBPOR3Oc2"],"dependencies":[],"globalVariables":[],"sceneVariables":[],"eventsFunctions":[{"fullName":"","functionType":"Action","name":"onFirstSceneLoaded","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"ShakeObject3D::DefineHelperClasses"},"parameters":["",""]}]}],"parameters":[],"objectGroups":[]},{"description":"Define helper classes JavaScript code.","fullName":"Define helper classes","functionType":"Action","name":"DefineHelperClasses","private":true,"sentence":"Define helper classes JavaScript code","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["if (gdjs._shakeObjectExtension) {","    return;","}","","/** Noise generator manager. */","class NoiseManager {","    /**","     * Create the manager of noise generators.","     */","    constructor() {","        this.seed = gdjs.randomInRange(1, Number.MAX_SAFE_INTEGER);","        /** @type {Map<string, NoiseGenerator>} */","        this.generators = new Map();","    }","","    /**","     * @param name {string}","     * @return {NoiseGenerator}","     */","    getGenerator(name) {","        let generator = this.generators.get(name);","        if (!generator) {","            generator = new NoiseGenerator(name + this.seed);","            this.generators.set(name, generator);","        }","        return generator;","    }","","    /**","     * @param seed {number}","     */","    setSeed(seed) {","        this.seed = seed;","        this.generators.forEach(generator => generator.setSeed(name + this.seed));","    }","","    /**","     * @param name {string}","     */","    deleteGenerator(name) {","        this.generators.delete(name);","    }","","    /**","     */","    deleteAllGenerators() {","        this.generators.clear();","    }","}","","/** Noise generator with octaves. */","class NoiseGenerator {","    /**","     * Create a noise generator with a seed.","     * @param seed {string}","     */","    constructor(seed) {","        this.simplexNoise = new SimplexNoise(seed);","        this.frequency = 1;","        this.octaves = 1;","        this.persistence = 0.5;","        this.lacunarity = 2;","        this.xLoopPeriod = 0;","        this.yLoopPeriod = 0;","    }","","    /**","     * @param seed {string}","     */","    setSeed(seed) {","        this.simplexNoise = new SimplexNoise(seed);","    }","","    /**","     * @param x {float}","     * @param y {float}","     * @param z {float} optionnal","     * @param w {float} optionnal","     * @return {float}","     */","    noise(x, y, z, w) {","        if (this.xLoopPeriod && this.yLoopPeriod) {","            const circleRatioX = 2 * Math.PI / this.xLoopPeriod;","            const circleRatioY = 2 * Math.PI / this.yLoopPeriod;","            const angleX = circleRatioX * x;","            const angleY = circleRatioY * y;","            x = Math.cos(angleX) / circleRatioX;","            y = Math.sin(angleX) / circleRatioX;","            z = Math.cos(angleY) / circleRatioY;","            w = Math.sin(angleY) / circleRatioY;","        }","        else if (this.xLoopPeriod) {","            const circleRatio = 2 * Math.PI / this.xLoopPeriod;","            const angleX = circleRatio * x;","            w = z;","            z = y;","            x = Math.cos(angleX) / circleRatio;","            y = Math.sin(angleX) / circleRatio;","        }","        else if (this.yLoopPeriod) {","            const circleRatio = 2 * Math.PI / this.xLoopPeriod;","            const angleX = circleRatio * x;","            w = z;","            // Make the circle perimeter equals to the looping period","            // to keep the same perceived frequency with or without looping.","            y = Math.cos(angleX) / circleRatio;","            z = Math.sin(angleX) / circleRatio;","        }","        let noiseFunction = this.simplexNoise.noise4D.bind(this.simplexNoise);","        if (z === undefined) {","            noiseFunction = this.simplexNoise.noise2D.bind(this.simplexNoise);","        }","        else if (w === undefined) {","            noiseFunction = this.simplexNoise.noise3D.bind(this.simplexNoise);","        }","        let frequency = this.frequency;","        let noiseSum = 0;","        let amplitudeSum = 0;","        let amplitude = 1;","        for (let i = 0; i < this.octaves; i++) {","            noiseSum += noiseFunction(x * frequency, y * frequency, z * frequency, w * frequency) * amplitude;","            amplitudeSum += Math.abs(amplitude);","            amplitude *= this.persistence;","            frequency *= this.lacunarity;","        }","        return noiseSum / amplitudeSum;","    }","}","","/*","A fast javascript implementation of simplex noise by Jonas Wagner","https://github.com/jwagner/simplex-noise.js","","Based on a speed-improved simplex noise algorithm for 2D, 3D and 4D in Java.","Which is based on example code by Stefan Gustavson (stegu@itn.liu.se).","With Optimisations by Peter Eastman (peastman@drizzle.stanford.edu).","Better rank ordering method by Stefan Gustavson in 2012.",""," Copyright (c) 2021 Jonas Wagner",""," Permission is hereby granted, free of charge, to any person obtaining a copy"," of this software and associated documentation files (the \"Software\"), to deal"," in the Software without restriction, including without limitation the rights"," to use, copy, modify, merge, publish, distribute, sublicense, and/or sell"," copies of the Software, and to permit persons to whom the Software is"," furnished to do so, subject to the following conditions:",""," The above copyright notice and this permission notice shall be included in all"," copies or substantial portions of the Software.",""," THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR"," IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,"," FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE"," AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER"," LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,"," OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE"," SOFTWARE."," */","","const F2 = 0.5 * (Math.sqrt(3.0) - 1.0);","const G2 = (3.0 - Math.sqrt(3.0)) / 6.0;","const F3 = 1.0 / 3.0;","const G3 = 1.0 / 6.0;","const F4 = (Math.sqrt(5.0) - 1.0) / 4.0;","const G4 = (5.0 - Math.sqrt(5.0)) / 20.0;","const grad3 = new Float32Array([1, 1, 0,","    -1, 1, 0,","    1, -1, 0,","    -1, -1, 0,","    1, 0, 1,","    -1, 0, 1,","    1, 0, -1,","    -1, 0, -1,","    0, 1, 1,","    0, -1, 1,","    0, 1, -1,","    0, -1, -1]);","const grad4 = new Float32Array([0, 1, 1, 1, 0, 1, 1, -1, 0, 1, -1, 1, 0, 1, -1, -1,","    0, -1, 1, 1, 0, -1, 1, -1, 0, -1, -1, 1, 0, -1, -1, -1,","    1, 0, 1, 1, 1, 0, 1, -1, 1, 0, -1, 1, 1, 0, -1, -1,","    -1, 0, 1, 1, -1, 0, 1, -1, -1, 0, -1, 1, -1, 0, -1, -1,","    1, 1, 0, 1, 1, 1, 0, -1, 1, -1, 0, 1, 1, -1, 0, -1,","    -1, 1, 0, 1, -1, 1, 0, -1, -1, -1, 0, 1, -1, -1, 0, -1,","    1, 1, 1, 0, 1, 1, -1, 0, 1, -1, 1, 0, 1, -1, -1, 0,","    -1, 1, 1, 0, -1, 1, -1, 0, -1, -1, 1, 0, -1, -1, -1, 0]);","","","/**"," * Builds a random permutation table."," * This is exported only for (internal) testing purposes."," * Do not rely on this export."," * @param {() => number} random"," * @private"," */","function buildPermutationTable(random) {","    const p = new Uint8Array(256);","    for (let i = 0; i < 256; i++) {","        p[i] = i;","    }","    for (let i = 0; i < 255; i++) {","        const r = i + ~~(random() * (256 - i));","        const aux = p[i];","        p[i] = p[r];","        p[r] = aux;","    }","    return p;","}","","/*","The ALEA PRNG and masher code used by simplex-noise.js","is based on code by Johannes Baagøe, modified by Jonas Wagner.","See alea.md for the full license.","@param {string|number} seed","*/","function alea(seed) {","    let s0 = 0;","    let s1 = 0;","    let s2 = 0;","    let c = 1;","    const mash = masher();","    s0 = mash(' ');","    s1 = mash(' ');","    s2 = mash(' ');","    s0 -= mash(seed);","    if (s0 < 0) {","        s0 += 1;","    }","    s1 -= mash(seed);","    if (s1 < 0) {","        s1 += 1;","    }","    s2 -= mash(seed);","    if (s2 < 0) {","        s2 += 1;","    }","    return function () {","        const t = 2091639 * s0 + c * 2.3283064365386963e-10; // 2^-32","        s0 = s1;","        s1 = s2;","        return s2 = t - (c = t | 0);","    };","}","","function masher() {","    let n = 0xefc8249d;","    return function (data) {","        data = data.toString();","        for (let i = 0; i < data.length; i++) {","            n += data.charCodeAt(i);","            let h = 0.02519603282416938 * n;","            n = h >>> 0;","            h -= n;","            h *= n;","            n = h >>> 0;","            h -= n;","            n += h * 0x100000000; // 2^32","        }","        return (n >>> 0) * 2.3283064365386963e-10; // 2^-32","    };","}","","/** Deterministic simplex noise generator suitable for 2D, 3D and 4D spaces. */","class SimplexNoise {","    /**","     * Creates a new `SimplexNoise` instance.","     * This involves some setup. You can save a few cpu cycles by reusing the same instance.","     * @param {(() => number)|string|number} randomOrSeed A random number generator or a seed (string|number).","     * Defaults to Math.random (random irreproducible initialization).","     */","    constructor(randomOrSeed) {","        if (randomOrSeed === void 0) { randomOrSeed = Math.random; }","        const random = typeof randomOrSeed == 'function' ? randomOrSeed : alea(randomOrSeed);","        this.p = buildPermutationTable(random);","        this.perm = new Uint8Array(512);","        this.permMod12 = new Uint8Array(512);","        for (let i = 0; i < 512; i++) {","            this.perm[i] = this.p[i & 255];","            this.permMod12[i] = this.perm[i] % 12;","        }","    }","","    /**","     * Samples the noise field in 2 dimensions","     * @param {number} x","     * @param {number} y","     * @returns a number in the interval [-1, 1]","     */","    noise2D(x, y) {","        const permMod12 = this.permMod12;","        const perm = this.perm;","        let n0 = 0; // Noise contributions from the three corners","        let n1 = 0;","        let n2 = 0;","        // Skew the input space to determine which simplex cell we're in","        const s = (x + y) * F2; // Hairy factor for 2D","        const i = Math.floor(x + s);","        const j = Math.floor(y + s);","        const t = (i + j) * G2;","        const X0 = i - t; // Unskew the cell origin back to (x,y) space","        const Y0 = j - t;","        const x0 = x - X0; // The x,y distances from the cell origin","        const y0 = y - Y0;","        // For the 2D case, the simplex shape is an equilateral triangle.","        // Determine which simplex we are in.","        let i1, j1; // Offsets for second (middle) corner of simplex in (i,j) coords","        if (x0 > y0) {","            i1 = 1;","            j1 = 0;","        } // lower triangle, XY order: (0,0)->(1,0)->(1,1)","        else {","            i1 = 0;","            j1 = 1;","        } // upper triangle, YX order: (0,0)->(0,1)->(1,1)","        // A step of (1,0) in (i,j) means a step of (1-c,-c) in (x,y), and","        // a step of (0,1) in (i,j) means a step of (-c,1-c) in (x,y), where","        // c = (3-sqrt(3))/6","        const x1 = x0 - i1 + G2; // Offsets for middle corner in (x,y) unskewed coords","        const y1 = y0 - j1 + G2;","        const x2 = x0 - 1.0 + 2.0 * G2; // Offsets for last corner in (x,y) unskewed coords","        const y2 = y0 - 1.0 + 2.0 * G2;","        // Work out the hashed gradient indices of the three simplex corners","        const ii = i & 255;","        const jj = j & 255;","        // Calculate the contribution from the three corners","        let t0 = 0.5 - x0 * x0 - y0 * y0;","        if (t0 >= 0) {","            const gi0 = permMod12[ii + perm[jj]] * 3;","            t0 *= t0;","            n0 = t0 * t0 * (grad3[gi0] * x0 + grad3[gi0 + 1] * y0); // (x,y) of grad3 used for 2D gradient","        }","        let t1 = 0.5 - x1 * x1 - y1 * y1;","        if (t1 >= 0) {","            const gi1 = permMod12[ii + i1 + perm[jj + j1]] * 3;","            t1 *= t1;","            n1 = t1 * t1 * (grad3[gi1] * x1 + grad3[gi1 + 1] * y1);","        }","        let t2 = 0.5 - x2 * x2 - y2 * y2;","        if (t2 >= 0) {","            const gi2 = permMod12[ii + 1 + perm[jj + 1]] * 3;","            t2 *= t2;","            n2 = t2 * t2 * (grad3[gi2] * x2 + grad3[gi2 + 1] * y2);","        }","        // Add contributions from each corner to get the final noise value.","        // The result is scaled to return values in the interval [-1,1].","        return 70.0 * (n0 + n1 + n2);","    }","","    /**","     * Samples the noise field in 3 dimensions","     * @param {number} x","     * @param {number} y","     * @param {number} z","     * @returns a number in the interval [-1, 1]","     */","    noise3D(x, y, z) {","        const permMod12 = this.permMod12;","        const perm = this.perm;","        let n0, n1, n2, n3; // Noise contributions from the four corners","        // Skew the input space to determine which simplex cell we're in","        const s = (x + y + z) * F3; // Very nice and simple skew factor for 3D","        const i = Math.floor(x + s);","        const j = Math.floor(y + s);","        const k = Math.floor(z + s);","        const t = (i + j + k) * G3;","        const X0 = i - t; // Unskew the cell origin back to (x,y,z) space","        const Y0 = j - t;","        const Z0 = k - t;","        const x0 = x - X0; // The x,y,z distances from the cell origin","        const y0 = y - Y0;","        const z0 = z - Z0;","        // For the 3D case, the simplex shape is a slightly irregular tetrahedron.","        // Determine which simplex we are in.","        let i1, j1, k1; // Offsets for second corner of simplex in (i,j,k) coords","        let i2, j2, k2; // Offsets for third corner of simplex in (i,j,k) coords","        if (x0 >= y0) {","            if (y0 >= z0) {","                i1 = 1;","                j1 = 0;","                k1 = 0;","                i2 = 1;","                j2 = 1;","                k2 = 0;","            } // X Y Z order","            else if (x0 >= z0) {","                i1 = 1;","                j1 = 0;","                k1 = 0;","                i2 = 1;","                j2 = 0;","                k2 = 1;","            } // X Z Y order","            else {","                i1 = 0;","                j1 = 0;","                k1 = 1;","                i2 = 1;","                j2 = 0;","                k2 = 1;","            } // Z X Y order","        }","        else { // x0<y0","            if (y0 < z0) {","                i1 = 0;","                j1 = 0;","                k1 = 1;","                i2 = 0;","                j2 = 1;","                k2 = 1;","            } // Z Y X order","            else if (x0 < z0) {","                i1 = 0;","                j1 = 1;","                k1 = 0;","                i2 = 0;","                j2 = 1;","                k2 = 1;","            } // Y Z X order","            else {","                i1 = 0;","                j1 = 1;","                k1 = 0;","                i2 = 1;","                j2 = 1;","                k2 = 0;","            } // Y X Z order","        }","        // A step of (1,0,0) in (i,j,k) means a step of (1-c,-c,-c) in (x,y,z),","        // a step of (0,1,0) in (i,j,k) means a step of (-c,1-c,-c) in (x,y,z), and","        // a step of (0,0,1) in (i,j,k) means a step of (-c,-c,1-c) in (x,y,z), where","        // c = 1/6.","        const x1 = x0 - i1 + G3; // Offsets for second corner in (x,y,z) coords","        const y1 = y0 - j1 + G3;","        const z1 = z0 - k1 + G3;","        const x2 = x0 - i2 + 2.0 * G3; // Offsets for third corner in (x,y,z) coords","        const y2 = y0 - j2 + 2.0 * G3;","        const z2 = z0 - k2 + 2.0 * G3;","        const x3 = x0 - 1.0 + 3.0 * G3; // Offsets for last corner in (x,y,z) coords","        const y3 = y0 - 1.0 + 3.0 * G3;","        const z3 = z0 - 1.0 + 3.0 * G3;","        // Work out the hashed gradient indices of the four simplex corners","        const ii = i & 255;","        const jj = j & 255;","        const kk = k & 255;","        // Calculate the contribution from the four corners","        let t0 = 0.6 - x0 * x0 - y0 * y0 - z0 * z0;","        if (t0 < 0)","            n0 = 0.0;","        else {","            const gi0 = permMod12[ii + perm[jj + perm[kk]]] * 3;","            t0 *= t0;","            n0 = t0 * t0 * (grad3[gi0] * x0 + grad3[gi0 + 1] * y0 + grad3[gi0 + 2] * z0);","        }","        let t1 = 0.6 - x1 * x1 - y1 * y1 - z1 * z1;","        if (t1 < 0)","            n1 = 0.0;","        else {","            const gi1 = permMod12[ii + i1 + perm[jj + j1 + perm[kk + k1]]] * 3;","            t1 *= t1;","            n1 = t1 * t1 * (grad3[gi1] * x1 + grad3[gi1 + 1] * y1 + grad3[gi1 + 2] * z1);","        }","        let t2 = 0.6 - x2 * x2 - y2 * y2 - z2 * z2;","        if (t2 < 0)","            n2 = 0.0;","        else {","            const gi2 = permMod12[ii + i2 + perm[jj + j2 + perm[kk + k2]]] * 3;","            t2 *= t2;","            n2 = t2 * t2 * (grad3[gi2] * x2 + grad3[gi2 + 1] * y2 + grad3[gi2 + 2] * z2);","        }","        let t3 = 0.6 - x3 * x3 - y3 * y3 - z3 * z3;","        if (t3 < 0)","            n3 = 0.0;","        else {","            const gi3 = permMod12[ii + 1 + perm[jj + 1 + perm[kk + 1]]] * 3;","            t3 *= t3;","            n3 = t3 * t3 * (grad3[gi3] * x3 + grad3[gi3 + 1] * y3 + grad3[gi3 + 2] * z3);","        }","        // Add contributions from each corner to get the final noise value.","        // The result is scaled to stay just inside [-1,1]","        return 32.0 * (n0 + n1 + n2 + n3);","    }","","    /**","     * Samples the noise field in 4 dimensions","     * @param {number} x","     * @param {number} y","     * @param {number} z","     * @returns a number in the interval [-1, 1]","     */","    noise4D(x, y, z, w) {","        const perm = this.perm;","        let n0, n1, n2, n3, n4; // Noise contributions from the five corners","        // Skew the (x,y,z,w) space to determine which cell of 24 simplices we're in","        const s = (x + y + z + w) * F4; // Factor for 4D skewing","        const i = Math.floor(x + s);","        const j = Math.floor(y + s);","        const k = Math.floor(z + s);","        const l = Math.floor(w + s);","        const t = (i + j + k + l) * G4; // Factor for 4D unskewing","        const X0 = i - t; // Unskew the cell origin back to (x,y,z,w) space","        const Y0 = j - t;","        const Z0 = k - t;","        const W0 = l - t;","        const x0 = x - X0; // The x,y,z,w distances from the cell origin","        const y0 = y - Y0;","        const z0 = z - Z0;","        const w0 = w - W0;","        // For the 4D case, the simplex is a 4D shape I won't even try to describe.","        // To find out which of the 24 possible simplices we're in, we need to","        // determine the magnitude ordering of x0, y0, z0 and w0.","        // Six pair-wise comparisons are performed between each possible pair","        // of the four coordinates, and the results are used to rank the numbers.","        let rankx = 0;","        let ranky = 0;","        let rankz = 0;","        let rankw = 0;","        if (x0 > y0)","            rankx++;","        else","            ranky++;","        if (x0 > z0)","            rankx++;","        else","            rankz++;","        if (x0 > w0)","            rankx++;","        else","            rankw++;","        if (y0 > z0)","            ranky++;","        else","            rankz++;","        if (y0 > w0)","            ranky++;","        else","            rankw++;","        if (z0 > w0)","            rankz++;","        else","            rankw++;","        // simplex[c] is a 4-vector with the numbers 0, 1, 2 and 3 in some order.","        // Many values of c will never occur, since e.g. x>y>z>w makes x<z, y<w and x<w","        // impossible. Only the 24 indices which have non-zero entries make any sense.","        // We use a thresholding to set the coordinates in turn from the largest magnitude.","        // Rank 3 denotes the largest coordinate.","        // Rank 2 denotes the second largest coordinate.","        // Rank 1 denotes the second smallest coordinate.","        // The integer offsets for the second simplex corner","        const i1 = rankx >= 3 ? 1 : 0;","        const j1 = ranky >= 3 ? 1 : 0;","        const k1 = rankz >= 3 ? 1 : 0;","        const l1 = rankw >= 3 ? 1 : 0;","        // The integer offsets for the third simplex corner","        const i2 = rankx >= 2 ? 1 : 0;","        const j2 = ranky >= 2 ? 1 : 0;","        const k2 = rankz >= 2 ? 1 : 0;","        const l2 = rankw >= 2 ? 1 : 0;","        // The integer offsets for the fourth simplex corner","        const i3 = rankx >= 1 ? 1 : 0;","        const j3 = ranky >= 1 ? 1 : 0;","        const k3 = rankz >= 1 ? 1 : 0;","        const l3 = rankw >= 1 ? 1 : 0;","        // The fifth corner has all coordinate offsets = 1, so no need to compute that.","        const x1 = x0 - i1 + G4; // Offsets for second corner in (x,y,z,w) coords","        const y1 = y0 - j1 + G4;","        const z1 = z0 - k1 + G4;","        const w1 = w0 - l1 + G4;","        const x2 = x0 - i2 + 2.0 * G4; // Offsets for third corner in (x,y,z,w) coords","        const y2 = y0 - j2 + 2.0 * G4;","        const z2 = z0 - k2 + 2.0 * G4;","        const w2 = w0 - l2 + 2.0 * G4;","        const x3 = x0 - i3 + 3.0 * G4; // Offsets for fourth corner in (x,y,z,w) coords","        const y3 = y0 - j3 + 3.0 * G4;","        const z3 = z0 - k3 + 3.0 * G4;","        const w3 = w0 - l3 + 3.0 * G4;","        const x4 = x0 - 1.0 + 4.0 * G4; // Offsets for last corner in (x,y,z,w) coords","        const y4 = y0 - 1.0 + 4.0 * G4;","        const z4 = z0 - 1.0 + 4.0 * G4;","        const w4 = w0 - 1.0 + 4.0 * G4;","        // Work out the hashed gradient indices of the five simplex corners","        const ii = i & 255;","        const jj = j & 255;","        const kk = k & 255;","        const ll = l & 255;","        // Calculate the contribution from the five corners","        let t0 = 0.6 - x0 * x0 - y0 * y0 - z0 * z0 - w0 * w0;","        if (t0 < 0)","            n0 = 0.0;","        else {","            const gi0 = (perm[ii + perm[jj + perm[kk + perm[ll]]]] % 32) * 4;","            t0 *= t0;","            n0 = t0 * t0 * (grad4[gi0] * x0 + grad4[gi0 + 1] * y0 + grad4[gi0 + 2] * z0 + grad4[gi0 + 3] * w0);","        }","        let t1 = 0.6 - x1 * x1 - y1 * y1 - z1 * z1 - w1 * w1;","        if (t1 < 0)","            n1 = 0.0;","        else {","            const gi1 = (perm[ii + i1 + perm[jj + j1 + perm[kk + k1 + perm[ll + l1]]]] % 32) * 4;","            t1 *= t1;","            n1 = t1 * t1 * (grad4[gi1] * x1 + grad4[gi1 + 1] * y1 + grad4[gi1 + 2] * z1 + grad4[gi1 + 3] * w1);","        }","        let t2 = 0.6 - x2 * x2 - y2 * y2 - z2 * z2 - w2 * w2;","        if (t2 < 0)","            n2 = 0.0;","        else {","            const gi2 = (perm[ii + i2 + perm[jj + j2 + perm[kk + k2 + perm[ll + l2]]]] % 32) * 4;","            t2 *= t2;","            n2 = t2 * t2 * (grad4[gi2] * x2 + grad4[gi2 + 1] * y2 + grad4[gi2 + 2] * z2 + grad4[gi2 + 3] * w2);","        }","        let t3 = 0.6 - x3 * x3 - y3 * y3 - z3 * z3 - w3 * w3;","        if (t3 < 0)","            n3 = 0.0;","        else {","            const gi3 = (perm[ii + i3 + perm[jj + j3 + perm[kk + k3 + perm[ll + l3]]]] % 32) * 4;","            t3 *= t3;","            n3 = t3 * t3 * (grad4[gi3] * x3 + grad4[gi3 + 1] * y3 + grad4[gi3 + 2] * z3 + grad4[gi3 + 3] * w3);","        }","        let t4 = 0.6 - x4 * x4 - y4 * y4 - z4 * z4 - w4 * w4;","        if (t4 < 0)","            n4 = 0.0;","        else {","            const gi4 = (perm[ii + 1 + perm[jj + 1 + perm[kk + 1 + perm[ll + 1]]]] % 32) * 4;","            t4 *= t4;","            n4 = t4 * t4 * (grad4[gi4] * x4 + grad4[gi4 + 1] * y4 + grad4[gi4 + 2] * z4 + grad4[gi4 + 3] * w4);","        }","        // Sum up and scale the result to cover the range [-1,1]","        return 27.0 * (n0 + n1 + n2 + n3 + n4);","    };","}","","gdjs._shakeObjectExtension = {","    noiseManager: new NoiseManager(),","};",""],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"parameters":[],"objectGroups":[]},{"description":"Generate a number from 2 dimensional simplex noise.","fullName":"2D noise","functionType":"Expression","name":"Noise2d","private":true,"sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const name = eventsFunctionContext.getArgument(\"Name\");\r","const x = eventsFunctionContext.getArgument(\"X\");\r","const y = eventsFunctionContext.getArgument(\"Y\");\r","\r","eventsFunctionContext.returnValue = gdjs._shakeObjectExtension.noiseManager.getGenerator(name).noise(x, y);"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"expressionType":{"type":"expression"},"parameters":[{"description":"Generator name","name":"Name","type":"string"},{"description":"X coordinate","name":"X","type":"expression"},{"description":"Y coordinate","name":"Y","type":"expression"}],"objectGroups":[]},{"description":"Generate a number from 3 dimensional simplex noise.","fullName":"3D noise","functionType":"Expression","name":"Noise3d","private":true,"sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const name = eventsFunctionContext.getArgument(\"Name\");\r","const x = eventsFunctionContext.getArgument(\"X\");\r","const y = eventsFunctionContext.getArgument(\"Y\");\r","const z = eventsFunctionContext.getArgument(\"Z\");\r","\r","eventsFunctionContext.returnValue = gdjs._shakeObjectExtension.noiseManager.getGenerator(name).noise(x, y, z);"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"expressionType":{"type":"expression"},"parameters":[{"description":"Generator name","name":"Name","type":"string"},{"description":"X coordinate","name":"X","type":"expression"},{"description":"Y coordinate","name":"Y","type":"expression"},{"description":"Z coordinate","name":"Z","type":"expression"}],"objectGroups":[]},{"description":"Generate a number from 4 dimensional simplex noise.","fullName":"4D noise","functionType":"Expression","name":"Noise4d","private":true,"sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const name = eventsFunctionContext.getArgument(\"Name\");\r","const x = eventsFunctionContext.getArgument(\"X\");\r","const y = eventsFunctionContext.getArgument(\"Y\");\r","const z = eventsFunctionContext.getArgument(\"Z\");\r","const w = eventsFunctionContext.getArgument(\"W\");\r","\r","eventsFunctionContext.returnValue = gdjs._shakeObjectExtension.noiseManager.getGenerator(name).noise(x, y, z, w);"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"expressionType":{"type":"expression"},"parameters":[{"description":"Generator name","name":"Name","type":"string"},{"description":"X coordinate","name":"X","type":"expression"},{"description":"Y coordinate","name":"Y","type":"expression"},{"description":"Z coordinate","name":"Z","type":"expression"},{"description":"W coordinate","name":"W","type":"expression"}],"objectGroups":[]},{"description":"Create a noise generator with default settings (frequency = 1,  octaves = 1, persistence = 0.5, lacunarity = 2).","fullName":"Create a noise generator","functionType":"Action","name":"Create","private":true,"sentence":"Create a noise generator named _PARAM1_","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const name = eventsFunctionContext.getArgument(\"Name\");\r","\r","gdjs._shakeObjectExtension.noiseManager.getGenerator(name);"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"parameters":[{"description":"Generator name","name":"Name","type":"string"}],"objectGroups":[]},{"description":"Delete a noise generator and loose its settings.","fullName":"Delete a noise generator","functionType":"Action","name":"Delete","private":true,"sentence":"Delete _PARAM1_ noise generator","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const name = eventsFunctionContext.getArgument(\"Name\");\r","\r","gdjs._shakeObjectExtension.noiseManager.deleteGenerator(name);"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"parameters":[{"description":"Generator name","name":"Name","type":"string"}],"objectGroups":[]},{"description":"Delete all noise generators and loose their settings.","fullName":"Delete all noise generators","functionType":"Action","name":"DeleteAll","private":true,"sentence":"Delete all noise generators","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":"gdjs._shakeObjectExtension.noiseManager.deleteAllGenerators();","parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"parameters":[],"objectGroups":[]},{"description":"The seed is a number used to generate the random noise. Setting the same seed will result in the same random noise generation. It's for example useful to generate the same world, by saving this seed value and reusing it later to generate again a world.","fullName":"Noise seed","functionType":"Action","name":"SetSeed","private":true,"sentence":"Change the noise seed to _PARAM1_","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":"gdjs._shakeObjectExtension.noiseManager.setSeed(eventsFunctionContext.getArgument(\"Seed\"));","parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"parameters":[{"description":"Seed","longDescription":"15 digits numbers maximum","name":"Seed","type":"expression"}],"objectGroups":[]},{"description":"Change the looping period on X used for noise generation. The noise will wrap-around on X.","fullName":"Noise looping period on X","functionType":"Action","name":"SetLoopPeriodX","private":true,"sentence":"Change the looping period on X of _PARAM2_: _PARAM1_","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const name = eventsFunctionContext.getArgument(\"Name\");\r","\r","gdjs._shakeObjectExtension.noiseManager.getGenerator(name).xLoopPeriod = eventsFunctionContext.getArgument(\"LoopPeriod\");"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"parameters":[{"description":"Looping period on X","name":"LoopPeriod","type":"expression"},{"description":"Generator name","name":"Name","type":"string"}],"objectGroups":[]},{"description":"Change the looping period on Y used for noise generation. The noise will wrap-around on Y.","fullName":"Noise looping period on Y","functionType":"Action","name":"SetLoopPeriodY","private":true,"sentence":"Change the looping period on Y of _PARAM2_: _PARAM1_","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const name = eventsFunctionContext.getArgument(\"Name\");\r","\r","gdjs._shakeObjectExtension.noiseManager.getGenerator(name).yLoopPeriod = eventsFunctionContext.getArgument(\"LoopPeriod\");"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"description":"Looping period on Y","name":"LoopPeriod","type":"expression"},{"description":"Generator name","name":"Name","type":"string"}],"objectGroups":[]},{"description":"Change the base frequency used for noise generation. A lower frequency will zoom in the noise.","fullName":"Noise base frequency","functionType":"Action","name":"SetFrequency","private":true,"sentence":"Change the noise frequency of _PARAM2_: _PARAM1_","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const name = eventsFunctionContext.getArgument(\"Name\");\r","\r","gdjs._shakeObjectExtension.noiseManager.getGenerator(name).frequency = eventsFunctionContext.getArgument(\"Frequency\");"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"parameters":[{"description":"Frequency","name":"Frequency","type":"expression"},{"description":"Generator name","name":"Name","type":"string"}],"objectGroups":[]},{"description":"Change the number of octaves used for noise generation. It can be seen as layers of noise with different zoom.","fullName":"Noise octaves","functionType":"Action","name":"SetOctaves","private":true,"sentence":"Change the number of noise octaves of _PARAM2_: _PARAM1_","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const name = eventsFunctionContext.getArgument(\"Name\");\r","\r","gdjs._shakeObjectExtension.noiseManager.getGenerator(name).octaves = eventsFunctionContext.getArgument(\"Octaves\");"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"parameters":[{"description":"Octaves","name":"Octaves","type":"expression"},{"description":"Generator name","name":"Name","type":"string"}],"objectGroups":[]},{"description":"Change the persistence used for noise generation. At its default value \"0.5\", it halves the noise amplitude at each octave.","fullName":"Noise persistence","functionType":"Action","name":"SetPersistence","private":true,"sentence":"Change the noise persistence of _PARAM2_: _PARAM1_","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const name = eventsFunctionContext.getArgument(\"Name\");\r","\r","gdjs._shakeObjectExtension.noiseManager.getGenerator(name).persistence = eventsFunctionContext.getArgument(\"Persistence\");"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"parameters":[{"description":"Persistence","name":"Persistence","type":"expression"},{"description":"Generator name","name":"Name","type":"string"}],"objectGroups":[]},{"description":"Change the lacunarity used for noise generation. At its default value \"2\", it doubles the frequency at each octave.","fullName":"Noise lacunarity","functionType":"Action","name":"SetLacunarity","private":true,"sentence":"Change the noise lacunarity of _PARAM2_: _PARAM1_","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const name = eventsFunctionContext.getArgument(\"Name\");\r","\r","gdjs._shakeObjectExtension.noiseManager.getGenerator(name).lacunarity = eventsFunctionContext.getArgument(\"Lacunarity\");"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"parameters":[{"description":"Lacunarity","name":"Lacunarity","type":"expression"},{"description":"Generator name","name":"Name","type":"string"}],"objectGroups":[]},{"description":"The seed used for noise generation.","fullName":"Noise seed","functionType":"Expression","name":"Seed","private":true,"sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":"eventsFunctionContext.returnValue = gdjs._shakeObjectExtension.noiseManager.seed;","parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[],"objectGroups":[]},{"description":"The base frequency used for noise generation.","fullName":"Noise base frequency","functionType":"Expression","name":"Frequency","private":true,"sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const name = eventsFunctionContext.getArgument(\"Name\");\r","\r","eventsFunctionContext.returnValue = gdjs._shakeObjectExtension.noiseManager.getGenerator(name).frequency;"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[{"description":"Generator name","name":"Name","type":"string"}],"objectGroups":[]},{"description":"The number of octaves used for noise generation.","fullName":"Noise octaves number","functionType":"Expression","name":"Octaves","private":true,"sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const name = eventsFunctionContext.getArgument(\"Name\");\r","\r","eventsFunctionContext.returnValue = gdjs._shakeObjectExtension.noiseManager.getGenerator(name).octaves;"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[{"description":"Generator name","name":"Name","type":"string"}],"objectGroups":[]},{"description":"The persistence used for noise generation.","fullName":"Noise persistence","functionType":"Expression","name":"Persistence","private":true,"sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const name = eventsFunctionContext.getArgument(\"Name\");\r","\r","eventsFunctionContext.returnValue = gdjs._shakeObjectExtension.noiseManager.getGenerator(name).persistence;"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[{"description":"Generator name","name":"Name","type":"string"}],"objectGroups":[]},{"description":"The lacunarity used for noise generation.","fullName":"Noise lacunarity","functionType":"Expression","name":"Lacunarity","private":true,"sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const name = eventsFunctionContext.getArgument(\"Name\");\r","\r","eventsFunctionContext.returnValue = gdjs._shakeObjectExtension.noiseManager.getGenerator(name).lacunarity;"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[{"description":"Generator name","name":"Name","type":"string"}],"objectGroups":[]}],"eventsBasedBehaviors":[{"description":"Shake 3D objects with translation and rotation.","fullName":"3D shake","name":"ShakeModel3D","objectType":"","quickCustomizationVisibility":"hidden","eventsFunctions":[{"fullName":"","functionType":"Action","name":"onCreated","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"BooleanVariable"},"parameters":["IsStartingAtCreation","True",""]}],"actions":[{"type":{"value":"ShakeObject3D::DefineHelperClasses"},"parameters":["",""]},{"type":{"value":"ShakeObject3D::ShakeModel3D::StartShaking"},"parameters":["Object","Behavior","0",""]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"ShakeObject3D::ShakeModel3D","type":"behavior"}],"objectGroups":[]},{"fullName":"","functionType":"Action","name":"doStepPostEvents","sentence":"","events":[{"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Step time counters."},{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["Time","+","TimeDelta()"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"ShakeObject3D::ShakeModel3D::IsShaking"},"parameters":["Object","Behavior",""]}],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["NoiseTime","+","TimeDelta() * Frequency"]},{"type":{"value":"ShakeObject3D::ShakeModel3D::SetSharedPropertyEasingFactor"},"parameters":["Object","Behavior","=","min(Object.Behavior::StartEasingFactor(), Object.Behavior::StopEasingFactor())"]}],"events":[{"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Shake the object.\nSave the object displacement to revert it in onScenePostEvents."},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberVariable"},"parameters":["TranslationAmplitudeX","!=","0"]}],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["DeltaX","=","ShakeObject3D::Noise2d(\"\", NoiseTime, 1000) * TranslationAmplitudeX * EasingFactor"]},{"type":{"value":"MettreX"},"parameters":["Object","+","DeltaX"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberVariable"},"parameters":["TranslationAmplitudeY","!=","0"]}],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["DeltaY","=","ShakeObject3D::Noise2d(\"\", NoiseTime, 2000) * TranslationAmplitudeY * EasingFactor"]},{"type":{"value":"MettreY"},"parameters":["Object","+","DeltaY"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberVariable"},"parameters":["TranslationAmplitudeZ","!=","0"]}],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["DeltaZ","=","ShakeObject3D::Noise2d(\"\", NoiseTime, 3000) * TranslationAmplitudeZ * EasingFactor"]},{"type":{"value":"Scene3D::Base3DBehavior::SetZ"},"parameters":["Object","Object3D","+","DeltaZ"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberVariable"},"parameters":["RotationAmplitudeX","!=","0"]}],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["DeltaAngleX","=","ShakeObject3D::Noise2d(\"\", NoiseTime, 4000) * RotationAmplitudeX * EasingFactor"]},{"type":{"value":"Scene3D::Base3DBehavior::SetRotationX"},"parameters":["Object","Object3D","+","DeltaAngleX"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberVariable"},"parameters":["RotationAmplitudeY","!=","0"]}],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["DeltaAngleY","=","ShakeObject3D::Noise2d(\"\", NoiseTime, 5000) * RotationAmplitudeY * EasingFactor"]},{"type":{"value":"Scene3D::Base3DBehavior::SetRotationY"},"parameters":["Object","Object3D","+","DeltaAngleY"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberVariable"},"parameters":["RotationAmplitudeZ","!=","0"]}],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["DeltaAngleZ","=","ShakeObject3D::Noise2d(\"\", NoiseTime, 6000) * RotationAmplitudeZ * EasingFactor"]},{"type":{"value":"SetAngle"},"parameters":["Object","+","DeltaAngleZ"]}]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"ShakeObject3D::ShakeModel3D","type":"behavior"}],"objectGroups":[]},{"fullName":"","functionType":"Action","name":"doStepPreEvents","sentence":"","events":[{"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Revert the shaking."},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"ShakeObject3D::ShakeModel3D::IsShaking"},"parameters":["Object","Behavior",""]}],"actions":[],"events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberVariable"},"parameters":["TranslationAmplitudeX","!=","0"]}],"actions":[{"type":{"value":"MettreX"},"parameters":["Object","-","DeltaX"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberVariable"},"parameters":["TranslationAmplitudeY","!=","0"]}],"actions":[{"type":{"value":"MettreY"},"parameters":["Object","-","DeltaY"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberVariable"},"parameters":["TranslationAmplitudeZ","!=","0"]}],"actions":[{"type":{"value":"Scene3D::Base3DBehavior::SetZ"},"parameters":["Object","Object3D","-","DeltaZ"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberVariable"},"parameters":["RotationAmplitudeX","!=","0"]}],"actions":[{"type":{"value":"Scene3D::Base3DBehavior::SetRotationX"},"parameters":["Object","Object3D","-","DeltaAngleX"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberVariable"},"parameters":["RotationAmplitudeY","!=","0"]}],"actions":[{"type":{"value":"Scene3D::Base3DBehavior::SetRotationY"},"parameters":["Object","Object3D","-","DeltaAngleY"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberVariable"},"parameters":["RotationAmplitudeZ","!=","0"]}],"actions":[{"type":{"value":"SetAngle"},"parameters":["Object","-","DeltaAngleZ"]}]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"ShakeObject3D::ShakeModel3D","type":"behavior"}],"objectGroups":[]},{"description":"Shake the object with a linear easing at the start and the end.","fullName":"Shake","functionType":"Action","name":"Shake","sentence":"Shake _PARAM0_ for _PARAM2_ seconds with _PARAM3_ seconds of easing to start and _PARAM4_ seconds to stop","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["Time","=","0"]},{"type":{"value":"SetNumberVariable"},"parameters":["NoiseTime","=","TimeFromStart() * Frequency"]},{"type":{"value":"SetNumberVariable"},"parameters":["Duration","=","NewDuration"]},{"type":{"value":"SetNumberVariable"},"parameters":["StartEasingDuration","=","StartEaseDuration"]},{"type":{"value":"SetNumberVariable"},"parameters":["StopEasingDuration","=","StopEaseDuration"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberVariable"},"parameters":["NewDuration","<","StartEaseDuration + StopEaseDuration"]}],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["StartEasingDuration","=","StartEaseDuration * NewDuration / (StartEaseDuration + StopEaseDuration)"]},{"type":{"value":"SetNumberVariable"},"parameters":["StopEasingDuration","=","StopEaseDuration * NewDuration / (StartEaseDuration + StopEaseDuration)"]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"ShakeObject3D::ShakeModel3D","type":"behavior"},{"description":"Duration (in seconds)","name":"NewDuration","type":"expression"},{"description":"Ease duration to start (in seconds)","name":"StartEaseDuration","type":"expression"},{"description":"Ease duration to stop (in seconds)","name":"StopEaseDuration","type":"expression"}],"objectGroups":[]},{"description":"Shake the object with a linear easing at the start and keep shaking until the stop action is used.","fullName":"Start shaking","functionType":"Action","name":"StartShaking","sentence":"Start shaking _PARAM0_ with _PARAM2_ seconds of easing","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["Time","=","0"]},{"type":{"value":"SetNumberVariable"},"parameters":["NoiseTime","=","TimeFromStart() * Frequency"]},{"type":{"value":"SetNumberVariable"},"parameters":["Duration","=","1234567890"]},{"type":{"value":"SetNumberVariable"},"parameters":["StartEasingDuration","=","EaseDuration"]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"ShakeObject3D::ShakeModel3D","type":"behavior"},{"description":"Ease duration (in seconds)","name":"EaseDuration","type":"expression"}],"objectGroups":[]},{"description":"Stop shaking the object with a linear easing.","fullName":"Stop shaking","functionType":"Action","name":"StopShaking","sentence":"Stop shaking _PARAM0_ with _PARAM2_ seconds of easing","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"ShakeObject3D::ShakeModel3D::IsShaking"},"parameters":["Object","Behavior",""]}],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["Time","=","0"]},{"type":{"value":"SetNumberVariable"},"parameters":["Duration","=","EaseDuration"]},{"type":{"value":"SetNumberVariable"},"parameters":["StopEasingDuration","=","EaseDuration"]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"ShakeObject3D::ShakeModel3D","type":"behavior"},{"description":"Ease duration (in seconds)","name":"EaseDuration","type":"expression"}],"objectGroups":[]},{"description":"Check if the object is shaking.","fullName":"Is shaking","functionType":"Condition","name":"IsShaking","sentence":"_PARAM0_ is shaking","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberVariable"},"parameters":["Time","<","Duration"]},{"type":{"value":"NumberVariable"},"parameters":["Time",">","0"]}],"actions":[{"type":{"value":"SetReturnBoolean"},"parameters":["True"]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"ShakeObject3D::ShakeModel3D","type":"behavior"}],"objectGroups":[]},{"description":"Check if the object is stopping to shake.","fullName":"Is stopping to shake","functionType":"Condition","name":"IsStopping","sentence":"_PARAM0_ is stopping to shake","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"ShakeObject3D::ShakeModel3D::IsShaking"},"parameters":["Object","Behavior",""]},{"type":{"value":"ShakeObject3D::ShakeModel3D::StopEasingFactor"},"parameters":["Object","Behavior","<","1",""]}],"actions":[{"type":{"value":"SetReturnBoolean"},"parameters":["True"]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"ShakeObject3D::ShakeModel3D","type":"behavior"}],"objectGroups":[]},{"description":"the shaking frequency of the object.","fullName":"Shaking frequency","functionType":"ExpressionAndCondition","group":"ShakeObject3D configuration","name":"Frequency","sentence":"the shaking frequency","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["Frequency"]}]}],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"ShakeObject3D::ShakeModel3D","type":"behavior"}],"objectGroups":[]},{"fullName":"","functionType":"ActionWithOperator","getterName":"Frequency","name":"SetFrequency","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetNumberVariable"},"parameters":["Frequency","=","Value"]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"ShakeObject3D::ShakeModel3D","type":"behavior"}],"objectGroups":[]},{"description":"Return the easing factor according to start properties.","fullName":"Start easing factor","functionType":"Expression","name":"StartEasingFactor","private":true,"sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberVariable"},"parameters":["StartEasingDuration","<=","0"]}],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["1"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberVariable"},"parameters":["StartEasingDuration",">","0"]}],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["clamp(Time / StartEasingDuration, 0, 1)"]}]}],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"ShakeObject3D::ShakeModel3D","type":"behavior"}],"objectGroups":[]},{"description":"Return the easing factor according to stop properties.","fullName":"Stop easing factor","functionType":"ExpressionAndCondition","name":"StopEasingFactor","private":true,"sentence":"stop easing factor","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberVariable"},"parameters":["StopEasingDuration","<=","0"]}],"actions":[],"events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberVariable"},"parameters":["Time","<","Duration"]}],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["1"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberVariable"},"parameters":["Time",">=","Duration"]}],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["0"]}]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"NumberVariable"},"parameters":["StopEasingDuration",">","0"]}],"actions":[{"type":{"value":"SetReturnNumber"},"parameters":["clamp((Duration - Time) / StopEasingDuration, 0, 1)"]}]}],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"ShakeObject3D::ShakeModel3D","type":"behavior"}],"objectGroups":[]}],"propertyDescriptors":[{"value":"0","type":"Number","unit":"Pixel","label":"Translation amplitude on X axis","description":"","group":"","extraInformation":[],"name":"TranslationAmplitudeX"},{"value":"0","type":"Number","unit":"Pixel","label":"Translation amplitude on Y axis","description":"","group":"","extraInformation":[],"name":"TranslationAmplitudeY"},{"value":"0","type":"Number","unit":"Pixel","label":"Translation amplitude on Z axis","description":"","group":"","extraInformation":[],"name":"TranslationAmplitudeZ"},{"value":"5","type":"Number","unit":"DegreeAngle","label":"Rotation amplitude around X axis","description":"","group":"","extraInformation":[],"name":"RotationAmplitudeX"},{"value":"5","type":"Number","unit":"DegreeAngle","label":"Rotation amplitude around Y axis","description":"","group":"","extraInformation":[],"name":"RotationAmplitudeY"},{"value":"5","type":"Number","unit":"DegreeAngle","label":"Rotation amplitude around Z axis","description":"","group":"","extraInformation":[],"name":"RotationAmplitudeZ"},{"value":"","type":"Number","label":"","description":"","group":"","extraInformation":[],"hidden":true,"name":"Time"},{"value":"","type":"Number","label":"","description":"","group":"","extraInformation":[],"hidden":true,"name":"Duration"},{"value":"","type":"Number","label":"","description":"","group":"","extraInformation":[],"hidden":true,"name":"StartEasingDuration"},{"value":"","type":"Number","label":"","description":"","group":"","extraInformation":[],"hidden":true,"name":"StopEasingDuration"},{"value":"","type":"Number","label":"Frequency","description":"","group":"","extraInformation":[],"name":"Frequency"},{"value":"","type":"Number","label":"","description":"","group":"","extraInformation":[],"hidden":true,"name":"DeltaX"},{"value":"","type":"Number","label":"","description":"","group":"","extraInformation":[],"hidden":true,"name":"DeltaY"},{"value":"","type":"Number","label":"","description":"","group":"","extraInformation":[],"hidden":true,"name":"DeltaZ"},{"value":"","type":"Number","label":"","description":"","group":"","extraInformation":[],"hidden":true,"name":"DeltaAngleX"},{"value":"","type":"Number","label":"","description":"","group":"","extraInformation":[],"hidden":true,"name":"DeltaAngleY"},{"value":"","type":"Number","label":"","description":"","group":"","extraInformation":[],"hidden":true,"name":"DeltaAngleZ"},{"value":"","type":"Number","label":"","description":"","group":"","extraInformation":[],"hidden":true,"name":"NoiseTime"},{"value":"","type":"Behavior","label":"3D capability","description":"","group":"","extraInformation":["Scene3D::Base3DBehavior"],"name":"Object3D"},{"value":"","type":"Boolean","label":"Start to shake at the object creation","description":"","group":"","extraInformation":[],"name":"IsStartingAtCreation"}],"sharedPropertyDescriptors":[{"value":"","type":"Number","label":"","description":"","group":"","extraInformation":[],"hidden":true,"name":"EasingFactor"}]}],"eventsBasedObjects":[]},{"author":"Silver-Streak, @Bouh, Tristan Rhodes","category":"Game mechanic","extensionNamespace":"","fullName":"Object \"Is On Screen\" Detection","gdevelopVersion":">=5.5.222","helpPath":"","iconUrl":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0ibWRpLW1vbml0b3Itc2NyZWVuc2hvdCIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIGQ9Ik05LDZINVYxMEg3VjhIOU0xOSwxMEgxN1YxMkgxNVYxNEgxOU0yMSwxNkgzVjRIMjFNMjEsMkgzQzEuODksMiAxLDIuODkgMSw0VjE2QTIsMiAwIDAsMCAzLDE4SDEwVjIwSDhWMjJIMTZWMjBIMTRWMThIMjFBMiwyIDAgMCwwIDIzLDE2VjRDMjMsMi44OSAyMi4xLDIgMjEsMiIgLz48L3N2Zz4=","name":"IsOnScreen","previewIconUrl":"https://resources.gdevelop-app.com/assets/Icons/monitor-screenshot.svg","shortDescription":"This adds a condition to detect if an object is on screen based off its current layer.","version":"1.2.1","description":["This extension adds conditions to check if an object is located within the visible portion of its layer's camera. The condition also allows for specifying padding to the virtual screen border.","","Note that this does not take into account any object visibility, such as being hidden or 0 opacity, but can be combined with those existing conditions."],"origin":{"identifier":"IsOnScreen","name":"gdevelop-extension-store"},"tags":["is on screen","condition","visible","hide","screen"],"authorIds":["2OwwM8ToR9dx9RJ2sAKTcrLmCB92","8Ih1aa8f5gWUp4UB2BdhQ2iXWxJ3","gqDaZjCfevOOxBYkK6zlhtZnXCg1"],"dependencies":[],"globalVariables":[],"sceneVariables":[],"eventsFunctions":[],"eventsBasedBehaviors":[{"description":"This behavior provides a condition to check if the object is located within the visible portion of its layer's camera. The condition also allows for specifying padding to the virtual screen border.\nNote that object visibility, such as being hidden or 0 opacity, is not considered (but you can use those existing conditions in addition to this behavior).","fullName":"Is on screen","name":"InOnScreen","objectType":"","eventsFunctions":[{"description":"Checks if an object position is within the viewport of its layer.","fullName":"Is on screen","functionType":"Condition","name":"IsOnScreen","sentence":"_PARAM0_ is on screen (padded by _PARAM2_ pixels)","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["/*","Get the object layer, convert the position from this layer to the screen coordinates.","Get the point on each side on the object on screen, and compare with the screen area.","","This way even if the camera has a rotation or custom scale the object is always compared to the screen area.","*/","","","// Get the layer of the object.","const object = objects[0];","const layer = runtimeScene.getLayer(object.getLayer());","","// Get the aabb of the object on his layer.","const aabb = object.getVisibilityAABB();","","// Get the layer to convert the coordinates of the AABB to the screen coordinates","const topLeft = layer.convertInverseCoords(aabb.min[0], aabb.min[1]);","const topRight = layer.convertInverseCoords(aabb.max[0], aabb.min[1]);","const bottomRight = layer.convertInverseCoords(aabb.max[0], aabb.max[1]);","const bottomLeft = layer.convertInverseCoords(aabb.min[0], aabb.max[1]);","","// Get the points on each side of the object on screen.","const posLeftObjectOnScreen = Math.min(topLeft[0], topRight[0], bottomLeft[0], bottomRight[0]);","const posRightObjectOnScreen = Math.max(topLeft[0], topRight[0], bottomLeft[0], bottomRight[0]);","const posUpObjectOnScreen = Math.min(topLeft[1], topRight[1], bottomLeft[1], bottomRight[1]);","const posDownObjectOnScreen = Math.max(topLeft[1], topRight[1], bottomLeft[1], bottomRight[1]);","","const padding = eventsFunctionContext.getArgument(\"Padding\");","","if (","    !(posLeftObjectOnScreen - padding > runtimeScene.getGame().getGameResolutionWidth() ||","        posUpObjectOnScreen - padding > runtimeScene.getGame().getGameResolutionHeight() ||","        posRightObjectOnScreen + padding < 0 ||","        posDownObjectOnScreen + padding < 0","        )",") {","    eventsFunctionContext.returnValue = true;","}",""],"parameterObjects":"Object","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"IsOnScreen::InOnScreen","type":"behavior"},{"description":"Padding (in pixels)","longDescription":"Number of pixels to pad the screen border. Zero by default. A negative value goes inside the screen, a positive value go outside.","name":"Padding","type":"expression"}],"objectGroups":[{"name":"Group","objects":[]}]}],"propertyDescriptors":[],"sharedPropertyDescriptors":[]}],"eventsBasedObjects":[]},{"author":"@Bouh, D8H","category":"General","extensionNamespace":"","fullName":"Extended variables support","gdevelopVersion":">=5.5.222","helpPath":"","iconUrl":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0ibWRpLXZhcmlhYmxlLWJveCIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIGQ9Ik0xOSAzSDVDMy45IDMgMyAzLjkgMyA1VjE5QzMgMjAuMSAzLjkgMjEgNSAyMUgxOUMyMC4xIDIxIDIxIDIwLjEgMjEgMTlWNUMyMSAzLjkgMjAuMSAzIDE5IDNNNy40IDE4QzUuOSAxNi41IDUgMTQuMyA1IDEyUzUuOSA3LjUgNy40IDZMOSA2LjdDNy43IDcuOSA3IDkuOSA3IDEyUzcuNyAxNi4xIDkgMTcuM0w3LjQgMThNMTIuNyAxNUwxMS45IDEzTDEwLjUgMTVIOUwxMS4zIDExLjlMMTAgOUgxMS4zTDEyLjEgMTFMMTMuNSA5SDE1TDEyLjggMTJMMTQuMSAxNUgxMi43TTE2LjYgMThMMTUgMTcuM0MxNi4zIDE2IDE3IDE0LjEgMTcgMTJTMTYuMyA3LjkgMTUgNi43TDE2LjYgNkMxOC4xIDcuNSAxOSA5LjcgMTkgMTJTMTguMSAxNi41IDE2LjYgMThaIiAvPjwvc3ZnPg==","name":"ExtendedVariables","previewIconUrl":"https://resources.gdevelop-app.com/assets/Icons/variable-box.svg","shortDescription":"Add conditions, actions and expressions to check for the existence of a variable, copy variables, delete existing ones from memory, and create dynamic variables.","version":"1.0.4","description":["This extension provides: ","- Conditions to check if a global/scene/object variable exists.","- Actions to copy object variables, global and scene variables.","- Actions to delete an existing global/scene variable from memory.","- Actions to create a global/scene variable using a text expression, rather than a variable name input.","- Expressions to get the value or text from a global/scene variable using a text expression, rather than a variable name.","","Text expressions allows to enter the name of the variable with an expression like `\"MyVar\"+ ToString(Variable(Health))`"],"origin":{"identifier":"ExtendedVariables","name":"gdevelop-extension-store"},"tags":["variable","scene","global","object","remove","expression","copy","structure","array","boolean","duplication"],"authorIds":["2OwwM8ToR9dx9RJ2sAKTcrLmCB92","IWykYNRvhCZBN3vEgKEbBPOR3Oc2"],"dependencies":[],"globalVariables":[],"sceneVariables":[],"eventsFunctions":[{"description":"Check if a global variable exists.","fullName":"Global variable exists","functionType":"Condition","group":"Deprecated","name":"C_global_variable_exist","private":true,"sentence":"If the global variable _PARAM1_ exist","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnBoolean"},"parameters":["False"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"ExtendedVariables::GlobalVariableExist"},"parameters":["","GlobalVariableName",""]}],"actions":[{"type":{"value":"SetReturnBoolean"},"parameters":["True"]}]}],"parameters":[{"description":"Name of the global variable","name":"GlobalVariableName","type":"string"}],"objectGroups":[]},{"description":"Check if the global variable exists.","fullName":"Global variable exists","functionType":"Condition","group":"Global variables","name":"GlobalVariableExist","sentence":"If the global variable _PARAM1_ exist","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const globalVariables = runtimeScene.getGame().getVariables();\r","eventsFunctionContext.returnValue = globalVariables.has(eventsFunctionContext.getArgument(\"GlobalVariableName\"));"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"parameters":[{"description":"Name of the global variable","name":"GlobalVariableName","type":"string"}],"objectGroups":[]},{"description":"Check if a scene variable exists.","fullName":"Scene variable exists","functionType":"Condition","group":"Deprecated","name":"C_scene_variable_exist","private":true,"sentence":"If the scene variable _PARAM1_ exist","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnBoolean"},"parameters":["False"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"ExtendedVariables::SceneVariableExist"},"parameters":["","SceneVariableName",""]}],"actions":[{"type":{"value":"SetReturnBoolean"},"parameters":["True"]}]}],"parameters":[{"description":"Name of the scene variable","name":"SceneVariableName","type":"string"}],"objectGroups":[]},{"description":"Check if the scene variable exists.","fullName":"Scene variable exists","functionType":"Condition","group":"Scene variables","name":"SceneVariableExist","sentence":"If the scene variable _PARAM1_ exist","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const sceneVariables = runtimeScene.getVariables();\r","eventsFunctionContext.returnValue = sceneVariables.has(eventsFunctionContext.getArgument(\"SceneVariableName\"));"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"parameters":[{"description":"Name of the scene variable","name":"SceneVariableName","type":"string"}],"objectGroups":[]},{"description":"Check if an object variable exists.","fullName":"Object variable exists","functionType":"Condition","group":"Deprecated","name":"C_object_variable_exist","private":true,"sentence":"Object _PARAM1_ has object variable _PARAM2_","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnBoolean"},"parameters":["False"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"ExtendedVariables::ObjectVariableExist"},"parameters":["","ObjectToCheck","ObjectVariableName",""]}],"actions":[{"type":{"value":"SetReturnBoolean"},"parameters":["True"]}]}],"parameters":[{"description":"Object","name":"ObjectToCheck","type":"objectList"},{"description":"Name of object variable","name":"ObjectVariableName","type":"string"}],"objectGroups":[]},{"description":"Check if an object variable exists.","fullName":"Object variable exists","functionType":"Condition","group":"Variables","name":"ObjectVariableExist","sentence":"Object _PARAM1_ has object variable _PARAM2_","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["let returnValue = true;\r","if (!objects.length) {\r","    returnValue = false;\r","} else {\r","    const objectVariableName = eventsFunctionContext.getArgument(\"ObjectVariableName\");\r","    for (let i = 0; i < objects.length; i++) {\r","        if (!objects[i].hasVariable(objectVariableName)) {\r","            // If any object does NOT have the variable, return false.\r","            returnValue = false;\r","            break;\r","        }\r","    }\r","}\r","\r","eventsFunctionContext.returnValue = returnValue;"],"parameterObjects":"ObjectToCheck","useStrict":true,"eventsSheetExpanded":false}],"parameters":[{"description":"Object","name":"ObjectToCheck","type":"objectList"},{"description":"Name of object variable","name":"ObjectVariableName","type":"string"}],"objectGroups":[]},{"description":"Delete a global variable, removing it from memory.","fullName":"Delete global variable","functionType":"Action","group":"Deprecated","name":"A_Delete_global_variable","private":true,"sentence":"Delete global variable _PARAM1_","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"ExtendedVariables::DeleteGlobalVariable"},"parameters":["","GlobalVariableName",""]}]}],"parameters":[{"description":"Name of the global variable to delete","name":"GlobalVariableName","type":"string"}],"objectGroups":[]},{"description":"Delete the global variable, removing it from memory.","fullName":"Delete global variable","functionType":"Action","group":"Global variables","name":"DeleteGlobalVariable","sentence":"Delete the global variable _PARAM1_ from memory","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":"runtimeScene.getGame().getVariables().remove(eventsFunctionContext.getArgument(\"GlobalVariableName\"));","parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"parameters":[{"description":"Name of the global variable to delete","name":"GlobalVariableName","type":"string"}],"objectGroups":[]},{"description":"Modify the text of a scene variable.","fullName":"String of a scene variable","functionType":"Action","group":"Deprecated","name":"A_Modify_scene_variable_string","private":true,"sentence":"Change the text of scene variable _PARAM1_ to _PARAM2_","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"ExtendedVariables::ModifySceneVariableString"},"parameters":["","SceneVariableName","SceneVariableValue",""]}]}],"parameters":[{"description":"Name of the scene variable","name":"SceneVariableName","type":"string"},{"description":"Value","name":"SceneVariableValue","type":"string"}],"objectGroups":[]},{"description":"Modify the text of a scene variable.","fullName":"String of a scene variable","functionType":"Action","group":"Scene variables","name":"ModifySceneVariableString","sentence":"Change the text of scene variable _PARAM1_ to _PARAM2_","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const variable = runtimeScene.getVariables().get(eventsFunctionContext.getArgument(\"SceneVariableName\"));\r","variable.setString(eventsFunctionContext.getArgument(\"SceneVariableValue\"));"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"parameters":[{"description":"Name of the scene variable","name":"SceneVariableName","type":"string"},{"description":"Value","name":"SceneVariableValue","type":"string"}],"objectGroups":[]},{"description":"Modify the text of a global variable.","fullName":"String of a global variable","functionType":"Action","group":"Global variables","name":"ModifyGlobalVariableString","sentence":"Change the text of global variable _PARAM1_ to _PARAM2_","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const variable = runtimeScene.getGame().getVariables().get(eventsFunctionContext.getArgument(\"GlobalVariableName\"));\r","variable.setString(eventsFunctionContext.getArgument(\"GlobalVariableValue\"));"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"parameters":[{"description":"Name of the global variable","name":"GlobalVariableName","type":"string"},{"description":"Value","name":"GlobalVariableValue","type":"string"}],"objectGroups":[]},{"description":"Modify the value of a global variable.","fullName":"Value of a global variable","functionType":"Action","group":"Deprecated","name":"A_Modify_global_variable","private":true,"sentence":"Change the global variable _PARAM1_ with value: _PARAM2_","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"ExtendedVariables::ModifyGlobalVariable"},"parameters":["","SceneVariableName","SceneVariableValue",""]}]}],"parameters":[{"description":"Name of the global variable","name":"SceneVariableName","type":"string"},{"description":"Value","name":"SceneVariableValue","type":"expression"}],"objectGroups":[]},{"description":"Modify the text of a global variable.","fullName":"String of a global variable","functionType":"Action","group":"Deprecated","name":"A_Modify_global_variable_string","private":true,"sentence":"Change the text of global variable _PARAM1_ to _PARAM2_","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"ExtendedVariables::ModifyGlobalVariableString"},"parameters":["","SceneVariableName","SceneVariableValue",""]}]}],"parameters":[{"description":"Name of the global variable","name":"SceneVariableName","type":"string"},{"description":"Value","name":"SceneVariableValue","type":"string"}],"objectGroups":[]},{"description":"Modify the value of a global variable.","fullName":"Value of a global variable","functionType":"Action","group":"Global variables","name":"ModifyGlobalVariable","sentence":"Change the global variable _PARAM1_ with value: _PARAM2_","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const variable = runtimeScene.getGame().getVariables().get(eventsFunctionContext.getArgument(\"GlobalVariableName\"));\r","variable.setNumber(eventsFunctionContext.getArgument(\"GlobalVariableValue\"));"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"parameters":[{"description":"Name of the global variable","name":"GlobalVariableName","type":"string"},{"description":"Value","name":"GlobalVariableValue","type":"expression"}],"objectGroups":[]},{"description":"Modify the value of a scene variable.","fullName":"Value of a scene variable","functionType":"Action","group":"Deprecated","name":"A_Modify_scene_variable","private":true,"sentence":"Change the scene variable _PARAM1_ with value: _PARAM2_","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"ExtendedVariables::ModifySceneVariable"},"parameters":["","SceneVariableName","SceneVariableValue",""]}]}],"parameters":[{"description":"Name of the scene variable","name":"SceneVariableName","type":"string"},{"description":"Value","name":"SceneVariableValue","type":"expression"}],"objectGroups":[]},{"description":"Modify the value of a scene variable.","fullName":"Value of a scene variable","functionType":"Action","group":"Scene variables","name":"ModifySceneVariable","sentence":"Change the scene variable _PARAM1_ with value: _PARAM2_","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const variable = runtimeScene.getVariables().get(eventsFunctionContext.getArgument(\"SceneVariableName\"));\r","variable.setNumber(eventsFunctionContext.getArgument(\"SceneVariableValue\"));"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"parameters":[{"description":"Name of the scene variable","name":"SceneVariableName","type":"string"},{"description":"Value","name":"SceneVariableValue","type":"expression"}],"objectGroups":[]},{"description":"Delete scene variable, the variable will be deleted from the memory.","fullName":"Delete scene variable","functionType":"Action","group":"Deprecated","name":"A_Delete_scene_variable","private":true,"sentence":"Delete the scene variable _PARAM1_","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"ExtendedVariables::DeleteSceneVariable"},"parameters":["","SceneVariableName",""]}]}],"parameters":[{"description":"Name of the scene variable to delete","name":"SceneVariableName","type":"string"}],"objectGroups":[]},{"description":"Delete the scene variable, the variable will be deleted from the memory.","fullName":"Delete scene variable","functionType":"Action","group":"Scene variables","name":"DeleteSceneVariable","sentence":"Delete the scene variable _PARAM1_ from memory","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":"runtimeScene.getVariables().remove(eventsFunctionContext.getArgument(\"SceneVariableName\"));","parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"parameters":[{"description":"Name of the scene variable to delete","name":"SceneVariableName","type":"string"}],"objectGroups":[]},{"description":"Copy an object variable from one object to another.","fullName":"Copy an object variable","functionType":"Action","group":"Deprecated","name":"A_CopyObjectVariable","private":true,"sentence":"Copy the variable _PARAM1_ of _PARAM2_ to the variable _PARAM3_ of _PARAM4_","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"ExtendedVariables::CopyObjectVariable"},"parameters":["","SourceObject","SourceVariableName","TargetObject","TargetVariableName","no",""]}]}],"parameters":[{"description":"Source object","name":"SourceObject","type":"objectList"},{"description":"Variable to copy","name":"SourceVariableName","type":"string"},{"description":"Destination object","longDescription":"To copy the variable between 2 instances of the same object, the variable has to be copied to another object first.","name":"TargetObject","type":"objectList"},{"description":"Destination variable","name":"TargetVariableName","type":"string"}],"objectGroups":[]},{"description":"Copy the object variable from one object to another.","fullName":"Copy an object variable","functionType":"Action","group":"Variables","name":"CopyObjectVariable","sentence":"Copy the variable _PARAM2_ of _PARAM1_ to the variable _PARAM4_ of _PARAM3_ (clear destination first: _PARAM5_)","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const sourceObject = eventsFunctionContext.getObjects(\"SourceObject\")[0];","const targetObject = eventsFunctionContext.getObjects(\"TargetObject\")[0];","const sourceVariableName = eventsFunctionContext.getArgument(\"SourceVariableName\");","const targetVariableName = eventsFunctionContext.getArgument(\"TargetVariableName\");","const isExactCopy = eventsFunctionContext.getArgument(\"isExactCopy\");","","const sourceVariables = sourceObject.getVariables();","const targetVariables = targetObject.getVariables();","","if (sourceVariables.has(sourceVariableName))","{","    gdjs.Variable.copy","    (","        sourceVariables.get(sourceVariableName),","        targetVariables.get(targetVariableName),","        isExactCopy","    );","}"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"description":"Source object","name":"SourceObject","type":"objectList"},{"description":"Variable to copy","name":"SourceVariableName","type":"string"},{"description":"Destination object","longDescription":"To copy the variable between 2 instances of the same object, the variable has to be copied to another object first.","name":"TargetObject","type":"objectList"},{"description":"Destination variable","name":"TargetVariableName","type":"string"},{"defaultValue":"yes","description":"Clear the destination variable before copying","name":"isExactCopy","optional":true,"type":"yesorno"}],"objectGroups":[]},{"description":"Copy all object variables from one object to another.","fullName":"Copy all object variables","functionType":"Action","group":"Deprecated","name":"A_CopyAllObjectVariables","private":true,"sentence":"Copy all variables from _PARAM1_ to _PARAM2_","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"ExtendedVariables::CopyAllObjectVariables"},"parameters":["","SourceObject","TargetObject","no",""]}]}],"parameters":[{"description":"Source object","name":"SourceObject","type":"objectList"},{"description":"Destination object","name":"TargetObject","type":"objectList"}],"objectGroups":[]},{"description":"Copy all object variables from one object to another.","fullName":"Copy all object variables","functionType":"Action","group":"Variables","name":"CopyAllObjectVariables","sentence":"Copy all variables from object _PARAM1_ to object _PARAM2_ (clear destination first: _PARAM3_)","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["// This JS event use private scope from the API, this can be borken at anytime.","","const sourceObject = eventsFunctionContext.getObjects(\"SourceObject\")[0];","const targetObject = eventsFunctionContext.getObjects(\"TargetObject\")[0];","const isExactCopy = eventsFunctionContext.getArgument(\"isExactCopy\");","","const targetVariables = targetObject.getVariables();","const sourceVariables = sourceObject.getVariables()._variables.items;","for (const variableName in sourceVariables)","{","    if (sourceVariables.hasOwnProperty(variableName))","    {","        gdjs.Variable.copy(sourceVariables[variableName], targetVariables.get(variableName), isExactCopy);","    }","}"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"description":"Source object","name":"SourceObject","type":"objectList"},{"description":"Destination object","name":"TargetObject","type":"objectList"},{"defaultValue":"yes","description":"Clear the destination variable before copying","name":"isExactCopy","optional":true,"type":"yesorno"}],"objectGroups":[]},{"description":"Delete an object variable, removing it from memory.","fullName":"Delete object variable","functionType":"Action","group":"Variables","name":"DeleteObjectVariable","sentence":"Delete for the object _PARAM1_ the object variable _PARAM2_ from the memory","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const object = eventsFunctionContext.getObjects(\"Object\")[0];\r","const objectVariables = object.getVariables();\r","\r","objectVariables.remove(eventsFunctionContext.getArgument(\"VariableName\"));"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"description":"Object","name":"Object","type":"objectList"},{"description":"Name of object variable","name":"VariableName","type":"string"}],"objectGroups":[]},{"description":"Return the text of a global variable.","fullName":"Text of a global variable","functionType":"StringExpression","group":"Global variables","name":"GlobalVariableString","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const globalVariables = runtimeScene.getGame().getVariables();\r","const variableExist = globalVariables.has(eventsFunctionContext.getArgument(\"GlobalVariableName\"));\r","\r","if (variableExist) {\r","    eventsFunctionContext.returnValue = globalVariables.get(eventsFunctionContext.getArgument(\"GlobalVariableName\")).getAsString();\r","}"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"string"},"parameters":[{"description":"Name of the global variable","name":"GlobalVariableName","type":"string"}],"objectGroups":[]},{"description":"Return the text of a scene variable.","fullName":"Text of a scene variable","functionType":"StringExpression","group":"Scene variables","name":"VariableString","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const sceneVariables = runtimeScene.getVariables();\r","const variableExist = sceneVariables.has(eventsFunctionContext.getArgument(\"SceneVariableName\"));\r","\r","if (variableExist) {\r","    eventsFunctionContext.returnValue = sceneVariables.get(eventsFunctionContext.getArgument(\"SceneVariableName\")).getAsString();\r","}"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"string"},"parameters":[{"description":"Name of the scene variable","name":"SceneVariableName","type":"string"}],"objectGroups":[]},{"description":"Return the value of a global variable.","fullName":"Value of a global variable","functionType":"Expression","group":"Global variables","name":"GlobalVariable","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const globalVariables = runtimeScene.getGame().getVariables();\r","const variableExist = globalVariables.has(eventsFunctionContext.getArgument(\"GlobalVariableName\"));\r","\r","if (variableExist) {\r","    eventsFunctionContext.returnValue = globalVariables.get(eventsFunctionContext.getArgument(\"GlobalVariableName\")).getAsNumber();\r","}"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[{"description":"Name of the global variable","name":"GlobalVariableName","type":"string"}],"objectGroups":[]},{"description":"Return the value of a scene variable.","fullName":"Value of a scene variable","functionType":"Expression","group":"Scene variables","name":"Variable","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const sceneVariables = runtimeScene.getVariables();\r","const variableExist = sceneVariables.has(eventsFunctionContext.getArgument(\"SceneVariableName\"));\r","\r","if (variableExist) {\r","    eventsFunctionContext.returnValue = sceneVariables.get(eventsFunctionContext.getArgument(\"SceneVariableName\")).getAsNumber();\r","}"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[{"description":"Name of the scene variable","name":"SceneVariableName","type":"string"}],"objectGroups":[]},{"description":"Copy the global variable to scene. This copy everything from the types to the values.","fullName":"Copy a global variable to scene","functionType":"Action","group":"Convert","name":"CopyGlobalVariableToScene","sentence":"Copy the global variable:_PARAM1_ to a scene variable:_PARAM2_ (clear destination first: _PARAM3_)","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const globalVariable = runtimeScene.getGame().getVariables().get(eventsFunctionContext.getArgument(\"globalVariableName\"));","const sceneVariable = runtimeScene.getVariables().get(eventsFunctionContext.getArgument(\"sceneVariableName\"));","const isExactCopy = eventsFunctionContext.getArgument(\"isExactCopy\");","","gdjs.Variable.copy(globalVariable, sceneVariable, isExactCopy);",""],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"description":"Global variable to copy","name":"globalVariableName","type":"string"},{"description":"Scene variable destination","name":"sceneVariableName","type":"string"},{"defaultValue":"yes","description":"Clear the destination variable before copying","name":"isExactCopy","optional":true,"type":"yesorno"}],"objectGroups":[]},{"description":"Copy the scene variable to global. This copy everything from the types to the values.","fullName":"Copy a scene variable to global ","functionType":"Action","group":"Copy variables","name":"CopySceneVariableToGlobal","sentence":"Copy the scene variable:_PARAM1_ to a global variable:_PARAM2_ (clear destination first: _PARAM3_)","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const sceneVariable = runtimeScene.getVariables().get(eventsFunctionContext.getArgument(\"sceneVariableName\"));","const globalVariable = runtimeScene.getGame().getVariables().get(eventsFunctionContext.getArgument(\"globalVariableName\"));","const isExactCopy = eventsFunctionContext.getArgument(\"isExactCopy\");","","gdjs.Variable.copy(sceneVariable, globalVariable, isExactCopy);"],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"description":"Scene variable to copy","name":"sceneVariableName","type":"string"},{"description":"Global variable destination","name":"globalVariableName","type":"string"},{"defaultValue":"yes","description":"Clear the destination variable before copying","name":"isExactCopy","optional":true,"type":"yesorno"}],"objectGroups":[]}],"eventsBasedBehaviors":[],"eventsBasedObjects":[]},{"author":"","category":"Visual effect","extensionNamespace":"","fullName":"Sprite-based lighting","gdevelopVersion":">=5.5.222","helpPath":"","iconUrl":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjMsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iSWNvbnMiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMzIgMzIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMyIDMyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8cGF0aCBkPSJNMjAsMjRoLThjLTAuNiwwLTEsMC40LTEsMXMwLjQsMSwxLDFoMC4xYzAuMiwyLDEuOSwzLjUsMy45LDMuNXMzLjctMS41LDMuOS0zLjVIMjBjMC42LDAsMS0wLjQsMS0xUzIwLjYsMjQsMjAsMjR6Ii8+DQo8cGF0aCBkPSJNMjIsNS4zYy0xLjktMS43LTQuNS0yLjUtNy0yLjJDMTEsMy41LDcuNyw2LjcsNy4xLDEwLjZjLTAuNCwyLjgsMC40LDUuNiwyLjQsNy43YzEsMSwxLjUsMi40LDEuNSwzLjhjMCwwLjYsMC40LDEsMSwxaDQNCgljLTAuNCwwLTAuOC0wLjMtMC45LTAuN2wtNC0xMWMtMC4yLTAuNCwwLTAuOSwwLjMtMS4xYzAuNC0wLjMsMC44LTAuMywxLjIsMGMyLDEuNSw0LjgsMS41LDYuOCwwYzAuNC0wLjMsMS4xLTAuMiwxLjQsMC4yDQoJYzAuMywwLjQsMC4yLDEuMS0wLjIsMS40Yy0yLDEuNS00LjUsMS45LTYuOCwxLjJsMi4yLDYuMWwxLjYtNC40YzAuMi0wLjUsMC44LTAuOCwxLjMtMC42YzAuNSwwLjIsMC44LDAuOCwwLjYsMS4zbC0yLjUsNw0KCUMxNi44LDIyLjcsMTYuNCwyMywxNiwyM2g0YzAuNiwwLDEtMC40LDEtMWMwLTEuNCwwLjUtMi44LDEuNS0zLjdjMS42LTEuNywyLjUtMy45LDIuNS02LjNDMjUsOS40LDIzLjksNywyMiw1LjN6Ii8+DQo8L3N2Zz4NCg==","name":"SpriteBasedLighting","previewIconUrl":"https://resources.gdevelop-app.com/assets/Icons/Glyphster Pack/Master/SVG/UI Essentials/UI Essentials_bulb.svg","shortDescription":"Make light using sprites.","version":"0.0.1","description":"Make light using sprite objects or any kind. and add the light obstacle behavior to the objects that will be affected by the light.","origin":{"identifier":"SpriteBasedLighting","name":"gdevelop-extension-store"},"tags":["sprite","light","lighting"],"authorIds":["1OgYzWp5UeVPbiWGJwI6vqfgZLC3"],"dependencies":[],"globalVariables":[],"sceneVariables":[],"eventsFunctions":[],"eventsBasedBehaviors":[{"description":"The object that will be the obstacle for the light.","fullName":"Sprite-based light obstacle","name":"Light_Obstacle","objectType":"Sprite","eventsFunctions":[{"description":"Make light using object.","fullName":"Make the light","functionType":"Action","name":"MakeLight","sentence":"Make light using: _PARAM2_ and obstacles: _PARAM0_","events":[{"type":"BuiltinCommonInstructions::ForEach","object":"Object","conditions":[],"actions":[{"type":{"value":"ChangeColor"},"parameters":["Object","Object.VariableString(__SpriteBasedLighting.light) + \";\" +Object.VariableString(__SpriteBasedLighting.light) + \";\" +Object.VariableString(__SpriteBasedLighting.light)"]},{"type":{"value":"ModVarObjet"},"parameters":["Object","__SpriteBasedLighting.light","=","Object.Distance(Light)-500"]}],"events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"VarObjet"},"parameters":["Object","__SpriteBasedLighting.light",">=","-250"]}],"actions":[{"type":{"value":"ModVarObjet"},"parameters":["Object","__SpriteBasedLighting.light","=","-250"]}]}]}],"parameters":[{"description":"Object","name":"Object","supplementaryInformation":"Sprite","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"SpriteBasedLighting::Light_Obstacle","type":"behavior"},{"description":"The light","name":"Light","type":"objectList"},{"description":"Light behavior","name":"Beh","supplementaryInformation":"MakeLight::Light","type":"behavior"}],"objectGroups":[]}],"propertyDescriptors":[],"sharedPropertyDescriptors":[]},{"description":"The object that will act as the light.","fullName":"Sprite-based light","name":"Light","objectType":"","eventsFunctions":[],"propertyDescriptors":[],"sharedPropertyDescriptors":[]}],"eventsBasedObjects":[]},{"author":"","category":"General","extensionNamespace":"","fullName":"Advanced 3D Features","gdevelopVersion":"","helpPath":"https://pandako.itch.io/a3f","iconUrl":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjMsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iSWNvbnMiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMzIgMzIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMyIDMyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KCS5zdDB7ZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDoxMDt9DQoJLnN0MXtmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO30NCgkuc3Qye2ZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLWRhc2hhcnJheTo2LDY7fQ0KCS5zdDN7ZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtZGFzaGFycmF5OjQsNDt9DQoJLnN0NHtmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7fQ0KCS5zdDV7ZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1kYXNoYXJyYXk6My4xMDgxLDMuMTA4MTt9DQoJDQoJCS5zdDZ7ZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDoxMDtzdHJva2UtZGFzaGFycmF5OjQsMzt9DQo8L3N0eWxlPg0KPHBvbHlnb24gY2xhc3M9InN0MCIgcG9pbnRzPSI0LDkuNyA0LDIzLjIgMTYsMzAgMjgsMjMuMiAyOCw5LjcgMTYsMyAiLz4NCjxwb2x5bGluZSBjbGFzcz0ic3QwIiBwb2ludHM9IjQsMTAuMiAxNiwxNyAyOCwxMC4yICIvPg0KPGxpbmUgY2xhc3M9InN0MCIgeDE9IjE2IiB5MT0iMzAiIHgyPSIxNiIgeTI9IjE3Ii8+DQo8L3N2Zz4NCg==","name":"A3F","previewIconUrl":"https://asset-resources.gdevelop.io/public-resources/Icons/Line Hero Pack/Master/SVG/Graphic Design/f4c71080f9213188ee5556b1acb45ad46fe6e5225947301c363105b080fca008_Graphic Design_3d_cube_isometric.svg","shortDescription":"This extension adds features to the built-in 3D.","version":"1.1.0","description":["3D features to be added with this extension.  ","- Lighting","- Shadow","- Local translate and rotate","- Blend mode","- Opacity","- Overlap objects","- Linear interpolation","- Axes helper","- Light helper","- Shadow range helper"],"tags":["3d","movement","rotate","material","light","shadow","camera","opacity"],"authorIds":["Zu55H5hcb9YmZTltIVOTAFDJQyB2"],"dependencies":[],"globalVariables":[],"sceneVariables":[],"eventsFunctions":[{"fullName":"","functionType":"Action","name":"onFirstSceneLoaded","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["gdjs._A3F = {};","gdjs._A3F.MakeUniqueMaterial = function(Obj3D) {","    if (!Obj3D.userData.A3F) {","        Obj3D.userData.A3F = {};","    }","    if (!Obj3D.userData.A3F.UniqueMaterial) {","        Obj3D.userData.A3F.UniqueMaterial = true;","        //","        Obj3D.addEventListener(\"removed\", gdjs._A3F.DisposeUniqueMaterial);","        //","        const CopyMat = {};","        Obj3D.traverse((Child) => {","            if (Child.material) {","                if (Array.isArray(Child.material)) {","                    for (let i = 0; i < Child.material.length; i++) {","                        if (!CopyMat[Child.material[i].uuid]) {","                            CopyMat[Child.material[i].uuid] = Child.material[i].clone();","                        }","                        Child.material[i] = CopyMat[Child.material[i].uuid];","                    }","                } else {","                    if (!CopyMat[Child.material.uuid]) {","                        CopyMat[Child.material.uuid] = Child.material.clone();","                    }","                    Child.material = CopyMat[Child.material.uuid];","                }","            }","        });","    }","};","//","gdjs._A3F.DisposeUniqueMaterial = function(Evt) {","    const Obj3D = Evt.target;// this","    Obj3D.traverse((Child) => {","        if (Child.material) {","            if (Array.isArray(Child.material)) {","                for (let i = 0; i < Child.material.length; i++) {","                    Child.material[i].dispose()","                }","            } else {","                Child.material.dispose()","            }","        }","    });","};","",""],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"parameters":[],"objectGroups":[]},{"description":"Translates the camera along its local axis.","fullName":"↔️Local translate camera by distance","functionType":"Action","name":"LocalTranslateCameraDistance","sentence":"↔️Local translate camera (Axis: _PARAM1_, Distance: _PARAM2_, Layer: _PARAM3_, Camera: _PARAM4_)","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const Axis = eventsFunctionContext.getArgument(\"Axis\");","const Distance = eventsFunctionContext.getArgument(\"Distance\");","const Layer = eventsFunctionContext.getArgument(\"Layer\");","// const CameraNumber = eventsFunctionContext.getArgument(\"CameraNumber\");","","const Camera3D = runtimeScene.getLayer(Layer).getRenderer().getThreeCamera();","if (!Camera3D) {","    return;","}","if (Axis == \"X\") {","    Camera3D.translateX(Distance);","} else if (Axis == \"Y\") {","    Camera3D.translateY(-Distance);","} else {","    Camera3D.translateZ(Distance);","}","runtimeScene.getLayer(Layer)._cameraX = Camera3D.position.x;","runtimeScene.getLayer(Layer)._cameraY = -Camera3D.position.y;","runtimeScene.getLayer(Layer).setCameraZ(Camera3D.position.z, null);",""],"parameterObjects":"Object","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"description":"Axis","name":"Axis","supplementaryInformation":"[\"X\",\"Y\",\"Z\"]","type":"stringWithSelector"},{"description":"Distance (in pixels)","name":"Distance","type":"expression"},{"description":"Layer","name":"Layer","type":"layer"},{"description":"Camera number (default: 0)","name":"CameraNumber","type":"expression"}],"objectGroups":[]},{"description":"Translates the camera along its local axis.","fullName":"↔️Local translate camera by speed","functionType":"Action","name":"LocalTranslateCameraSpeed","sentence":"↔️Local translate camera (Axis: _PARAM1_, Speed: _PARAM2_, Layer: _PARAM3_, Camera: _PARAM4_)","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"A3F::LocalTranslateCameraDistance"},"parameters":["","Axis","Speed * TimeDelta()","Layer","CameraNumber",""]}]}],"parameters":[{"description":"Axis","name":"Axis","supplementaryInformation":"[\"X\",\"Y\",\"Z\"]","type":"stringWithSelector"},{"description":"Speed (in pixels per second)","name":"Speed","type":"expression"},{"description":"Layer","name":"Layer","type":"layer"},{"description":"Camera number (default: 0)","name":"CameraNumber","type":"expression"}],"objectGroups":[]},{"description":"Rotates the camera along its local axis.","fullName":"🔄️Local rotate camera by angle","functionType":"Action","name":"LocalRotateCameraAngle","sentence":"🔄️Local rotate camera (Axis: _PARAM1_, Angle: _PARAM2_, Layer: _PARAM3_, Camera: _PARAM4_)","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const Axis = eventsFunctionContext.getArgument(\"Axis\");","const Angle = eventsFunctionContext.getArgument(\"Angle\");","const Layer = eventsFunctionContext.getArgument(\"Layer\");","// const CameraNumber = eventsFunctionContext.getArgument(\"CameraNumber\");","","const Camera3D = runtimeScene.getLayer(Layer).getRenderer().getThreeCamera();","if (!Camera3D) {","    return;","}","if (Axis == \"X\") {","    Camera3D.rotateX(gdjs.toRad(-Angle));","} else if (Axis == \"Y\") {","    Camera3D.rotateY(gdjs.toRad(Angle));","} else {","    Camera3D.rotateZ(gdjs.toRad(-Angle));","}","runtimeScene.getLayer(Layer).setCameraRotation(gdjs.toDegrees(-Camera3D.rotation.z));"],"parameterObjects":"Object","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"description":"Axis","name":"Axis","supplementaryInformation":"[\"X\",\"Y\",\"Z\"]","type":"stringWithSelector"},{"description":"Angle (in degrees)","name":"Angle","type":"expression"},{"description":"Layer","name":"Layer","type":"layer"},{"description":"Camera number (default: 0)","name":"CameraNumber","type":"expression"}],"objectGroups":[]},{"description":"Rotates the camera along its local axis.","fullName":"🔄️Local rotate camera by speed","functionType":"Action","name":"LocalRotateCameraSpeed","sentence":"🔄️Local rotate camera (Axis: _PARAM1_, Speed: _PARAM2_, Layer: _PARAM3_, Camera: _PARAM4_)","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"A3F::LocalRotateCameraAngle"},"parameters":["","Axis","Speed * TimeDelta()","Layer","CameraNumber",""]}]}],"parameters":[{"description":"Axis","name":"Axis","supplementaryInformation":"[\"X\",\"Y\",\"Z\"]","type":"stringWithSelector"},{"description":"Speed (in degrees per second)","name":"Speed","type":"expression"},{"description":"Layer","name":"Layer","type":"layer"},{"description":"Camera number (default: 0)","name":"CameraNumber","type":"expression"}],"objectGroups":[]},{"fullName":"🔜Linearly interpolate camera","functionType":"Action","name":"LerpCamera","sentence":"🔜Linearly interpolate camera (Layer: _PARAM1_, Camera:_PARAM2_, Target: _PARAM3_, Position: _PARAM5_, Rotation: _PARAM6_, Viewpoint: _PARAM7_)","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const Layer = eventsFunctionContext.getArgument(\"Layer\");","// const CameraNumber = eventsFunctionContext.getArgument(\"CameraNumber\");","const Targets = eventsFunctionContext.getObjects(\"Target\");","const FactorP = eventsFunctionContext.getArgument(\"FactorP\");","const FactorR = eventsFunctionContext.getArgument(\"FactorR\");","const Viewpoint = eventsFunctionContext.getArgument(\"Viewpoint\");","//","const Camera3D = runtimeScene.getLayer(Layer).getRenderer().getThreeCamera();","if (!Camera3D) {","    return;","}","if (Targets.length === 0) {","    return;","}","const Object3D = Targets[0].get3DRendererObject();","//","if (FactorP) {","    const Vec3 = Object3D.position.clone();","    Vec3.y *= -1;","    Camera3D.position.lerp(Vec3, FactorP);","    runtimeScene.getLayer(Layer)._cameraX = Camera3D.position.x;","    runtimeScene.getLayer(Layer)._cameraY = -Camera3D.position.y;","    runtimeScene.getLayer(Layer).setCameraZ(Camera3D.position.z, null);","}","if (FactorR) {","    const Euler = Object3D.rotation.clone();","    Euler.x *= -1;","    Euler.z *= -1;","    const Quaternion = new THREE.Quaternion();","    Quaternion.setFromEuler(Euler);","    //","    if (Viewpoint) {","        const EulerView = new THREE.Euler(gdjs.toRad(90), gdjs.toRad(-90), 0);","        const QuaternionView = new THREE.Quaternion();","        QuaternionView.setFromEuler(EulerView);","        Quaternion.multiply(QuaternionView);","    }","    //","    Camera3D.quaternion.slerp(Quaternion, FactorR);","    runtimeScene.getLayer(Layer).setCameraRotation(gdjs.toDegrees(-Camera3D.rotation.z));","}","",""],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"description":"Layer","name":"Layer","type":"layer"},{"description":"Camera number (default: 0)","name":"CameraNumber","type":"expression"},{"description":"Target 3D Object","name":"Target","type":"objectList"},{"description":"Target 3D capability","name":"TargetCapability3d","supplementaryInformation":"Scene3D::Base3DBehavior","type":"behavior"},{"description":"Position interpolation factor (0 to 1)","longDescription":"Disable with 0","name":"FactorP","type":"expression"},{"description":"Rotation interpolation factor (0 to 1)","longDescription":"Disable with 0","name":"FactorR","type":"expression"},{"defaultValue":"yes","description":"Based on the object's viewpoint","name":"Viewpoint","optional":true,"type":"yesorno"}],"objectGroups":[]},{"description":"Overlay the object on the 3D object.\n⚠️ For objects to overlap correctly, they must be on a different layer than the 3D object.","fullName":"📚Overlap objects","functionType":"Action","group":"Position","name":"OverlapObjects","sentence":"📚Overlap objects (_PARAM1_, Hide: _PARAM2_, Target: _PARAM3_, Offset: _PARAM5_, _PARAM6_, _PARAM7_)","events":[{"type":"BuiltinCommonInstructions::ForEach","object":"AnyObject","conditions":[],"actions":[],"events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const AnyObject = objects[0];","const Hide = eventsFunctionContext.getArgument(\"Hide\");","const Object3D = eventsFunctionContext.getObjects(\"Object3D\")[0];","const OffsetX = eventsFunctionContext.getArgument(\"OffsetX\");","const OffsetY = eventsFunctionContext.getArgument(\"OffsetY\");","const OffsetZ = eventsFunctionContext.getArgument(\"OffsetZ\");","const Offset3D = new THREE.Vector3(OffsetX, OffsetY, OffsetZ);","if (!Object3D) {","    return;","}","const Layer3D = Object3D.layer;","const RendererObject3D = Object3D.get3DRendererObject();","const Camera3D = runtimeScene.getLayer(Layer3D).getRenderer().getThreeCamera();","if (!Camera3D) {","    return;","}","//","let Position3D;","if (RendererObject3D) {","    // 3D","    Position3D = RendererObject3D.position.clone();","} else {","    // 2D","    Position3D = new THREE.Vector3(Object3D.getX(), Object3D.getY(), 0);","}","Position3D.add(Offset3D);","Position3D.y *= -1;","//","const Project = Position3D.clone().project(Camera3D);","const GameResolutionWidth = runtimeScene.getGame().getGameResolutionWidth();","const GameResolutionHeight = runtimeScene.getGame().getGameResolutionHeight();","const PointX = (GameResolutionWidth / 2) * (Project.x + 1.0);","const PointY = (GameResolutionHeight / 2) * ((Project.y * -1) + 1.0);","//","if (Hide) {","    const Frustum = new THREE.Frustum();","    const CloneCamera = Camera3D.clone();","    CloneCamera.rotateZ(gdjs.toRad(180));","    Frustum.setFromProjectionMatrix(new THREE.Matrix4().multiplyMatrices(CloneCamera.projectionMatrix, CloneCamera.matrixWorldInverse));","    const Within = Frustum.containsPoint(Position3D);","    AnyObject.hide(!Within);","}","//","AnyObject.setPosition(PointX, PointY);","",""],"parameterObjects":"AnyObject","useStrict":true,"eventsSheetExpanded":true}]}],"parameters":[{"description":"Any object","name":"AnyObject","type":"objectList"},{"defaultValue":"yes","description":"Hide when behind the 3D camera","longDescription":"Hides the 2D object when the 3D object is behind the 3D camera.","name":"Hide","optional":true,"type":"yesorno"},{"description":"Target 3D object","name":"Object3D","type":"objectList"},{"description":"3D Capability","name":"Capability3D","supplementaryInformation":"Scene3D::Base3DBehavior","type":"behavior"},{"description":"X Offset","name":"OffsetX","type":"expression"},{"description":"Y Offset","name":"OffsetY","type":"expression"},{"description":"Z Offset","name":"OffsetZ","type":"expression"}],"objectGroups":[]},{"description":"Translates the 3D object along its local axis.","fullName":"↔️Local translate by distance","functionType":"Action","group":"Position","name":"LocalTranslateDistance","sentence":"↔️Local translates (_PARAM1_, Axis: _PARAM3_, Distance: _PARAM4_)","events":[{"type":"BuiltinCommonInstructions::ForEach","object":"Object","conditions":[],"actions":[],"events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const Object2D = objects[0];","const Object3D = Object2D.get3DRendererObject();","const Axis = eventsFunctionContext.getArgument(\"Axis\");","const Distance = eventsFunctionContext.getArgument(\"Distance\");","","Object3D.updateMatrixWorld(false);","const Elements = Object3D.matrixWorld.elements;","let WorldDirection = new THREE.Vector3();","if (Axis == \"X\") {","    WorldDirection.set(Elements[0], Elements[1], Elements[2]);","    WorldDirection = WorldDirection.normalize();","} else if (Axis == \"Y\") {","    WorldDirection.set(Elements[4], Elements[5], Elements[6]);","    WorldDirection = WorldDirection.normalize();","} else {","    Object3D.getWorldDirection(WorldDirection);","}","Object2D.setX(Object2D.getX() + (WorldDirection.x * Distance));","Object2D.setY(Object2D.getY() + (WorldDirection.y * Distance * -1));","Object2D.setZ(Object2D.getZ() + (WorldDirection.z * Distance));"],"parameterObjects":"Object","useStrict":true,"eventsSheetExpanded":true}]}],"parameters":[{"description":"Object","name":"Object","type":"objectList"},{"description":"3D capability","name":"Capability3d","supplementaryInformation":"Scene3D::Base3DBehavior","type":"behavior"},{"description":"Axis","name":"Axis","supplementaryInformation":"[\"X\",\"Y\",\"Z\"]","type":"stringWithSelector"},{"description":"Distance (in pixels)","name":"Distance","type":"expression"}],"objectGroups":[]},{"description":"Translates the 3D object along its local axis.","fullName":"↔️Local translate by speed","functionType":"Action","group":"Position","name":"LocalTranslateSpeed","sentence":"↔️Local translates (_PARAM1_, Axis: _PARAM3_, Speed: _PARAM4_)","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"A3F::LocalTranslateDistance"},"parameters":["Object","Object","Capability3d","Axis","Speed * TimeDelta()",""]}]}],"parameters":[{"description":"Object","name":"Object","type":"objectList"},{"description":"3D capability","name":"Capability3d","supplementaryInformation":"Scene3D::Base3DBehavior","type":"behavior"},{"description":"Axis","name":"Axis","supplementaryInformation":"[\"X\",\"Y\",\"Z\"]","type":"stringWithSelector"},{"description":"Speed (in pixels per second)","name":"Speed","type":"expression"}],"objectGroups":[]},{"description":"Rotates the 3D object along its local axis.","fullName":"🔄️Local rotate by angle","functionType":"Action","group":"Angle","name":"LocalRotateAngle","sentence":"🔄️Local rotates (_PARAM1_, Axis: _PARAM3_, Degrees: _PARAM4_)","events":[{"type":"BuiltinCommonInstructions::ForEach","object":"Object","conditions":[],"actions":[],"events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const Object2D = objects[0];","const Object3D = Object2D.get3DRendererObject();","const Axis = eventsFunctionContext.getArgument(\"Axis\");","const Angle = eventsFunctionContext.getArgument(\"Angle\");","","if (Axis == \"X\") {","    Object3D.rotateX(gdjs.toRad(Angle));","} else if (Axis == \"Y\") {","    Object3D.rotateY(gdjs.toRad(Angle));","} else {","    Object3D.rotateZ(gdjs.toRad(Angle));","}","const DegreesX = gdjs.toDegrees(Object3D.rotation.x);","const DegreesY = gdjs.toDegrees(Object3D.rotation.y);","const DegreesZ = gdjs.toDegrees(Object3D.rotation.z);","Object2D.setRotationX(DegreesX);","Object2D.setRotationY(DegreesY);","Object2D.setAngle(DegreesZ);"],"parameterObjects":"Object","useStrict":true,"eventsSheetExpanded":true}]}],"parameters":[{"description":"Object","name":"Object","type":"objectList"},{"description":"3D capability","name":"Capability3d","supplementaryInformation":"Scene3D::Base3DBehavior","type":"behavior"},{"description":"Axis","name":"Axis","supplementaryInformation":"[\"X\",\"Y\",\"Z\"]","type":"stringWithSelector"},{"description":"Angle (in degrees)","name":"Angle","type":"expression"}],"objectGroups":[]},{"description":"Rotates the 3D object along its local axis.","fullName":"🔄️Local rotate by speed","functionType":"Action","group":"Angle","name":"LocalRotateSpeed","sentence":"🔄️Local rotates (_PARAM1_, Axis: _PARAM3_, Speed: _PARAM4_)","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"A3F::LocalRotateAngle"},"parameters":["Object","Object","Capability3d","Axis","Speed * TimeDelta()",""]}]}],"parameters":[{"description":"Object","name":"Object","type":"objectList"},{"description":"3D capability","name":"Capability3d","supplementaryInformation":"Scene3D::Base3DBehavior","type":"behavior"},{"description":"Axis","name":"Axis","supplementaryInformation":"[\"X\",\"Y\",\"Z\"]","type":"stringWithSelector"},{"description":"Speed (in degrees per second)","name":"Speed","type":"expression"}],"objectGroups":[]},{"fullName":"🔜Linearly interpolate 3D object","functionType":"Action","group":"Position","name":"LerpObject","sentence":"🔜Linearly interpolate 3D object (_PARAM1_, Target: _PARAM3_, Position: _PARAM5_, Rotation: _PARAM6_)","events":[{"type":"BuiltinCommonInstructions::ForEach","object":"Object","conditions":[],"actions":[],"events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const Object2D = objects[0];","const Object3D = Object2D.get3DRendererObject();","const Targets = eventsFunctionContext.getObjects(\"Target\");","const FactorP = eventsFunctionContext.getArgument(\"FactorP\");","const FactorR = eventsFunctionContext.getArgument(\"FactorR\");","const Viewpoint = eventsFunctionContext.getArgument(\"Viewpoint\");","//","if (Targets.length === 0) {","    return;","}","const Target3D = Targets[0].get3DRendererObject();","//","if (FactorP) {","    Object3D.position.lerp(Target3D.position, FactorP);","    //","    Object2D.x = Object3D.position.x;","    Object2D.y = Object3D.position.y;","    Object2D.setZ(Object3D.position.z);","}","if (FactorR) {","    Object3D.quaternion.slerp(Target3D.quaternion, FactorR);","    //","    Object2D._rotationX = gdjs.toDegrees(Object3D.rotation.x);","    Object2D._rotationY = gdjs.toDegrees(Object3D.rotation.y);","    Object2D.setAngle(gdjs.toDegrees(Object3D.rotation.z));","}","",""],"parameterObjects":"Object","useStrict":true,"eventsSheetExpanded":true}]}],"parameters":[{"description":"Object","name":"Object","type":"objectList"},{"description":"3D capability","name":"Capability3d2","supplementaryInformation":"Scene3D::Base3DBehavior","type":"behavior"},{"description":"Target 3D Object","name":"Target","type":"objectList"},{"description":"Target 3D capability","name":"TargetCapability3d2","supplementaryInformation":"Scene3D::Base3DBehavior","type":"behavior"},{"description":"Position interpolation factor (0 to 1)","longDescription":"Disable with 0","name":"FactorP","type":"expression"},{"description":"Rotation interpolation factor (0 to 1)","longDescription":"Disable with 0","name":"FactorR","type":"expression"}],"objectGroups":[]},{"fullName":"👀Look at position","functionType":"Action","group":"Angle","name":"LookAtPosition","sentence":"👀Look at position (_PARAM1_, Position: _PARAM3_, _PARAM4_, _PARAM5_)","events":[{"type":"BuiltinCommonInstructions::ForEach","object":"Object","conditions":[],"actions":[],"events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const Object2D = objects[0];","const Object3D = Object2D.get3DRendererObject();","const Scene = runtimeScene.getLayer(Object2D.getLayer()).getRenderer().getThreeScene();","const X = eventsFunctionContext.getArgument(\"X\");","const Y = eventsFunctionContext.getArgument(\"Y\");","const Z = eventsFunctionContext.getArgument(\"Z\");","//","Scene.scale.y = 1;","Object3D.up.set(0, 0, 1);","Object3D.lookAt(X, Y, Z);","Scene.scale.y = -1;","Object3D.up.set(0, 1, 0);","Object3D.rotateZ(-1.5707963267948966);//gdjs.toRad(90)","Object3D.rotateY(-1.5707963267948966);//gdjs.toRad(90)","//","Object2D._rotationX = gdjs.toDegrees(Object3D.rotation.x);","Object2D._rotationY = gdjs.toDegrees(Object3D.rotation.y);","Object2D.setAngle(gdjs.toDegrees(Object3D.rotation.z));",""],"parameterObjects":"Object","useStrict":true,"eventsSheetExpanded":true}]}],"parameters":[{"description":"Object","name":"Object","type":"objectList"},{"description":"3D capability","name":"Capability3d","supplementaryInformation":"Scene3D::Base3DBehavior","type":"behavior"},{"description":"X position","name":"X","type":"expression"},{"description":"Y position","name":"Y","supplementaryInformation":"Scene3D::Base3DBehavior","type":"expression"},{"description":"Z position","name":"Z","type":"expression"}],"objectGroups":[]},{"fullName":"👀Look at 3D object","functionType":"Action","group":"Angle","name":"LookAtObject","sentence":"👀Look at 3D object (_PARAM1_, Target: _PARAM3_, _PARAM5_)","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"CompareArgumentAsString"},"parameters":["\"TargetPoint\"","=","\"Center point\""]}],"actions":[{"type":{"value":"A3F::LookAtPosition"},"parameters":["","Object","Capability3d","Target.CenterX()","Target.CenterY()","Target.TargetCapability3d::CenterZ()",""]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"CompareArgumentAsString"},"parameters":["\"TargetPoint\"","!=","\"Center point\""]}],"actions":[{"type":{"value":"A3F::LookAtPosition"},"parameters":["","Object","Capability3d","Target.X()","Target.Y()","Target.TargetCapability3d::Z()",""]}]}],"parameters":[{"description":"Object","name":"Object","type":"objectList"},{"description":"3D capability","name":"Capability3d","supplementaryInformation":"Scene3D::Base3DBehavior","type":"behavior"},{"description":"Target 3D Object","name":"Target","type":"objectList"},{"description":"Target 3D capability","name":"TargetCapability3d","supplementaryInformation":"Scene3D::Base3DBehavior","type":"behavior"},{"description":"The point of the target 3D object to look at","name":"TargetPoint","supplementaryInformation":"[\"Center point\",\"Origin point\"]","type":"stringWithSelector"}],"objectGroups":[]},{"fullName":"🛟Add Axes Helper","functionType":"Action","group":"Debug","name":"AddAxesHelper","sentence":"🛟Add axes helper (_PARAM1_, _PARAM2_)","events":[{"type":"BuiltinCommonInstructions::ForEach","object":"Object","conditions":[],"actions":[],"events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const Object3D = objects[0].get3DRendererObject();","//","const AxesHelper = new THREE.AxesHelper(2);","AxesHelper.name = objects[0].name + objects[0].id + \"_AxesHelper\";","Object3D.add(AxesHelper);"],"parameterObjects":"Object","useStrict":true,"eventsSheetExpanded":true}]}],"parameters":[{"description":"3D object","name":"Object","type":"objectList"},{"description":"3D capability","name":"Capability3d","supplementaryInformation":"Scene3D::Base3DBehavior","type":"behavior"}],"objectGroups":[]},{"description":"Change the blend mode of the 3D objects and all their children.\nThis affects all 3d objects that use the same material.","fullName":"🧱Change blend mode V1 (Deprecated)","functionType":"Action","group":"Effects","name":"ChangeBlendMode","sentence":"⚠️🧱Change blend mode V1 (_PARAM1_, Blend: _PARAM3_)","events":[{"type":"BuiltinCommonInstructions::ForEach","object":"Object","conditions":[],"actions":[],"events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const Object2D = objects[0];\r","const Object3D = Object2D.get3DRendererObject();\r","const BlendMode = eventsFunctionContext.getArgument(\"Blend\");\r","//\r","//Blend mode\r","let Blend = null;//THREE.NoBlending === 0\r","if (BlendMode == \"Normal\") {\r","    Blend = THREE.NormalBlending;\r","} else if (BlendMode == \"Additive\") {\r","    Blend = THREE.AdditiveBlending;\r","} else if (BlendMode == \"Subtractive\") {\r","    Blend = THREE.SubtractiveBlending;\r","} else if (BlendMode == \"Multiply\") {\r","    Blend = THREE.MultiplyBlending;\r","}\r","if (Blend) {\r","    Object3D.traverse((Child) => {\r","        if (Child.material) {\r","            if (Array.isArray(Child.material)) {\r","                for (let i = 0; i < Child.material.length; i++) {\r","                    Child.material[i].blending = Blend;\r","                }\r","            } else {\r","                Child.material.blending = Blend;\r","            }\r","        }\r","    });\r","}"],"parameterObjects":"Object","useStrict":true,"eventsSheetExpanded":true}]}],"parameters":[{"description":"Object","name":"Object","type":"objectList"},{"description":"3D capability","name":"Capability3d","supplementaryInformation":"Scene3D::Base3DBehavior","type":"behavior"},{"description":"Blend mode","name":"Blend","supplementaryInformation":"[\"Keep model blend mode\",\"Normal\",\"Additive\",\"Subtractive\",\"Multiply\"]","type":"stringWithSelector"}],"objectGroups":[]},{"description":"Change the blend mode of the 3D objects and all their children.\nThis affects all 3d objects that use the same material.","fullName":"🧱Change blend mode","functionType":"Action","group":"Effects","name":"ChangeBlendModeV2","sentence":"🧱Change blend mode (_PARAM1_, Blend: _PARAM3_, Unique: _PARAM4_)","events":[{"type":"BuiltinCommonInstructions::ForEach","object":"Object","conditions":[],"actions":[],"events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const Object2D = objects[0];\r","const Object3D = Object2D.get3DRendererObject();\r","const BlendMode = eventsFunctionContext.getArgument(\"Blend\");\r","const Unique = eventsFunctionContext.getArgument(\"Unique\");\r","//\r","if (Unique) {\r","    gdjs._A3F.MakeUniqueMaterial(Object3D);\r","}\r","//\r","//Blend mode\r","let Blend = null;//THREE.NoBlending === 0\r","if (BlendMode == \"Normal\") {\r","    Blend = THREE.NormalBlending;\r","} else if (BlendMode == \"Additive\") {\r","    Blend = THREE.AdditiveBlending;\r","} else if (BlendMode == \"Subtractive\") {\r","    Blend = THREE.SubtractiveBlending;\r","} else if (BlendMode == \"Multiply\") {\r","    Blend = THREE.MultiplyBlending;\r","}\r","if (Blend) {\r","    Object3D.traverse((Child) => {\r","        if (Child.material) {\r","            if (Array.isArray(Child.material)) {\r","                for (let i = 0; i < Child.material.length; i++) {\r","                    Child.material[i].blending = Blend;\r","                }\r","            } else {\r","                Child.material.blending = Blend;\r","            }\r","        }\r","    });\r","}"],"parameterObjects":"Object","useStrict":true,"eventsSheetExpanded":true}]}],"parameters":[{"description":"Object","name":"Object","type":"objectList"},{"description":"3D capability","name":"Capability3d","supplementaryInformation":"Scene3D::Base3DBehavior","type":"behavior"},{"description":"Blend mode","name":"Blend","supplementaryInformation":"[\"Keep model blend mode\",\"Normal\",\"Additive\",\"Subtractive\",\"Multiply\"]","type":"stringWithSelector"},{"defaultValue":"yes","description":"Make the material unique to this object","longDescription":"If No, it will affect all 3D objects that use the same material.","name":"Unique","optional":true,"type":"yesorno"}],"objectGroups":[]},{"description":"Returns the opacity of the 3D object, or the first opacity found among its children.","fullName":"🥛Opacity","functionType":"Expression","group":"Visibility","name":"Opacity","sentence":"🥛Opacity (_PARAM1_)","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["eventsFunctionContext.returnValue = 255;","if (objects.length == 0) {","    return;","}","let Opacity = null;","const Object2D = objects[0];","const Object3D = Object2D.get3DRendererObject();","//","if (Object3D) {","    Object3D.traverse((Child) => {","        if (Opacity === null) {","            if (Child.material) {","                if (Array.isArray(Child.material)) {","                    Opacity = Child.material[0].opacity;","                } else {","                    Opacity = Child.material.opacity;","                }","            }","        }","    });","}","Opacity = (Opacity === null) ? 1 : Opacity;","Opacity *= 255;","eventsFunctionContext.returnValue = Opacity;","",""],"parameterObjects":"Object","useStrict":true,"eventsSheetExpanded":true}],"expressionType":{"type":"expression"},"parameters":[{"description":"Object","name":"Object","type":"objectList"}],"objectGroups":[]},{"description":"Check the opacity of the 3D object, or the first opacity found among its children.\nThis condition can be used for non-3D objects as well, but in those cases the opacity is always compared as 255.","fullName":"🥛Check opacity","functionType":"Condition","group":"Visibility","name":"CheckOpacity","sentence":"🥛Check opacity (_PARAM1_, _PARAM3_, Opacity: _PARAM4_)","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["if (objects.length == 0) {","    return;","}","const ObjectsLists = eventsFunctionContext.getObjectsLists(\"Object\");","const Operator = eventsFunctionContext.getArgument(\"Operator\");","const TargetOpacity = eventsFunctionContext.getArgument(\"Opacity\") / 255;","//","eventsFunctionContext.returnValue = gdjs.evtTools.object.pickObjectsIf((Obj, Argument) => {","    let Opacity = null;","    const Object2D = Obj;","    const Object3D = Object2D.get3DRendererObject();","    //","    if (Object3D) {","        Object3D.traverse((Child) => {","            if (Opacity === null) {","                if (Child.material) {","                    if (Array.isArray(Child.material)) {","                        Opacity = Child.material[0].opacity;","                    } else {","                        Opacity = Child.material.opacity;","                    }","                }","            }","        });","    }","    Opacity = (Opacity === null) ? 1 : Opacity;","    //","    if (Operator == \"=\") {","        return (Opacity == TargetOpacity);","    } else if (Operator == \"<\") {","        return (Opacity < TargetOpacity);","    } else if (Operator == \">\") {","        return (Opacity > TargetOpacity);","    } else if (Operator == \"≤\") {","        return (Opacity <= TargetOpacity);","    } else if (Operator == \"≥\") {","        return (Opacity >= TargetOpacity);","    } else {","        // ≠","        return (Opacity != TargetOpacity);","    }","}, ObjectsLists, false, null);","",""],"parameterObjects":"Object","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"description":"Object","name":"Object","type":"objectList"},{"description":"3D capability","name":"Capability3d","supplementaryInformation":"Scene3D::Base3DBehavior","type":"behavior"},{"description":"Operator","name":"Operator","supplementaryInformation":"[\"=\",\"<\",\">\",\"≤\",\"≥\",\"≠\"]","type":"stringWithSelector"},{"description":"Opacity (0 to 255)","name":"Opacity","type":"expression"}],"objectGroups":[]},{"description":"Change the opacity of the 3D objects and all their children.\nThis affects all 3D objects that use the same material.","fullName":"🥛Change opacity V1 (Deprecated)","functionType":"Action","group":"Visibility","name":"ChangeOpacity","sentence":"⚠️🥛Change opacity V1 (_PARAM1_, _PARAM3_, Opacity: _PARAM4_)","events":[{"type":"BuiltinCommonInstructions::ForEach","object":"Object","conditions":[],"actions":[],"events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const Object2D = objects[0];\r","const Object3D = Object2D.get3DRendererObject();\r","const Operator = eventsFunctionContext.getArgument(\"Operator\");\r","const Opacity = eventsFunctionContext.getArgument(\"Opacity\") / 255;\r","//\r","Object3D.traverse((Child) => {\r","    if (Child.material) {\r","        if (Array.isArray(Child.material)) {\r","            for (let i = 0; i < Child.material.length; i++) {\r","                if (Operator == \"+\") {\r","                    Child.material[i].opacity += Opacity;\r","                } else if (Operator == \"-\") {\r","                    Child.material[i].opacity -= Opacity;\r","                } else if (Operator == \"*\") {\r","                    Child.material[i].opacity *= Opacity;\r","                } else if (Operator == \"/\") {\r","                    Child.material[i].opacity /= Opacity;\r","                } else {\r","                    // =\r","                    Child.material[i].opacity = Opacity;\r","                }\r","                const Transparent = (Child.material[i].opacity < 1);\r","                if (Child.material[i].transparent !== Transparent) {\r","                    Child.material[i].transparent = Transparent;\r","                    Child.material[i].needsUpdate = true;\r","                }\r","            }\r","        } else {\r","            if (Operator == \"+\") {\r","                Child.material.opacity += Opacity;\r","            } else if (Operator == \"-\") {\r","                Child.material.opacity -= Opacity;\r","            } else if (Operator == \"*\") {\r","                Child.material.opacity *= Opacity;\r","            } else if (Operator == \"/\") {\r","                Child.material.opacity /= Opacity;\r","            } else {\r","                // =\r","                Child.material.opacity = Opacity;\r","            }\r","            const Transparent = (Child.material.opacity < 1);\r","            if (Child.material.transparent !== Transparent) {\r","                Child.material.transparent = Transparent;\r","                Child.material.needsUpdate = true;\r","            }\r","        }\r","    }\r","});\r","\r",""],"parameterObjects":"Object","useStrict":true,"eventsSheetExpanded":true}]}],"parameters":[{"description":"Object","name":"Object","type":"objectList"},{"description":"3D capability","name":"Capability3d","supplementaryInformation":"Scene3D::Base3DBehavior","type":"behavior"},{"description":"Operator","name":"Operator","supplementaryInformation":"[\"=\",\"+\",\"-\",\"*\",\"/\"]","type":"stringWithSelector"},{"description":"Opacity (0 to 255)","name":"Opacity","supplementaryInformation":"[\"Keep model blend mode\",\"Normal\",\"Additive\",\"Subtractive\",\"Multiply\"]","type":"expression"}],"objectGroups":[]},{"description":"Change the opacity of the 3D objects and all their children.","fullName":"🥛Change opacity","functionType":"Action","group":"Visibility","name":"ChangeOpacityV2","sentence":"🥛Change opacity (_PARAM1_, _PARAM3_, Opacity: _PARAM4_, Unique: _PARAM5_)","events":[{"type":"BuiltinCommonInstructions::ForEach","object":"Object","conditions":[],"actions":[],"events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const Object2D = objects[0];\r","const Object3D = Object2D.get3DRendererObject();\r","const Operator = eventsFunctionContext.getArgument(\"Operator\");\r","const Opacity = eventsFunctionContext.getArgument(\"Opacity\") / 255;\r","const Unique = eventsFunctionContext.getArgument(\"Unique\");\r","//\r","if (Unique) {\r","    gdjs._A3F.MakeUniqueMaterial(Object3D);\r","}\r","//\r","Object3D.traverse((Child) => {\r","    if (Child.material) {\r","        if (Array.isArray(Child.material)) {\r","            for (let i = 0; i < Child.material.length; i++) {\r","                if (Operator == \"+\") {\r","                    Child.material[i].opacity += Opacity;\r","                } else if (Operator == \"-\") {\r","                    Child.material[i].opacity -= Opacity;\r","                } else if (Operator == \"*\") {\r","                    Child.material[i].opacity *= Opacity;\r","                } else if (Operator == \"/\") {\r","                    Child.material[i].opacity /= Opacity;\r","                } else {\r","                    // =\r","                    Child.material[i].opacity = Opacity;\r","                }\r","                const Transparent = (Child.material[i].opacity < 1);\r","                if (Child.material[i].transparent !== Transparent) {\r","                    Child.material[i].transparent = Transparent;\r","                    Child.material[i].needsUpdate = true;\r","                }\r","            }\r","        } else {\r","            if (Operator == \"+\") {\r","                Child.material.opacity += Opacity;\r","            } else if (Operator == \"-\") {\r","                Child.material.opacity -= Opacity;\r","            } else if (Operator == \"*\") {\r","                Child.material.opacity *= Opacity;\r","            } else if (Operator == \"/\") {\r","                Child.material.opacity /= Opacity;\r","            } else {\r","                // =\r","                Child.material.opacity = Opacity;\r","            }\r","            const Transparent = (Child.material.opacity < 1);\r","            if (Child.material.transparent !== Transparent) {\r","                Child.material.transparent = Transparent;\r","                Child.material.needsUpdate = true;\r","            }\r","        }\r","    }\r","});\r","\r",""],"parameterObjects":"Object","useStrict":true,"eventsSheetExpanded":true}]}],"parameters":[{"description":"Object","name":"Object","type":"objectList"},{"description":"3D capability","name":"Capability3d","supplementaryInformation":"Scene3D::Base3DBehavior","type":"behavior"},{"description":"Operator","name":"Operator","supplementaryInformation":"[\"=\",\"+\",\"-\",\"*\",\"/\"]","type":"stringWithSelector"},{"description":"Opacity (0 to 255)","name":"Opacity","supplementaryInformation":"[\"Keep model blend mode\",\"Normal\",\"Additive\",\"Subtractive\",\"Multiply\"]","type":"expression"},{"defaultValue":"yes","description":"Make the material unique to this object","longDescription":"If No, it will affect all 3D objects that use the same material.","name":"Unique","optional":true,"type":"yesorno"}],"objectGroups":[]},{"description":"Change the shadow settings of 3D objects.\nIf both \"Cast Shadow\" and \"Receive Shadow\" are enabled, striped patterns are likely to occur in the shadow.","fullName":"👤Change 3D shadow","functionType":"Action","group":"Effects","name":"ChangeShadow","sentence":"👤Change 3D shadow (_PARAM1_, Cast: _PARAM3_, Receive: _PARAM4_)","events":[{"type":"BuiltinCommonInstructions::ForEach","object":"Object","conditions":[],"actions":[],"events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const Object2D = objects[0];","const Object3D = Object2D.get3DRendererObject();","const CastShadow = eventsFunctionContext.getArgument(\"CastShadow\");","const ReceiveShadow = eventsFunctionContext.getArgument(\"ReceiveShadow\");","//","Object3D.traverse((Child) => {","    if (Child.isMesh) {","        Child.castShadow = CastShadow;","        Child.receiveShadow = ReceiveShadow;","    }","});","",""],"parameterObjects":"Object","useStrict":true,"eventsSheetExpanded":true}]}],"parameters":[{"description":"Object","name":"Object","type":"objectList"},{"description":"3D capability","name":"Capability3d","supplementaryInformation":"Scene3D::Base3DBehavior","type":"behavior"},{"description":"Cast Shadow","name":"CastShadow","supplementaryInformation":"scene3D Object ID","type":"yesorno"},{"description":"Receive Shadow","name":"ReceiveShadow","type":"yesorno"}],"objectGroups":[]}],"eventsBasedBehaviors":[{"description":"Use this when you want to set the initial properties of a 3D object.","fullName":"Advanced 3D Initial Properties","name":"A3I","objectType":"","eventsFunctions":[{"fullName":"","functionType":"Action","name":"onCreated","sentence":"","events":[{"disabled":true,"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const Object2D = objects[0];","const Object3D = Object2D.get3DRendererObject();","const Behavior = Object2D.getBehavior(\"A3F\");","//","//Axes helper","if (Behavior._getAxesHelper()) {","    const AxesHelper = new THREE.AxesHelper(2);","    AxesHelper.name = Object2D.name + Object2D.id + \"_AxesHelper\";","    Object3D.add(AxesHelper);","}","//","//Blend mode","let Blend = null;//THREE.NoBlending === 0","if (Behavior._getBlend() == \"Normal\") {","    Blend = THREE.NormalBlending;","} else if (Behavior._getBlend() == \"Additive\") {","    Blend = THREE.AdditiveBlending;","} else if (Behavior._getBlend() == \"Subtractive\") {","    Blend = THREE.SubtractiveBlending;","} else if (Behavior._getBlend() == \"Multiply\") {","    Blend = THREE.MultiplyBlending;","}","if (Blend) {","    Object3D.traverse((Child) => {","        if (Child.material) {","            if (Array.isArray(Child.material)) {","                for (let i = 0; i < Child.material.length; i++) {","                    Child.material[i].blending = Blend;","                }","            } else {","                Child.material.blending = Blend;","            }","        }","    });","}"],"parameterObjects":"Object","useStrict":true,"eventsSheetExpanded":false},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"A3F::A3I::PropertyAxesHelper"},"parameters":["Object","Behavior"]}],"actions":[{"type":{"value":"A3F::AddAxesHelper"},"parameters":["","Object","Capability3d",""]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"A3F::A3I::PropertyCastShadow"},"parameters":["Object","Behavior"]},{"type":{"inverted":true,"value":"A3F::A3I::PropertyReceiveShadow"},"parameters":["Object","Behavior"]}],"actions":[{"type":{"value":"A3F::ChangeShadow"},"parameters":["","Object","Capability3d","yes","",""]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":true,"value":"A3F::A3I::PropertyCastShadow"},"parameters":["Object","Behavior"]},{"type":{"value":"A3F::A3I::PropertyReceiveShadow"},"parameters":["Object","Behavior"]}],"actions":[{"type":{"value":"A3F::ChangeShadow"},"parameters":["","Object","Capability3d","no","yes",""]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"A3F::A3I::PropertyCastShadow"},"parameters":["Object","Behavior"]},{"type":{"value":"A3F::A3I::PropertyReceiveShadow"},"parameters":["Object","Behavior"]}],"actions":[{"type":{"value":"A3F::ChangeShadow"},"parameters":["","Object","Capability3d","yes","yes",""]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"A3F::ChangeBlendMode"},"parameters":["","Object","Capability3d","Blend",""]},{"type":{"value":"A3F::ChangeOpacity"},"parameters":["","Object","Capability3d","\"=\"","Opacity",""]}]}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"A3F::A3I","type":"behavior"}],"objectGroups":[]}],"propertyDescriptors":[{"value":"","type":"Behavior","label":"3D capability","description":"","group":"","extraInformation":["Scene3D::Base3DBehavior"],"name":"Capability3d"},{"value":"","type":"Boolean","label":"Axes helper","description":"","group":"Debug","extraInformation":[],"name":"AxesHelper"},{"value":"Keep model blend mode","type":"Choice","label":"Blend mode","description":"This affects all 3d objects that use the same material.","group":"Effect","extraInformation":["Keep model blend mode","Normal","Additive","Subtractive","Multiply"],"name":"Blend"},{"value":"255","type":"Number","label":"Opacity (0 to 255)","description":"This affects all 3d objects that use the same material.","group":"Visibility","extraInformation":[],"name":"Opacity"},{"value":"false","type":"Boolean","label":"Cast Shadow","description":"If both \"Cast Shadow\" and \"Receive Shadow\" are enabled, striped patterns are likely to occur in the shadow.","group":"Effect","extraInformation":[],"name":"CastShadow"},{"value":"false","type":"Boolean","label":"Receive Shadow","description":"If both \"Cast Shadow\" and \"Receive Shadow\" are enabled, striped patterns are likely to occur in the shadow.","group":"Effect","extraInformation":[],"name":"ReceiveShadow"}],"sharedPropertyDescriptors":[]},{"description":"⚠️ 3D Lights are highly loaded.","fullName":"Advanced 3D Light","name":"A3L","objectType":"","eventsFunctions":[{"fullName":"","functionType":"Action","name":"onCreated","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const Object2D = objects[0];","const Object3D = Object2D.get3DRendererObject();","const Behavior = Object2D.getBehavior(\"A3L\");","const Renderer = runtimeScene.getGame().getRenderer().getThreeRenderer();//runtimeScene.getRenderer()._threeRenderer;","const Scene = runtimeScene.getLayer(Object2D.getLayer()).getRenderer().getThreeScene();//runtimeScene.getLayer(Object2D.getLayer()).get3DRendererObject();","//","const LightType = Behavior._getType();","const Color = Behavior._getColor() || \"255;255;255\";","let Intensity = Behavior._getIntensity();","const Distance = Behavior._getDistance();","const Decay = 2;","const SpotAngle = Behavior._getSpotAngle() / 2;","const SpotPenumbra = Behavior._getSpotPenumbra();","const CastShadow = Behavior._getCastShadow();","const ShadowMapSize = {\"128px\": 128, \"256px\": 256, \"512px\": 512, \"1024px\": 1024, \"2048px\": 2048}[Behavior._getShadowMapSize()];","const ShadowRange = Behavior._getShadowRange();","const ShadowBias = Behavior._getShadowDepthBias();","const ShadowNormalBias = Behavior._getShadowNormalBias();","const LightHelper = Behavior._getLightHelper();","const ShadowHelper = Behavior._getShadowHelper();","const LightIntensityScale = 1;//10000;//適当// Three.js r160","//","const RGB = Color.split(\";\");","let Light;","if (LightType == \"Directional Light\") {","    Intensity *= LightIntensityScale;","    Light = new THREE.DirectionalLight(`rgb(${RGB[0]}, ${RGB[1]}, ${RGB[2]})`, Intensity);","    const Target = new THREE.Group();","    Target.translateX(128);","    Light.add(Target);","    Light.target = Target;","    //","    Light.shadow.camera.top = ShadowRange / 2;","    Light.shadow.camera.right = ShadowRange / 2;","    Light.shadow.camera.bottom = -ShadowRange / 2;","    Light.shadow.camera.left = -ShadowRange / 2;","    Light.shadow.camera.near = 0.5;// default","    Light.shadow.camera.far = ShadowRange;","    //","    if (LightHelper) {","        const Geometry = new THREE.ConeGeometry(32, 128, 3);","        Geometry.translate(0, 64, 0);","        Geometry.rotateZ(gdjs.toRad(-90));","        const Material = new THREE.MeshBasicMaterial({color: `rgb(${RGB[0]}, ${RGB[1]}, ${RGB[2]})`, wireframe: true});","        const Cone = new THREE.Mesh(Geometry, Material);","        Cone.name = Object2D.name + Object2D.id + \"_DirectionalLightHelper\";","        Light.add(Cone);","        // const DirectionalLightHelper = new THREE.DirectionalLightHelper(Light, 128);","        // DirectionalLightHelper.name = Object2D.name + Object2D.id + \"_DirectionalLightHelper\";","        // Scene.add(DirectionalLightHelper);","    }","} else if (LightType == \"Spot Light\") {","    Intensity *= LightIntensityScale;","    Light = new THREE.SpotLight(`rgb(${RGB[0]}, ${RGB[1]}, ${RGB[2]})`, Intensity, Distance, gdjs.toRad(SpotAngle), SpotPenumbra, Decay);","    const Target = new THREE.Group();","    Target.translateX(1);","    Light.add(Target);","    Light.target = Target;","    //","    Light.shadow.camera.near = 0.5;// default","    Light.shadow.camera.far = ShadowRange;","    Light.shadow.focus = 1; // default","    //","    if (LightHelper && SpotAngle < 90) {","        const ConeHeight = Distance ? Distance : 1000;","\t\tconst ConeRadius = ConeHeight * Math.tan(gdjs.toRad(SpotAngle));","        const Geometry = new THREE.ConeGeometry(ConeRadius, ConeHeight, 8);","        Geometry.translate(0, -ConeHeight / 2, 0);","        Geometry.rotateZ(gdjs.toRad(90));","        const Material = new THREE.MeshBasicMaterial({color: `rgb(${RGB[0]}, ${RGB[1]}, ${RGB[2]})`, wireframe: true});","        const Cone = new THREE.Mesh(Geometry, Material);","        Cone.name = Object2D.name + Object2D.id + \"_SpotLightHelper\";","        Light.add(Cone);","        // const SpotLightHelper = new THREE.SpotLightHelper(Light);","        // SpotLightHelper.name = Object2D.name + Object2D.id + \"_SpotLightHelper\";","        // Scene.add(SpotLightHelper);","    }","} else {","    // Point","    Intensity *= LightIntensityScale;","    Light = new THREE.PointLight(`rgb(${RGB[0]}, ${RGB[1]}, ${RGB[2]})`, Intensity, Distance, Decay);","    //","    Light.shadow.camera.near = 0.5;// default","    Light.shadow.camera.far = ShadowRange;","    //","    if (LightHelper) {","        const Radius = Distance ? Distance : 1000;","        const Geometry = new THREE.IcosahedronGeometry(Radius, 2);","        const Material = new THREE.MeshBasicMaterial({color: `rgb(${RGB[0]}, ${RGB[1]}, ${RGB[2]})`, wireframe: true});","        const Icosahedron = new THREE.Mesh(Geometry, Material);","        Icosahedron.name = Object2D.name + Object2D.id + \"_PointLightHelper\";","        Light.add(Icosahedron);","        // const PointLightHelper = new THREE.PointLightHelper(Light, 16);","        // PointLightHelper.name = Object2D.name + Object2D.id + \"_PointLightHelper\";","        // Scene.add(PointLightHelper);","    }","}","Renderer.shadowMap.enabled = Renderer.shadowMap.enabled ? true : CastShadow;","Light.position.set(0, 0, 0);","Light.scale.x /= Object2D.getWidth();","Light.scale.y /= Object2D.getHeight();","Light.scale.z /= Object2D.getDepth();","Light.castShadow = CastShadow;","Light.shadow.mapSize.width = ShadowMapSize;","Light.shadow.mapSize.height = ShadowMapSize;","Light.shadow.bias = ShadowBias;","Light.shadow.normalBias = ShadowNormalBias;","Light.shadow.updateMatrices(Light);// 必須","Light.shadow.camera.updateProjectionMatrix();","//","Light.name = Object2D.name + Object2D.id + \"_Light\";","Object3D.add(Light);","//","if (ShadowHelper && CastShadow) {","    let CameraHelper;","    if (LightType == \"Directional Light\") {","        // const Geometry = new THREE.BoxGeometry(ShadowRange, ShadowRange, ShadowRange);","        const CylinderHeight = Light.shadow.camera.far;","        const CylinderRadius = Light.shadow.camera.top;","        const Geometry = new THREE.CylinderGeometry(CylinderRadius, CylinderRadius, CylinderHeight, 12, 1);","        Geometry.translate(0, -CylinderHeight / 2, 0);","        Geometry.rotateZ(gdjs.toRad(90));","        const Material = new THREE.MeshBasicMaterial({color: 0xff0000, wireframe: true});","        CameraHelper = new THREE.Mesh(Geometry, Material);","        // CameraHelper = new THREE.CameraHelper(Light.shadow.camera);","        // Scene.add(CameraHelper);","    } else if (LightType == \"Spot Light\") {","        const ConeHeight = Light.shadow.camera.far;","\t\tconst ConeRadius = ConeHeight * Math.tan(gdjs.toRad(SpotAngle));","        const Geometry = new THREE.ConeGeometry(ConeRadius, ConeHeight, 4);","        Geometry.translate(0, -ConeHeight / 2, 0);","        Geometry.rotateZ(gdjs.toRad(90));","        const Material = new THREE.MeshBasicMaterial({color: 0xff0000, wireframe: true});","        CameraHelper = new THREE.Mesh(Geometry, Material);","    } else {","        //Point","        const Geometry = new THREE.IcosahedronGeometry(Light.shadow.camera.far, 1);","        const Material = new THREE.MeshBasicMaterial({color: 0xff0000, wireframe: true});","        CameraHelper = new THREE.Mesh(Geometry, Material);","    }","    CameraHelper.name = Object2D.name + Object2D.id + \"_ShadowHelper\";","    Light.add(CameraHelper);","}"],"parameterObjects":"Object","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"A3F::A3L","type":"behavior"}],"objectGroups":[]},{"fullName":"","functionType":"Action","name":"onDestroy","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const Object2D = objects[0];\r","const Object3D = Object2D.get3DRendererObject();\r","Object3D.traverse((Child) => {\r","    // Light\r","    if (Child.isLight) {\r","        if (Child.castShadow) {\r","            Child.shadow.dispose();\r","        }\r","        Child.dispose();\r","    }\r","});"],"parameterObjects":"Object","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"description":"Object","name":"Object","type":"object"},{"description":"Behavior","name":"Behavior","supplementaryInformation":"A3F::A3L","type":"behavior"}],"objectGroups":[]}],"propertyDescriptors":[{"value":"","type":"Behavior","label":"3D capability","description":"","group":"","extraInformation":["Scene3D::Base3DBehavior"],"name":"Capability3d"},{"value":"Directional Light","type":"Choice","label":"Type","description":"","group":"","extraInformation":["Directional Light","Point Light","Spot Light"],"name":"Type"},{"value":"255;255;255","type":"Color","label":"Color","description":"","group":"","extraInformation":[],"name":"Color"},{"value":"1","type":"Number","label":"Intensity (Default: 1)","description":"","group":"","extraInformation":[],"name":"Intensity"},{"value":"0","type":"Number","label":"Distance (Default: 0)","description":"For Point and Spot Lights. 0 is no limit.","group":"","extraInformation":[],"name":"Distance"},{"value":"45","type":"Number","label":"Spot Angle (0 to 180)","description":"For Spot Lights. The narrower the angle, the better the shadow quality. If it is a multiple of 90, the shadow will not be cast correctly.","group":"","extraInformation":[],"name":"SpotAngle"},{"value":"0.5","type":"Number","label":"Spot Penumbra (0 to 1)","description":"For Spot Lights.","group":"","extraInformation":[],"name":"SpotPenumbra"},{"value":"","type":"Boolean","label":"Cast Shadow","description":"⚠️ This is expensive and requires tweaking to get shadows looking right.","group":"Shadow","extraInformation":[],"name":"CastShadow"},{"value":"512px","type":"Choice","label":"Shadow Map Size","description":"The larger the map, the better the shadow quality, but the greater the load.","group":"Shadow","extraInformation":["128px","256px","512px","1024px","2048px"],"name":"ShadowMapSize"},{"value":"256","type":"Number","label":"Range to Draw Shadows","description":"The smaller the range, the better the shadow quality. For Point and Spot Lights, this value is valid only if the Distance is 0.","group":"Shadow","extraInformation":[],"name":"ShadowRange"},{"value":"0","type":"Number","label":"Shadow Depth Bias (Default: 0)","description":"It is mainly effective for filling gaps between objects and shadows. Reference value: [Directional Light: 0.002] [Point Light: 0.001] [Spot Light: 0.00001]","group":"Shadow Bias","extraInformation":[],"name":"ShadowDepthBias"},{"value":"0","type":"Number","label":"Shadow Normal Bias (Default: 0)","description":"It is mainly effective in reducing striped patterns. Reference value: [Directional Light: 2] [Point Light: 1] [Spot Light: 1]","group":"Shadow Bias","extraInformation":[],"name":"ShadowNormalBias"},{"value":"","type":"Boolean","label":"Light Helper","description":"","group":"Helper","extraInformation":[],"name":"LightHelper"},{"value":"","type":"Boolean","label":"Shadow Range Helper","description":"","group":"Helper","extraInformation":[],"name":"ShadowHelper"}],"sharedPropertyDescriptors":[]}],"eventsBasedObjects":[]},{"author":"","category":"General","extensionNamespace":"","fullName":"3D raycast","gdevelopVersion":">=5.5.222","helpPath":"","iconUrl":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0ibWRpLXJheS1zdGFydC1hcnJvdyIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIGQ9Ik0yMywxMkwxOSwxNlYxM0g2LjgzQzYuNDIsMTQuMTcgNS4zMSwxNSA0LDE1QTMsMyAwIDAsMSAxLDEyQTMsMyAwIDAsMSA0LDlDNS4zMSw5IDYuNDIsOS44MyA2LjgzLDExSDE5VjhMMjMsMTJaIiAvPjwvc3ZnPg==","name":"Raycaster3D","previewIconUrl":"https://asset-resources.gdevelop.io/public-resources/Icons/8419f46b76bce482c14b4c03b4141a64d457e4cdc92686f3470381f5d2694abd_ray-start-arrow.svg","shortDescription":"Find 3D objects that cross a line.","version":"0.1.5","description":["It can be useful to:","- Find 3D objects under the pointer","- Target objects from a 1st person view","- Make AI that detect objects in their field of view"],"origin":{"identifier":"Raycaster3D","name":"gdevelop-extension-store"},"tags":["3d","recast","collision"],"authorIds":["IWykYNRvhCZBN3vEgKEbBPOR3Oc2"],"dependencies":[],"globalVariables":[],"sceneVariables":[],"eventsFunctions":[{"fullName":"","functionType":"Action","name":"onFirstSceneLoaded","sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"Raycaster3D::DefineHelperClasses"},"parameters":["",""]}]}],"parameters":[],"objectGroups":[]},{"description":"Define helper classes JavaScript code.","fullName":"Define helper classes","functionType":"Action","name":"DefineHelperClasses","private":true,"sentence":"Define helper classes JavaScript code","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"GlobalVariableAsBoolean"},"parameters":["_Raycaster3DExtension_ClassesDefined",""]}],"actions":[{"type":{"value":"SetGlobalVariableAsBoolean"},"parameters":["_Raycaster3DExtension_ClassesDefined","True"]}],"events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["gdjs.__raycaster3DExtension = gdjs.__raycaster3DExtension || {};","","class Raycaster {","    raycaster = new THREE.Raycaster();","    pointer = new THREE.Vector2();","    raycastResults = [];","    lastDistance = 0;","    lastPositionX = 0;","    lastPositionY = 0;","    lastPositionZ = 0;","    lastNormalX = 0;","    lastNormalY = 0;","    lastNormalZ = 0;","","    /**","     * @param objectsLists {Hashtable<gdjs.RuntimeObject[]>}","     * @param objects {gdjs.RuntimeObject[]}","     * @param pointerX {number}","     * @param pointerY {number}","     * @param distanceMax {number}","     */","    recastFromCamera(objectsLists, objects, pointerX, pointerY, distanceMax) {","        if (objects.length === 0) {","            return false;","        }","        const object = objects[0];","        const layer = object.getInstanceContainer().getLayer(object.getLayer());","        const camera = layer.getRenderer().getThreeCamera();","","        const raycaster = this.raycaster;","        const pointer = this.pointer;","        pointer.x = -1 + 2 * pointerX;","        pointer.y = 1 - 2 * pointerY;","        raycaster.setFromCamera(pointer, camera);","        raycaster.far = distanceMax;","","        return this._doRecast(objectsLists, objects);","    }","","    /**","     * @param objectsLists {Hashtable<gdjs.RuntimeObject[]>}","     * @param objects {gdjs.RuntimeObject[]}","     * @param originX {number}","     * @param originY {number}","     * @param originZ {number}","     * @param rotationAngle {number}","     * @param elevationAngle {number}","     * @param distanceMax {number}","     */","    recastWithAngle(","        objectsLists,","        objects,","        originX,","        originY,","        originZ,","        rotationAngle,","        elevationAngle,","        distanceMax","    ) {","        if (objects.length === 0) {","            return false;","        }","        const raycaster = this.raycaster;","        raycaster.ray.origin.set(","            originX,","            -originY,","            originZ,","        );","        const rotation = rotationAngle * Math.PI / 180;","        const elevation = elevationAngle * Math.PI / 180;","        const cosElevation = Math.cos(elevation);","        raycaster.ray.direction.set(","            Math.cos(rotation) * cosElevation,","            -Math.sin(rotation) * cosElevation,","            Math.sin(elevation),","        );","        raycaster.far = distanceMax;","","        return this._doRecast(objectsLists, objects);","    }","","    /**","     * @param objectsLists {Hashtable<gdjs.RuntimeObject[]>}","     * @param objects {gdjs.RuntimeObject[]}","     * @param originX {number}","     * @param originY {number}","     * @param originZ {number}","     * @param targetX {number}","     * @param targetY {number}","     * @param targetZ {number}","     * @param distanceMax {number}","     */","    recastBetweenPosition(","        objectsLists,","        objects,","        originX,","        originY,","        originZ,","        targetX,","        targetY,","        targetZ","    ) {","        if (objects.length === 0) {","            return false;","        }","        const raycaster = this.raycaster;","        raycaster.ray.origin.set(","            originX,","            -originY,","            originZ,","        );","        const deltaX = targetX - originX;","        const deltaY = targetY - originY;","        const deltaZ = targetZ - originZ;","        const deltaLength = Math.hypot(deltaX, deltaY, deltaZ);","        raycaster.ray.direction.set(","            deltaX / deltaLength,","            -deltaY / deltaLength,","            deltaZ / deltaLength,","        );","        raycaster.far = deltaLength;","","        return this._doRecast(objectsLists, objects);","    }","","    /**","     * @param objectsLists {Hashtable<gdjs.RuntimeObject[]>}","     * @param objects {gdjs.RuntimeObject[]}","     */","    _doRecast(objectsLists, objects) {","        const raycastResults = this.raycastResults;","        let distanceMin = Number.MAX_VALUE;","        let nearestObject = null;","        for (const object of objects) {","            raycastResults.length = 0;","            const threeObject = object.get3DRendererObject();","            if (!threeObject) {","                continue;","            }","            this.raycaster.intersectObject(threeObject, true, raycastResults);","            if (raycastResults.length > 0 && raycastResults[0].distance < distanceMin) {","                const raycastResult = raycastResults[0];","                distanceMin = raycastResult.distance;","                nearestObject = object;","                this.lastDistance = raycastResult.distance;","                this.lastPositionX = raycastResult.point.x;","                this.lastPositionY = -raycastResult.point.y;","                this.lastPositionZ = raycastResult.point.z;","                this.lastNormalX = raycastResult.normal.x;","                this.lastNormalY = raycastResult.normal.y;","                this.lastNormalZ = raycastResult.normal.z;","            }","        }","        if (!nearestObject) {","            return false;","        }","        raycastResults.length = 0;","        gdjs.evtTools.object.pickOnly(","            objectsLists,","            nearestObject","        );","        return true;","    }","}","","gdjs.__raycaster3DExtension.Raycaster = Raycaster;","gdjs.__raycaster3DExtension.raycaster = new Raycaster();",""],"parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}]}],"parameters":[],"objectGroups":[]},{"description":"Sends a ray from the given source position and angle, intersecting the closest object. The intersected object will become the only one taken into account.","fullName":"Raycast","functionType":"Condition","group":"Collision","name":"RaycastWithAngle","sentence":"Cast a ray from _PARAM2_; _PARAM3_; _PARAM4_ toward a rotation of _PARAM5_°, an elevation of _PARAM6_° and max distance of _PARAM7_ against _PARAM1_","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["eventsFunctionContext.returnValue =","    gdjs.__raycaster3DExtension.raycaster.recastWithAngle(","        eventsFunctionContext.getObjectsLists(\"Object\"),","        objects,","        eventsFunctionContext.getArgument(\"OriginX\"),","        eventsFunctionContext.getArgument(\"OriginY\"),","        eventsFunctionContext.getArgument(\"OriginZ\"),","        eventsFunctionContext.getArgument(\"RotationAngle\"),","        eventsFunctionContext.getArgument(\"ElevationAngle\"),","        eventsFunctionContext.getArgument(\"DistanceMax\")","    );",""],"parameterObjects":"Object","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"description":"Objects to test against the ray","name":"Object","type":"objectList"},{"description":"Ray source X position","name":"OriginX","type":"expression"},{"description":"Ray source Y position","name":"OriginY","type":"expression"},{"description":"Ray source Z position","name":"OriginZ","type":"expression"},{"description":"Rotation angle (in degrees)","name":"RotationAngle","type":"expression"},{"description":"Elevation angle (in degrees)","name":"ElevationAngle","type":"expression"},{"description":"Ray maximum distance (in pixels)","name":"DistanceMax","type":"expression"}],"objectGroups":[]},{"description":"Sends a ray from the given source position to the final point, intersecting the closest object. The intersected object will become the only one taken into account.","fullName":"Raycast to a position","functionType":"Condition","group":"Collision","name":"RaycastBetweenPosition","sentence":"Cast a ray from _PARAM2_; _PARAM3_; _PARAM4_ to _PARAM5_; _PARAM6_; _PARAM7_ against _PARAM1_","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["eventsFunctionContext.returnValue =","    gdjs.__raycaster3DExtension.raycaster.recastBetweenPosition(","        eventsFunctionContext.getObjectsLists(\"Object\"),","        objects,","        eventsFunctionContext.getArgument(\"OriginX\"),","        eventsFunctionContext.getArgument(\"OriginY\"),","        eventsFunctionContext.getArgument(\"OriginZ\"),","        eventsFunctionContext.getArgument(\"TargetX\"),","        eventsFunctionContext.getArgument(\"TargetY\"),","        eventsFunctionContext.getArgument(\"TargetZ\")","    );",""],"parameterObjects":"Object","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"description":"Objects to test against the ray","name":"Object","type":"objectList"},{"description":"Ray source X position","name":"OriginX","type":"expression"},{"description":"Ray source Y position","name":"OriginY","type":"expression"},{"description":"Ray source Z position","name":"OriginZ","type":"expression"},{"description":"Ray target X position","name":"TargetX","type":"expression"},{"description":"Ray target Y position","name":"TargetY","type":"expression"},{"description":"Ray target Z position","name":"TargetZ","type":"expression"}],"objectGroups":[]},{"description":"Sends a ray from the center of the camera, intersecting the closest object. The intersected object will become the only one taken into account.","fullName":"Raycast from camera center","functionType":"Condition","group":"Collision","name":"RaycastFromCameraCenter","sentence":"Cast a ray from the camera center to a maximum distance of _PARAM2_ against _PARAM1_","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["eventsFunctionContext.returnValue =","    gdjs.__raycaster3DExtension.raycaster.recastFromCamera(","        eventsFunctionContext.getObjectsLists(\"Object\"),","        objects,","        0.5,","        0.5,","        eventsFunctionContext.getArgument(\"DistanceMax\")","    );",""],"parameterObjects":"Object","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"description":"Objects to test against the ray","name":"Object","type":"objectList"},{"description":"Ray maximum distance (in pixels)","name":"DistanceMax","type":"expression"}],"objectGroups":[]},{"description":"Sends a ray from the given source point on the camera screen, intersecting the closest object. The intersected object will become the only one taken into account.","fullName":"Raycast from a camera point","functionType":"Condition","group":"Collision","name":"RaycastFromCameraPoint","sentence":"Cast a ray from the camera point _PARAM2_; _PARAM3_ to a maximum distance of _PARAM4_ against _PARAM1_","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["eventsFunctionContext.returnValue =","    gdjs.__raycaster3DExtension.raycaster.recastFromCamera(","        eventsFunctionContext.getObjectsLists(\"Object\"),","        objects,","        eventsFunctionContext.getArgument(\"PointerX\"),","        eventsFunctionContext.getArgument(\"PointerY\"),","        eventsFunctionContext.getArgument(\"DistanceMax\")","    );",""],"parameterObjects":"Object","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"description":"Objects to test against the ray","name":"Object","type":"objectList"},{"description":"X position on the screen (from 0 to 1)","name":"PointerX","type":"expression"},{"description":"Y position on the screen (from 0 to 1)","name":"PointerY","type":"expression"},{"description":"Ray maximum distance (in pixels)","name":"DistanceMax","type":"expression"}],"objectGroups":[]},{"description":"Sends a ray from the cursor on the camera screen, intersecting the closest object. The intersected object will become the only one taken into account.","fullName":"Raycast from cursor","functionType":"Condition","group":"Collision","name":"RaycastFromCameraCursor","sentence":"Cast a ray from the cursor on 2D layer: _PARAM2_ to a maximum distance of _PARAM3_ against _PARAM1_","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":["const { camera, input } = gdjs.evtTools;","","const layer2D = eventsFunctionContext.getArgument(\"Layer2D\");","","const cameraMinX = camera.getCameraBorderLeft(runtimeScene, layer2D, 0);","const cameraMaxX = camera.getCameraBorderRight(runtimeScene, layer2D, 0);","const cameraMinY = camera.getCameraBorderTop(runtimeScene, layer2D, 0);","const cameraMaxY = camera.getCameraBorderBottom(runtimeScene, layer2D, 0);","","const cursorX = input.getCursorX(runtimeScene, layer2D, 0);","const cursorY = input.getCursorY(runtimeScene, layer2D, 0);","","eventsFunctionContext.returnValue =","    gdjs.__raycaster3DExtension.raycaster.recastFromCamera(","        eventsFunctionContext.getObjectsLists(\"Object\"),","        objects,","        (cursorX - cameraMinX) / (cameraMaxX - cameraMinX),","        (cursorY - cameraMinY) / (cameraMaxY - cameraMinY),","        eventsFunctionContext.getArgument(\"DistanceMax\")","    );",""],"parameterObjects":"Object","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"description":"Objects to test against the ray","name":"Object","type":"objectList"},{"description":"2D layer","name":"Layer2D","type":"layer"},{"description":"Ray maximum distance (in pixels)","name":"DistanceMax","type":"expression"}],"objectGroups":[]},{"description":"the last recast intersection distance.","fullName":"Last recast distance","functionType":"ExpressionAndCondition","name":"Distance","sentence":"the last recast intersection distance","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":"eventsFunctionContext.returnValue = gdjs.__raycaster3DExtension.raycaster.lastDistance;","parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[],"objectGroups":[]},{"description":"Return the last recast intersection position on X axis.","fullName":"Last recast X intersection","functionType":"Expression","name":"IntersectionX","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":"eventsFunctionContext.returnValue = gdjs.__raycaster3DExtension.raycaster.lastPositionX;","parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[],"objectGroups":[]},{"description":"Return the last recast intersection position on Y axis.","fullName":"Last recast Y intersection","functionType":"Expression","name":"IntersectionY","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":"eventsFunctionContext.returnValue = gdjs.__raycaster3DExtension.raycaster.lastPositionY;","parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[],"objectGroups":[]},{"description":"Return the last recast intersection position on Z axis.","fullName":"Last recast Z intersection","functionType":"Expression","name":"IntersectionZ","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":"eventsFunctionContext.returnValue = gdjs.__raycaster3DExtension.raycaster.lastPositionZ;","parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[],"objectGroups":[]},{"description":"Return the last recast intersection normal on X axis.","fullName":"Last recast X normal","functionType":"Expression","name":"NormalX","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":"eventsFunctionContext.returnValue = gdjs.__raycaster3DExtension.raycaster.lastNormalX;","parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[],"objectGroups":[]},{"description":"Return the last recast intersection normal on X axis.","fullName":"Last recast X normal","functionType":"Expression","name":"NormalY","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":"eventsFunctionContext.returnValue = gdjs.__raycaster3DExtension.raycaster.lastNormalY;","parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[],"objectGroups":[]},{"description":"Return the last recast intersection normal on Z axis.","fullName":"Last recast Z normal","functionType":"Expression","name":"NormalZ","sentence":"","events":[{"type":"BuiltinCommonInstructions::JsCode","inlineCode":"eventsFunctionContext.returnValue = gdjs.__raycaster3DExtension.raycaster.lastNormalZ;","parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"expressionType":{"type":"expression"},"parameters":[],"objectGroups":[]}],"eventsBasedBehaviors":[],"eventsBasedObjects":[]}],"externalLayouts":[{"associatedLayout":"Main Scene","name":"Station1","instances":[{"angle":0.0,"customSize":true,"depth":55.0,"height":55.0,"keepRatio":true,"layer":"","name":"Camera","persistentUuid":"01a063ac-5631-46d9-b6b4-2ec53d9882fd","width":55.0,"x":1080.0,"y":577.0,"z":222.0,"zOrder":6,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":true,"depth":26.0,"height":26.0,"layer":"","locked":true,"name":"Light_Source","persistentUuid":"a19b530d-328e-4814-b0a3-bcefef1d9106","rotationY":90.0,"sealed":true,"width":26.0,"x":1086.0,"y":-251.0,"z":329.0,"zOrder":9,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":true,"depth":1.0,"height":663.0,"layer":"","locked":true,"name":"Invisible_Wall","persistentUuid":"bfe24b46-22cd-49cc-bab5-9a2fcdd9be3f","sealed":true,"width":461.0,"x":804.0,"y":-560.0,"z":-1.0,"zOrder":11,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":false,"height":0.0,"keepRatio":true,"layer":"","locked":true,"name":"TrainStation_0","persistentUuid":"d003b616-683a-452b-86c0-b697a8150981","sealed":true,"width":0.0,"x":262.0,"y":-522.0,"z":-73.0,"zOrder":12,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":true,"depth":1.0,"height":663.0,"keepRatio":true,"layer":"","locked":true,"name":"Invisible_Wall","persistentUuid":"e66bfd4a-e34c-463d-b95c-1095d2fe6248","sealed":true,"width":246.0,"x":563.0,"y":-561.0,"z":-70.0,"zOrder":13,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":true,"depth":1.0,"height":663.0,"keepRatio":true,"layer":"","locked":true,"name":"Invisible_Wall","persistentUuid":"f0756067-5415-4576-a2f1-d9b7894fda5b","sealed":true,"width":246.0,"x":563.0,"y":101.0,"z":-70.0,"zOrder":13,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":true,"depth":1.0,"height":663.0,"layer":"","locked":true,"name":"Invisible_Wall","persistentUuid":"d60e829c-f09a-4cf0-9c14-aaedc0a1d013","sealed":true,"width":461.0,"x":804.0,"y":102.0,"z":-1.0,"zOrder":11,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":false,"height":0.0,"keepRatio":true,"layer":"","locked":true,"name":"TrainStation_0","persistentUuid":"e87a9411-7aff-4f7f-8722-28ea10834f30","sealed":true,"width":0.0,"x":262.0,"y":140.0,"z":-73.0,"zOrder":12,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":false,"height":0.0,"keepRatio":true,"layer":"","locked":true,"name":"TrainStation_0","persistentUuid":"c823e449-8ddc-44b6-b42a-44029e61d874","sealed":true,"width":0.0,"x":262.0,"y":802.0,"z":-73.0,"zOrder":12,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":true,"depth":1.0,"height":663.0,"layer":"","locked":true,"name":"Invisible_Wall","persistentUuid":"e31ea514-a87f-4dfd-94dc-41842dd51ea1","sealed":true,"width":461.0,"x":811.0,"y":773.0,"z":-1.0,"zOrder":11,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":true,"depth":1.0,"height":663.0,"keepRatio":true,"layer":"","locked":true,"name":"Invisible_Wall","persistentUuid":"1bb7a975-1b88-4bc5-97ae-2b6f9822e186","sealed":true,"width":246.0,"x":563.0,"y":764.0,"z":-70.0,"zOrder":13,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":true,"depth":306.54220084549618,"height":1329.305039946219,"keepRatio":true,"layer":"","locked":true,"name":"Train","persistentUuid":"4f792c2e-5526-44e0-99de-0b894d0700f2","sealed":true,"width":480.367077829829,"x":1056.0,"y":-629.0,"z":-79.0,"zOrder":14,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":true,"depth":26.0,"height":26.0,"layer":"","locked":true,"name":"Light_Source","persistentUuid":"276ffd74-ce71-485f-846c-93f605ad38ca","rotationY":90.0,"sealed":true,"width":26.0,"x":1085.0,"y":671.0,"z":329.0,"zOrder":9,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":true,"depth":26.0,"height":26.0,"layer":"","locked":true,"name":"Light_Source","persistentUuid":"923875da-d8d2-4a17-acd4-b4e0fd3af8de","rotationY":90.0,"sealed":true,"width":26.0,"x":1079.0,"y":248.0,"z":329.0,"zOrder":9,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":true,"depth":86.0,"height":86.0,"keepRatio":true,"layer":"","name":"Trigger_Box","persistentUuid":"e147ad11-b17f-4e4e-a0f0-6f7f6d06aeea","width":86.0,"x":758.0,"y":111.0,"zOrder":15,"numberProperties":[],"stringProperties":[],"initialVariables":[{"name":"Level","type":"number","value":2.0}]},{"angle":0.0,"customSize":true,"depth":26.0,"height":26.0,"layer":"","locked":true,"name":"Light_Source","persistentUuid":"1d9c9883-2e4a-487a-a03d-7913db7a8a51","rotationY":90.0,"sealed":true,"width":26.0,"x":1086.0,"y":-913.0,"z":329.0,"zOrder":9,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":true,"depth":1.0,"height":663.0,"layer":"","locked":true,"name":"Invisible_Wall","persistentUuid":"fb9fb381-20e7-41a8-bf18-e1cc07fbfb65","sealed":true,"width":461.0,"x":804.0,"y":-1222.0,"z":-1.0,"zOrder":11,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":true,"depth":352.0,"height":717.0,"keepRatio":true,"layer":"","name":"TrainStation_0","persistentUuid":"0af8cc39-73f0-4ebe-a07a-9911b3586bcc","width":1000.0,"x":262.0,"y":-2559.0,"z":-73.0,"zOrder":12,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":true,"depth":1.0,"height":663.0,"keepRatio":true,"layer":"","locked":true,"name":"Invisible_Wall","persistentUuid":"e5856bce-6a22-4a7f-a711-34faf496da37","sealed":true,"width":246.0,"x":563.0,"y":-1223.0,"z":-70.0,"zOrder":13,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":false,"height":0.0,"keepRatio":true,"layer":"","name":"StartPos","persistentUuid":"4613b136-522f-4e6f-9467-917c654e770e","width":0.0,"x":1103.0,"y":120.0,"z":10.0,"zOrder":16,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":false,"height":0.0,"keepRatio":true,"layer":"","name":"TrainStation_0","persistentUuid":"6085bf51-a581-4f26-aa5c-606593f8dce5","width":0.0,"x":262.0,"y":-1184.0,"z":-73.0,"zOrder":12,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":false,"height":0.0,"keepRatio":true,"layer":"","name":"TrainStation_0","persistentUuid":"7e7304d1-4d02-4a32-a1dc-bc4fe2befe2b","width":0.0,"x":262.0,"y":-1846.0,"z":-73.0,"zOrder":12,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":true,"depth":424.0,"height":100.0,"layer":"","name":"Black_Box","persistentUuid":"232fbc2c-126b-4129-b9f0-b21f76892ab0","width":790.0,"x":511.0,"y":-2661.0,"z":-101.0,"zOrder":17,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":true,"depth":424.0,"height":100.0,"layer":"","name":"Black_Box","persistentUuid":"608ef7c3-6112-4906-b612-047fbdfa2ed0","width":790.0,"x":515.0,"y":1371.0,"z":-101.0,"zOrder":17,"numberProperties":[],"stringProperties":[],"initialVariables":[]}],"editionSettings":{"grid":false,"gridType":"rectangular","gridWidth":32.0,"gridHeight":32.0,"gridOffsetX":0.0,"gridOffsetY":0.0,"gridColor":10401023.0,"gridAlpha":0.8,"snap":false,"zoomFactor":0.41371097838509027,"windowMask":false}},{"associatedLayout":"Main Scene","name":"Station2","instances":[{"angle":0.0,"customSize":true,"depth":324.4101647835131,"height":1406.788578757092,"keepRatio":true,"layer":"","locked":true,"name":"Train","persistentUuid":"8439858a-2904-49f0-8c78-0b9027cdc643","sealed":true,"width":508.367077829829,"x":1251.0,"y":75.0,"zOrder":1,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":false,"height":0.0,"keepRatio":true,"layer":"","name":"Camera","persistentUuid":"1a0beaf7-b7de-4853-8450-052a7b1c5d14","width":0.0,"x":836.0,"y":1070.0,"z":249.0,"zOrder":2,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":false,"height":0.0,"keepRatio":true,"layer":"","name":"StartPos","persistentUuid":"9bec1163-621b-40c0-8ff4-acb50f7534b6","width":0.0,"x":919.0,"y":461.0,"z":96.0,"zOrder":3,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":true,"depth":8.0,"height":1421.0,"layer":"","locked":true,"name":"Invisible_Wall","persistentUuid":"ce802691-15c9-4705-89c2-79ebc694f801","sealed":true,"width":310.0,"x":710.0,"y":-200.0,"z":312.0,"zOrder":4,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":true,"depth":8.0,"height":1421.0,"layer":"","locked":true,"name":"Invisible_Wall","persistentUuid":"48b6cb8c-a606-4e72-8a12-88ed61887150","rotationY":-89.0,"sealed":true,"width":310.0,"x":589.0,"y":-215.0,"z":158.0,"zOrder":4,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":true,"depth":8.0,"height":1421.0,"layer":"","locked":true,"name":"Invisible_Wall","persistentUuid":"0d107a26-2615-4691-843a-47cf0df52188","rotationY":-89.0,"sealed":true,"width":310.0,"x":815.0,"y":-217.0,"z":158.0,"zOrder":4,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":true,"depth":8.0,"height":1421.0,"layer":"","locked":true,"name":"Invisible_Wall","persistentUuid":"0a1be28b-cf07-4792-be12-ef0f4be96684","sealed":true,"width":310.0,"x":695.0,"y":-197.0,"z":77.0,"zOrder":4,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":false,"height":0.0,"keepRatio":true,"layer":"","name":"Trigger_Box","persistentUuid":"d804e9a0-2207-45c0-8354-aa4fd85c1e43","width":0.0,"x":947.0,"y":855.0,"z":72.0,"zOrder":5,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":true,"depth":161.0,"height":21.0,"layer":"","locked":true,"name":"Invisible_Wall","persistentUuid":"049e261a-3ac0-4138-b231-8ba2d7e1b24a","sealed":true,"width":226.0,"x":744.0,"y":-225.0,"z":93.0,"zOrder":6,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":true,"depth":161.0,"height":21.0,"layer":"","locked":true,"name":"Invisible_Wall","persistentUuid":"391012de-4d4f-4354-88e7-9c6a9b5b9e1d","sealed":true,"width":226.0,"x":741.0,"y":1184.0,"z":93.0,"zOrder":6,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":true,"depth":490.0,"height":1822.8,"layer":"","locked":true,"name":"Black_Box","persistentUuid":"d1d6e2cf-2cab-4fc1-939e-902877e5b986","sealed":true,"width":651.7,"x":547.0,"y":-420.0,"zOrder":7,"numberProperties":[],"stringProperties":[],"initialVariables":[]}],"editionSettings":{"grid":false,"gridType":"rectangular","gridWidth":32.0,"gridHeight":32.0,"gridOffsetX":0.0,"gridOffsetY":0.0,"gridColor":10401023.0,"gridAlpha":0.8,"snap":false,"zoomFactor":3.97024180061929,"windowMask":false}}]}